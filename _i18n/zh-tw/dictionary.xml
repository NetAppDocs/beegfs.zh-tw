<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="014e0772632604acc6760e28c820cb22" category="summary">疑難排解概述</block>
  <block id="818c6e601a24f72750da0f6c9b8ebe28" category="paragraph">Lorem ipsum dolor sit amet、consectetur adipiscing elit、sed do eiusmod pemor incididdunt ut labore et dolore magna aliqua。</block>
  <block id="e95081b0e85f690a9bdcb41ea940c186" category="summary">若要在NetApp上實作BeeGFS解決方案、請確定您的環境符合技術需求。</block>
  <block id="de65efa2c0698ededf4229cafcca2d08" category="doc">技術需求</block>
  <block id="47dee50ad0138b8f5ca70e40e86e6c04" category="section-title">硬體需求</block>
  <block id="16cc6ce48a597aebb8ab5132cb3523dc" category="cell">硬體元件</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="cell">需求</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="paragraph">2.</block>
  <block id="a631c0a4a9b408ccc2559c2a3323af51" category="paragraph">*雜項：*</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="cell">8.</block>
  <block id="5fea6233624bde259c99b82e6d7de3c6" category="section-title">軟體部署需求</block>
  <block id="699b33acca98ab1d3eb0d684f59f1c98" category="paragraph">下表列出在以Ansible為基礎的BeeGFS部署中、自動部署的軟體需求。</block>
  <block id="719d067b229178f03bcfa1da4ac4dede" category="cell">軟體</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">版本</block>
  <block id="eb57eb77389d7d4e71c5790c9c6ec1a7" category="cell">BeeGFS</block>
  <block id="9197ec103d780b6779cb78eec6afce31" category="cell">7.2.6</block>
  <block id="51cf7c858a71d06ee12a42cfbff97da7" category="cell">電暈器同步</block>
  <block id="d95adee972ae170512bd3bdbce557054" category="cell">起搏器</block>
  <block id="13f2a3097f055e043d74b20940df2658" category="section-title">Ansible控制節點需求</block>
  <block id="c3ee5ddf91e65773d3e9d27f9e627350" category="inline-link">Ansible文件</block>
  <block id="83d32979307efd813f41ef5070206fd3" category="paragraph">NetApp上的BeeGFS解決方案是從可存取的控制節點進行部署和管理。如需詳細資訊、請參閱<block ref="4410f583cbabaee2389115371eb2ab02" category="inline-link-rx"></block>。</block>
  <block id="158a122309f0454b31e4853755a5962a" category="paragraph">下表所列的軟體需求、是下列NetApp BeeGFS Ansible系列產品的特定版本。</block>
  <block id="d51d5ee15f404c2f4f7863bebcde1fac" category="cell">Ansible</block>
  <block id="a7f5f35426b927411fc9231b56382173" category="cell">Python</block>
  <block id="d35d779fe31977939a0a72c5c962d2af" category="cell">其他Python套件</block>
  <block id="5510cedb08df4208db0688e41cea716f" category="section-title">檔案節點需求</block>
  <block id="2488fead2064d4aeb886afc1a0010ee7" category="cell">Linux核心</block>
  <block id="f6883581bd882ffdf705127738982586" category="cell">InfiniBand / RDMA驅動程式</block>
  <block id="fbc534ed33feffdfe8fc56e7cde13e6e" category="section-title">EF600區塊節點需求</block>
  <block id="e791d47d690cbc6aa7c7f9434ebd2fa1" category="cell">作業系統SANtricity</block>
  <block id="b384b3cf4ffa3a81a88e8687dd6ca028" category="cell">NVSRAM</block>
  <block id="b89cb5f38b54c6181858af1281dcaeef" category="cell">磁碟機韌體</block>
  <block id="cef5ab698867f39ec4b495cba708da1a" category="summary">BeeGFS on NetApp解決方案結合BeeGFS平行檔案系統與NetApp EF600儲存系統、打造可靠、可擴充且具成本效益的基礎架構、可跟上嚴苛工作負載的腳步。</block>
  <block id="c0c4b60d27032c028c91440e9d3be949" category="doc">解決方案總覽</block>
  <block id="c6ff1c8ffcd7024a30e7240129bf57a8" category="section-title">NVA方案</block>
  <block id="f109ec830b8ab112f8e89da398d4ca0f" category="paragraph">NetApp上的BeeGFS解決方案是NetApp驗證架構（NVA）方案的一部分、可為客戶提供特定工作負載和使用案例的參考組態和規模調整指導。NVA解決方案經過徹底測試與設計、可將部署風險降至最低、並加速上市時間。</block>
  <block id="2a3b399798aa16ecfbc1425cc560bfad" category="section-title">使用案例</block>
  <block id="9a250aa43ea6738ca4cd441c42e26b4e" category="paragraph">下列使用案例適用於NetApp上的BeeGFS解決方案：</block>
  <block id="f743e786ba2a29eb033d8f7e1e2101d3" category="inline-link">BeeGFS for AI：事實與虛構</block>
  <block id="b761cb5be0f07b26af56bda6c19cf90a" category="list-text">人工智慧（AI）包括機器學習（ML）、深度學習（DL）、大規模自然語言處理（NLP）、以及自然語言理解（N5U）。如需詳細資訊、請參閱<block ref="e0ec3865f791595484686c9b79436d0e" category="inline-link-rx"></block>。</block>
  <block id="3476c4aa4908c2b49f576f13d95d657a" category="inline-link">為什麼BeeGFS超越HPC</block>
  <block id="4becc7ac7e53ca421f06307e37478c8a" category="list-text">高效能運算（HPC）、包括透過MPI（訊息傳遞介面）和其他分散式運算技術加速的應用程式。如需詳細資訊、請參閱<block ref="3f795d4ce44ed51872cb7704a4553f2a" category="inline-link-rx"></block>。</block>
  <block id="89b4dd8e856627d44ffe8d3d0066cd98" category="list-text">應用程式工作負載的特徵為：</block>
  <block id="c9ccfce7935790c9fd0d9ccf98da5177" category="list-text">讀取或寫入大於1GB的檔案</block>
  <block id="680e47afa4860ce2ac4a078a0d466121" category="list-text">由多個用戶端（10s、100s和1000s）讀取或寫入同一個檔案</block>
  <block id="56e0e65d3207ad1f0f7efb003935c936" category="list-text">多TB或數PB資料集。</block>
  <block id="f36d694578bdc30f9cfa5faeb163df61" category="list-text">需要單一儲存命名空間的環境、可針對大型與小型檔案的組合進行最佳化。</block>
  <block id="e654f7a86a4458b9cd662267e0f29b52" category="section-title">效益</block>
  <block id="abc4f101e3891d158ab6ad80a3568c46" category="paragraph">在NetApp上使用BeeGFS的主要優點包括：</block>
  <block id="f1161b5399c6f13433f0d7ef82e26dfc" category="list-text">通過驗證的硬體設計可提供完整的硬體與軟體元件整合、確保可預測的效能與可靠性。</block>
  <block id="d678167c236b5d1af08b550c5038cccb" category="list-text">使用Ansible進行部署與管理、以達到簡化與大規模一致的目標。</block>
  <block id="82a72442e588bfcf2e472da1d9834f2a" category="inline-link">介紹監控NetApp E系列解決方案的架構</block>
  <block id="e30389e6b0882b87124e5401375e84e3" category="list-text">使用E系列效能分析器和BeeGFS外掛程式提供監控和觀察能力。如需詳細資訊、請參閱<block ref="5fd4bf3409228b006228517662906ac3" category="inline-link-rx"></block>。</block>
  <block id="fc20f26327fc88da82154f6c09f6991d" category="list-text">高可用度採用共享磁碟架構、提供資料持久性與可用度。</block>
  <block id="d47615808883de28c6943d206bf0d2cb" category="inline-link">Kubernetes與BeeGFS會面：這是一段符合未來需求的投資故事</block>
  <block id="7f62321e8e75c63a1fe94a4d41435dac" category="list-text">使用Container和Kubernetes支援現代化的工作負載管理與協調。如需詳細資訊、請參閱<block ref="3ba4b256f7ab4762b0c431fc1809aa9b" category="inline-link-rx"></block>。</block>
  <block id="cf03dce6d27c37ae2bf803a5ad8ddb93" category="section-title">HA架構</block>
  <block id="5c306284db745339f153886fd666ba5f" category="paragraph">NetApp的BeeGFS透過NetApp硬體打造完全整合的解決方案、實現共享磁碟高可用度（HA）架構、擴充BeeGFS企業版的功能。</block>
  <block id="5481b5a39e7ecc68d8956711964cffcb" category="admonition">雖然BeeGFS社群版本可以免費使用、但企業版需要向NetApp等合作夥伴購買專業支援訂閱合約。企業版允許使用多項額外功能、包括恢復能力、配額強制和儲存資源池。</block>
  <block id="d1d1e6e3c28393c984fbb987be60324d" category="paragraph">下圖比較了共享無共享和共享磁碟HA架構。</block>
  <block id="52feb691d73302501483cced28704021" category="inline-link">發表NetApp支援的BeeGFS高可用度</block>
  <block id="0bd36571bea371893d99d201b7835845" category="paragraph">如需詳細資訊、請參閱<block ref="eb50143d83b72cd897fd47297781957c" category="inline-link-rx"></block>。</block>
  <block id="733ba000742537e7a4435573aca51393" category="inline-link">Ansible Galaxy</block>
  <block id="6ec27f578410cadd1a5e4b274d75cdb2" category="inline-link">NetApp的E系列GitHub</block>
  <block id="d643841fe27d769d39ef1865b69cb48b" category="paragraph">NetApp上的BeeGFS是使用Ansible Automation（位於GitHub和Ansible Galaxis）（BeeGFS收藏可從取得）來交付及部署<block ref="6e6b4aec10f34b8873e2101fed073d9a" category="inline-link-rx"></block> 和<block ref="6e9ef2e0fff4844f9560394ab05a51e9" category="inline-link-rx"></block>）。雖然Ansible主要是針對用來組裝BeeGFS建置區塊的硬體進行測試、但您可以設定它在任何使用支援Linux套裝作業系統的x86型伺服器上執行。</block>
  <block id="dcd417571f5073f074067e7d0d445a2e" category="inline-link">部署BeeGFS搭配E系列儲存設備</block>
  <block id="cb8de1e2639bc0378b3714cf6ba35837" category="paragraph">如需詳細資訊、請參閱<block ref="8af04fa161ecb5f3ec4feab8d52e96c8" category="inline-link-rx"></block>。</block>
  <block id="e69ebf3ec790efafa5cfc7b6502ccfe4" category="summary">NetApp上的BeeGFS解決方案包含架構設計考量、可用來判斷支援已驗證工作負載所需的特定設備、纜線和組態。</block>
  <block id="ebd8431a0b14e9588377860f5d21d80b" category="doc">架構總覽</block>
  <block id="dc3f25ceea15d952c20a612e806039b4" category="section-title">建置區塊架構</block>
  <block id="f968e1fab577166d28baa278b7fbec71" category="paragraph">BeeGFS檔案系統可根據儲存需求以不同方式進行部署和擴充。例如、主要包含大量小型檔案的使用案例、將可從額外的中繼資料效能和容量中獲益、而較少大型檔案的使用案例、則可能會讓實際檔案內容的儲存容量和效能更高。這些多重考量因素會影響平行檔案系統部署的不同層面、進而增加設計和部署檔案系統的複雜度。</block>
  <block id="a0f56902d72268743383af795844da43" category="paragraph">為了因應這些挑戰、NetApp設計了標準建置區塊架構、用於橫向擴充這些層面。通常、BeeGFS建置區塊會部署在三種組態設定檔中的其中一種：</block>
  <block id="cbebd598c304febe3d9ce528a39f79ca" category="list-text">單一基礎建置區塊、包括BeeGFS管理、中繼資料和儲存服務</block>
  <block id="f606793c59d48b54b2b3a18a70dd823d" category="list-text">BeeGFS中繼資料加上儲存建置區塊</block>
  <block id="5d36a489380874ed227d193957d972de" category="list-text">BeeGFS僅儲存建置區塊</block>
  <block id="3679eaa30562d3f5040cb64c625a3455" category="paragraph">這三個選項之間唯一的硬體變更是使用較小的磁碟機來處理BeeGFS中繼資料。否則、所有組態變更都會透過軟體套用。使用Ansible做為部署引擎、為特定建置區塊設定所需的設定檔、可讓組態工作變得簡單明瞭。</block>
  <block id="0623572375a27997b16aa8f259513278" category="paragraph">如需詳細資料、請參閱 <block ref="27bdb301347b8d7fa8a057384825ba6a" category="inline-xref-macro-rx"></block>。</block>
  <block id="e3b101a8b62b6541bfde340117b3f92b" category="section-title">檔案系統服務</block>
  <block id="26e699f65c8724efd549a1445c4b9eb3" category="paragraph">BeeGFS檔案系統包含下列主要服務：</block>
  <block id="a9effde6a4743049a20cd75e19532999" category="list-text">*管理服務。*註冊並監控所有其他服務。</block>
  <block id="edd29dd37a407bf6bdd3dcefe97db0d5" category="list-text">*儲存服務。*儲存稱為資料區塊檔案的分散式使用者檔案內容。</block>
  <block id="dc134a7a2e4d2cbe6789c47709b38b35" category="list-text">*中繼資料服務。*會追蹤檔案系統配置、目錄、檔案屬性等。</block>
  <block id="bfd4d1f28f912adef70ff502946f2d7a" category="list-text">*用戶端服務。*掛載檔案系統以存取儲存的資料。</block>
  <block id="94ab5c559c66cc4fc4b2e1c1ed4b00a3" category="paragraph">下圖顯示了與NetApp E系列系統搭配使用的BeeGFS解決方案元件和關係。</block>
  <block id="9ac96964e53d6a8061e16551c85e7b05" category="paragraph">作為平行檔案系統、BeeGFS會將其檔案等量磁碟區化到多個伺服器節點上、以最大化讀寫效能和擴充性。伺服器節點可共同運作、提供單一檔案系統、讓其他伺服器節點（通常稱為_Clients_）同時掛載及存取。這些用戶端可以像NTFS、XFS或ext4等本機檔案系統一樣、查看及使用分散式檔案系統。</block>
  <block id="2cd4f3c05097f81722656ab8de9b6a25" category="paragraph">這四項主要服務可在多種支援的Linux套裝作業系統上執行、並可透過任何支援TCP/IP或RDMA的網路進行通訊、包括InfiniBand（IB）、OMNI-Path（opa）和RDMA over Converged Ethernet（roce）。BeeGFS伺服器服務（管理、儲存及中繼資料）是使用者空間精靈、而用戶端則是原生核心模組（無修補程式）。所有元件均可在不重新開機的情況下安裝或更新、而且您可以在同一個節點上執行任何服務組合。</block>
  <block id="006d93ef4f9eec646f24191298096ff5" category="section-title">已驗證節點</block>
  <block id="18bc6212071e7cb1cca90788a40a9301" category="inline-link">聯想的網站</block>
  <block id="4b2aed7f56892904807d2a0dba262f91" category="section-title">已驗證硬體設計</block>
  <block id="c8a0fcd1a15bb039926f56fd15ce82e9" category="summary">適用於NetApp解決方案BeeGFS的詞彙與概念。</block>
  <block id="5d146c3fd3b69782d69f66b386b88a4c" category="doc">詞彙與概念</block>
  <block id="5710fc980ad3cc07a2d53a30f8e42802" category="paragraph">下列術語與概念適用於NetApp上的BeeGFS解決方案。</block>
  <block id="cf5f3091e30dee6597885d8c0e0c357f" category="cell">期限</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">說明</block>
  <block id="0a40e3c91a3a55c9a37428c6d194d0e5" category="paragraph">AI</block>
  <block id="10a99475af71a950df10ae4fb41e6b27" category="paragraph">人工智慧：</block>
  <block id="206b11a774f63418bae21625e6f6d2fb" category="paragraph">可Ansible Inventory</block>
  <block id="4278d92c9bdf11d430a86f440cffbb06" category="paragraph">目錄結構包含Yaml檔案、可用來描述所需的BeeGFS HA叢集。</block>
  <block id="396262ee936f3d3e26ff0e60bea6cae0" category="paragraph">BMC</block>
  <block id="20e7cb5fddc6ef60deff83e38954fc9c" category="paragraph">基礎板管理控制器。有時稱為服務處理器。</block>
  <block id="f5ce9f5cb682a1f863d5a8c51ac28683" category="paragraph">DL</block>
  <block id="3a113e532fcdd400cdf83ef62ac9d9de" category="paragraph">深度學習：</block>
  <block id="c404903bef63acba3e3abe370e09474f" category="paragraph">檔案節點</block>
  <block id="2118e5d99e7b7d309a8f82e52f89ab22" category="paragraph">BeeGFS檔案伺服器。</block>
  <block id="594c16ca0695f6665d7cf4971707adf6" category="paragraph">HA</block>
  <block id="b5c55115b0714618209ee9459023bad1" category="paragraph">高可用度：</block>
  <block id="a25baf723f95fbcbceae8399b638f108" category="paragraph">HIC</block>
  <block id="2d5307a091565cb524b7c0a2c48a1588" category="paragraph">主機介面卡。</block>
  <block id="2f569257101cf136a49d983584bfc44f" category="paragraph">高效能運算</block>
  <block id="9a3968cd0518e869657fa99f060cd8f2" category="paragraph">高效能運算：</block>
  <block id="06a52007ec390481940877b63a4b7c61" category="paragraph">HPC型工作負載</block>
  <block id="221d47451f4f42c2e516a414798b6e1e" category="paragraph">HPC型工作負載的特點通常是多個運算節點或GPU都需要同時存取相同的資料集、以利分散式運算或訓練工作。這些資料集通常是由大型檔案所組成、應跨越多個實體儲存節點進行等量分佈、以消除傳統硬體瓶頸、避免同時存取單一檔案。</block>
  <block id="d01fd9b01e9dde8bd3dc247afbfb7218" category="paragraph">ML</block>
  <block id="65abbc2190f8ea8522de3b7df3397302" category="paragraph">機器學習：</block>
  <block id="85587c49afa2ea2adacd4bbcdb57d064" category="paragraph">NLP</block>
  <block id="1e8218217ed7a37de1bd5f394a253db8" category="paragraph">自然語言處理：</block>
  <block id="04808383df00e6501c912f8fae661f73" category="paragraph">NLU</block>
  <block id="f0f701867a5e02fa406b05e22df7ae03" category="paragraph">自然語言理解：</block>
  <block id="af33781ae5dd2f5ffb194a90989038a8" category="paragraph">NVA</block>
  <block id="4119dd754c8118aa6a1bb36f194a2f52" category="paragraph">NetApp驗證架構（NVA）方案針對特定工作負載和使用案例、提供參考組態和規模調整指引。這些解決方案經過徹底測試、旨在將部署風險降至最低、並加速上市時間。</block>
  <block id="745f22cbd412f2eab6c6bf95417e8b09" category="doc">本網站所含內容</block>
  <block id="fb7e8abee0ed4186f8c4b871d0ea6ac3" category="inline-link-macro">設計總覽</block>
  <block id="42f8643eb52a942747937327c72c8361" category="inline-link-macro">部署總覽</block>
  <block id="fefc21957cc1bbb1f6a7704d95ad5e0d" category="summary">您可以使用第二代NetApp BeeGFS建置區塊設計、在NetApp上部署BeeGFS至已驗證的檔案和區塊節點。</block>
  <block id="ef200d7e9d983785df6b4e01fa65bf59" category="section-title">Ansible集合與角色</block>
  <block id="87d27d52f7fc81e8a134f2e3d2a57ecf" category="inline-link">NetApp E系列BeeGFS系列</block>
  <block id="4aa1cf90ffa01d3b63825bad839d9e29" category="inline-link-macro">瞭解Ansible庫存</block>
  <block id="1325754275d5677e560f21035bc1ac47" category="paragraph">如需其他詳細資料、請參閱 <block ref="dd39ef1fcc2e17fe1fe509b7ac2d5dea" category="inline-link-macro-rx"></block>。</block>
  <block id="5b3ae76175242b9c0c63ba5668657f49" category="admonition">由於在NetApp解決方案上部署BeeGFS涉及許多步驟、因此NetApp不支援手動部署解決方案。</block>
  <block id="6201cef3e5bb8f42f2aa1876b8c1f544" category="section-title">BeeGFS建置區塊的組態設定檔</block>
  <block id="3c411e2f06cd1b5275d2be84bb18a641" category="paragraph">部署程序涵蓋下列組態設定檔：</block>
  <block id="3c1ad21a1c1a2804f8ace80b84822bfe" category="list-text">一個基礎建置區塊、包含管理、中繼資料和儲存服務。</block>
  <block id="416ad52da618754efb3680e957b1a048" category="list-text">第二個建置區塊、包含中繼資料和儲存服務。</block>
  <block id="11047a79bd1eab4d52ba658a48a430e8" category="list-text">僅包含儲存服務的第三個建置區塊。</block>
  <block id="20cf8ff34f34ae23669e586d1092a0f9" category="section-title">部署步驟總覽</block>
  <block id="9d863a0564ad86180bde2b2a6c27a6ed" category="paragraph">部署作業包括下列高層級工作：</block>
  <block id="fd2f8c173ade715231c21c932686e38b" category="list-title">硬體部署</block>
  <block id="f08d36149d715ffbb8eca9f7159e0d27" category="list-text">實際組裝每個建置區塊。</block>
  <block id="abd55e01ead6dac45d997ad9c82c8019" category="inline-link-macro">部署硬體</block>
  <block id="65353eb96f13d02029086d1790108e3c" category="list-text">機架與纜線硬體。如需詳細程序、請參閱 <block ref="19367e6e5e194f2806703eb905741326" category="inline-link-macro-rx"></block>。</block>
  <block id="b9205e876aa43217d9358621cf2c6187" category="list-title">軟體部署</block>
  <block id="359f84c66084d8c8c9d4cb7ca3945bcd" category="inline-link-macro">設定檔案和區塊節點</block>
  <block id="f8367dab28e2315251df9dcf227916b5" category="list-text"><block ref="4cfaa56cb8da11f04e7ee8ae6dd86bcc" category="inline-link-macro-rx"></block>。</block>
  <block id="ee63db10faeceba4efb3b03145e0ec26" category="list-text">在檔案節點上設定BMC IP</block>
  <block id="aa51221099b00aa6e09e3cb6b1b03f47" category="list-text">安裝支援的作業系統、並在檔案節點上設定管理網路</block>
  <block id="a75b117cd8d7af9205b2185d8afb8537" category="list-text">在區塊節點上設定管理IP</block>
  <block id="14f10d91a4d4d076d9f025fdb6134949" category="inline-link-macro">設定可Ansible控制節點</block>
  <block id="b81f7e6126c9f5040f05685e56e57af1" category="list-text"><block ref="6848fc9a1ed48359bab6d9326922d03c" category="inline-link-macro-rx"></block>。</block>
  <block id="51d961299f8aa9bb882574aae2a219eb" category="inline-link-macro">調整系統設定以獲得效能</block>
  <block id="9312585e52fd3b0a0898c7f73fdfd8cc" category="list-text"><block ref="dbe1843153b6696d3dd846d3a25ea7b2" category="inline-link-macro-rx"></block>。</block>
  <block id="2903652ee31835883feeb469228b4406" category="inline-link-macro">建立可Ansible庫存</block>
  <block id="914b8eb4568f7c438e1d415af01c2787" category="list-text"><block ref="dbbcb9482f49ee969cddb7f10864cbd0" category="inline-link-macro-rx"></block>。</block>
  <block id="c8f38adfaba8270e793616e0556571c7" category="inline-link-macro">定義BeeGFS建置區塊的Ansible庫存</block>
  <block id="2640957ad14de18b2d308da5e116b4a0" category="list-text"><block ref="56ee4018bb6227ffe39900ebf12f2472" category="inline-link-macro-rx"></block>。</block>
  <block id="d21cb96c35176f0f0ea13876f354d072" category="inline-link-macro">使用Ansible部署BeeGFS</block>
  <block id="a8169193bd5718bbe78111b3a1f874d7" category="list-text"><block ref="dffbd1bc941e2f4395de7cba04c6653b" category="inline-link-macro-rx"></block>。</block>
  <block id="096a6674c1f4ef681d88a6eb229299b7" category="inline-link-macro">設定BeeGFS用戶端</block>
  <block id="f159952d71e33cd0a1ffbb2bcc4ce2ad" category="list-text"><block ref="75197807ccb18c9f99e8f2a2a3443aea" category="inline-link-macro-rx"></block>。</block>
  <block id="d8ca15234a274a841f06a1d429141054" category="summary">在每部伺服器的基礎板管理控制器（BMC）上設定網路、並在每個控制器上設定管理連接埠。</block>
  <block id="1cfd8029b1372ddacb436890446b43fd" category="doc">設定檔案節點和區塊節點</block>
  <block id="d900235d99f416c3bfda0461cbb71f26" category="paragraph">雖然大部分的軟體組態工作都是使用NetApp提供的Ansible集合來自動化、但您必須在每部伺服器的底板管理控制器（BMC）上設定網路、並在每個控制器上設定管理連接埠。</block>
  <block id="02f510b4f0f01c83fb0898c7c21472f3" category="section-title">設定檔案節點</block>
  <block id="58ee770c560ec650edbb0731c6882d53" category="list-text">在每部伺服器的基礎板管理控制器（BMC）上設定網路。</block>
  <block id="75ae096871a25daf3dcd5da902c66ecf" category="inline-link">Lenovo ThinkSystem文件</block>
  <block id="0c112c89dd8c3ce2b92d5e4844ea4641" category="admonition">底板管理控制器（BMC）有時稱為服務處理器、是內建於各種伺服器平台的頻外管理功能的一般名稱、即使作業系統未安裝或無法存取、也能提供遠端存取。廠商通常會以自己的品牌行銷這項功能。例如、在Lenovo SR665上、BMC稱為_Lenovo XClarity Controller（XCC）_。</block>
  <block id="290a84841d7341364c4abf862a74583f" category="list-text">設定系統設定以獲得最大效能。</block>
  <block id="04c7f6322804081c61ca0d88cef85904" category="paragraph">您可以使用UEFI設定（先前稱為BIOS）或使用許多BMC提供的Redfish API來設定系統設定。系統設定會因做為檔案節點的伺服器機型而有所不同。</block>
  <block id="63b34e32fcac1724c46edd575672332b" category="paragraph">此時請勿在任何InfiniBand連接埠上設定IP。</block>
  <block id="e9074e57167186919a163cd099187dd0" category="admonition">雖然並非嚴格要求、但後續章節假設主機名稱會依序編號（例如H1-HN）、並提及應該在ODD或偶數主機上完成的工作。</block>
  <block id="0123fb5bcbcd68deb7c43ec913e70705" category="inline-link">如何註冊及訂閱RHEL系統</block>
  <block id="29f7e22c9a0b8d15ea802eee7a5e07cf" category="inline-link">如何限制更新</block>
  <block id="577885e812bad7e4780317a271722339" category="list-text">啟用包含高可用度所需套件的Red Hat儲存庫。</block>
  <block id="3c438be737391744e2fed6f73c418638" category="inline-link-macro">技術需求</block>
  <block id="febfb51b621938c49980eee52ab6a373" category="section-title">設定區塊節點</block>
  <block id="1dab115fdeed11b46ad9a32f690cfc8a" category="paragraph">設定每個控制器上的管理連接埠、以設定EF600區塊節點。</block>
  <block id="0631592349fc286da7627270b9c9b359" category="list-text">在每個EF600控制器上設定管理連接埠。</block>
  <block id="3f7c08d9f511dbd36a44bc681e25e3bf" category="inline-link">E系列文件中心</block>
  <block id="a1cdd0715dd7993c1664eea6d7f39810" category="list-text">（可選）設定每個系統的儲存陣列名稱。</block>
  <block id="561abcc4bd5f30a9d5ee1e4c64d9a10d" category="admonition">雖然並非嚴格要求、但後續主題會假設儲存陣列名稱會依序編號（例如C1 - CN）、並提及應該在ODD或偶數系統上完成的步驟。</block>
  <block id="1b6582c92d5f0e47bd102f2e16686662" category="summary">開始部署之前、請務必瞭解如何使用Ansible、使用第二代BeeGFS建置區塊設計、在NetApp上設定及部署BeeGFS解決方案。</block>
  <block id="91177a5a4b0c27f810e6deb9395eef4a" category="inline-link">NetApp E系列BeeGFS GitHub</block>
  <block id="2b030b2e370bebb88648070cda0b66eb" category="section-title">Ansible模組與角色</block>
  <block id="27633c2a48532dabf935531ba52193df" category="paragraph">NetApp E系列Ansible產品組合中的每個角色、都是完整的BeeGFS on NetApp解決方案端點對端部署。這些角色使用NetApp E系列SANtricity 的《Sf2、Host和BeeGFS》集合、可讓您使用HA（高可用度）來設定BeeGFS檔案系統。然後您可以配置及對應儲存設備、並確保叢集儲存設備已準備就緒可供使用。</block>
  <block id="ca467fdffa66288bc6eeca1d49467e2e" category="paragraph">雖然角色會提供深入的文件、但部署程序會說明如何使用第二代BeeGFS建置區塊設計來部署NetApp驗證架構。</block>
  <block id="e9b6dfb59ebbe3c2a8e47b9bec2ada24" category="section-title">BeeGFS HA叢集的庫存配置</block>
  <block id="927527f499c87b83ee052f9a293c0293" category="admonition">請勿使用本小節中的內容建立任何檔案、僅供範例使用。</block>
  <block id="a7a48a32496dcd14ea6f94f7d89ab599" category="paragraph">雖然此組態是根據組態設定檔預先決定的、但您應該大致瞭解如何將所有項目設定為「可執行」清單、如下所示：</block>
  <block id="9d92e1d6c46a5db6f99457758b8c71dc" category="paragraph">對於每項服務、會在「group _vars」下建立一個額外的檔案、說明其組態：</block>
  <block id="bab8955d49a06dc041f1cf99ae3c65aa" category="admonition">每項服務的BeeGFS數字和字串節點ID會根據群組名稱自動設定。因此、除了群組名稱必須是唯一的一般「可獨立」要求之外、代表BeeGFS服務的群組必須以該群組所代表之BeeGFS服務類型的唯一數字結尾。例如、中繼資料_01和stOR_01是允許的、但中繼資料_01和meta_01則不允許。</block>
  <block id="1d62eb925570a160f6a58cd18984f578" category="summary">BeeGFS解決方案包含根據驗證測試來調整效能和容量規模的建議。</block>
  <block id="137e4d3e0bc5586af6fc7ca9441511e1" category="doc">規模調整準則</block>
  <block id="6166a42aac4e50811124dbb35631ea78" category="paragraph">建置區塊架構的目標、是透過新增多個建置區塊來建立易於調整規模的解決方案、以符合特定BeeGFS系統的需求。根據以下準則、您可以預估BeeGFS建置區塊的數量和類型、以符合您環境的需求。</block>
  <block id="a752ca5f8ca9bd168c12fc180ff734e3" category="paragraph">請記住、這些預估是最佳的效能表現。綜合基準測試應用程式是以實際應用程式可能無法使用的方式來撰寫及使用、以最佳化基礎檔案系統的使用。</block>
  <block id="800f4a301937e5493aaaddfe77e10dd5" category="section-title">效能規模調整</block>
  <block id="6875300666b544ca98e406bd6ca73da1" category="paragraph">下表提供建議的效能規模調整。</block>
  <block id="83d4567aaaf81ff58ab394c3ad02accc" category="cell">組態設定檔</block>
  <block id="58a15ea9e5c981b498a5c119456b9dd9" category="cell">1MiB讀取</block>
  <block id="968dfca19c742301bc400a7c883b1594" category="cell">1MiB寫入</block>
  <block id="8cf5b688a1a209b630cab18001501c76" category="cell">中繼資料+儲存設備</block>
  <block id="5d44d1f7b753dee2968cad82eef2f1dd" category="cell">62GiBps</block>
  <block id="a5a649e4dec54d9f61f1cfc632dab412" category="cell">21GiBps</block>
  <block id="dfab8e8b566f2d091e7ecb4b4d65060b" category="cell">僅儲存設備</block>
  <block id="1d955116a3bafb864bcf6755485fce7e" category="cell">64GiBps</block>
  <block id="419cfc02b324dc7d8faefa90ed608fb0" category="inline-link">系統需求</block>
  <block id="e618e38f89f153e374a90674c51efb8f" category="paragraph">中繼資料容量規模預估是根據「經驗法則」、在BeeGFS中、500 GB的容量足以容納約1.5億個檔案。（如需詳細資訊、請參閱BeeGFS文件<block ref="d422b619831c270410797364c04b1fb2" category="inline-link-rx"></block>）</block>
  <block id="903cd75262aca9ec0b3a831bccc18869" category="paragraph">使用存取控制清單等功能、以及每個目錄的目錄和檔案數量、也會影響中繼資料空間的使用速度。儲存容量預估會考慮可用磁碟機容量、以及RAID 6和XFS負荷。</block>
  <block id="9490db12574d3954607c7e9d91d28809" category="section-title">中繼資料+儲存建置區塊的容量規模</block>
  <block id="015d2cd8138605f0cec20c9dffe04a93" category="paragraph">下表提供中繼資料與儲存建置區塊的建議容量規模調整。</block>
  <block id="b897bc1ea15940ab83faf02e07b143bf" category="cell">磁碟機大小（2+2 RAID 1）中繼資料Volume群組</block>
  <block id="fa4beb4be6de6614b0cd1460e8d33b1f" category="cell">中繼資料容量（檔案數）</block>
  <block id="070e4137f478af27755d228dba080d41" category="cell">磁碟機大小（8+2 RAID 6）儲存Volume群組</block>
  <block id="785d80cc95b60fc3365e05e3ae013331" category="cell">儲存容量（檔案內容）</block>
  <block id="be3ca1ec15ca4657e5ca3ec84a561090" category="cell">1.92TB</block>
  <block id="71839d6e6fb59e239ad941d08b5e2519" category="cell">3.84 TB</block>
  <block id="a98c228c0d8903ba6926546f64321cc4" category="cell">7.68TB</block>
  <block id="1f04a7c587f50d269f44d43229c966ac" category="cell">15.3TB</block>
  <block id="a966f153f6f429bbd39c3ac2390ef970" category="admonition">調整中繼資料加上儲存建置區塊規模時、您可以使用較小的磁碟機來進行中繼資料磁碟區群組、而非儲存磁碟區群組、藉此降低成本。</block>
  <block id="f9fb1e607e840d5610c34a9f15da540e" category="section-title">專為儲存設備建置區塊調整容量</block>
  <block id="cd9db38cfde636fa7c304f8e67d8708d" category="paragraph">下表針對純儲存建置區塊提供經驗法則容量規模調整。</block>
  <block id="4f7d0f08c61d0cc981b973ba853e2c6f" category="cell">59.89TB</block>
  <block id="22f3cf273453d70fdc724d513005c81d" category="cell">119.80TB</block>
  <block id="e4c2850d67996ecfe5e0b56e9637a470" category="cell">251.89TB</block>
  <block id="f7c8918f0c24047e89e5842785e7b8ef" category="cell">538.55TB</block>
  <block id="3cf8b9e44b7a1eb7154f2b777094e670" category="admonition">除非啟用全域檔案鎖定、否則在基礎（第一）建置區塊中納入管理服務的效能和容量負荷最小。</block>
  <block id="5b361b4897c4847c08b3d13bf3b66b8d" category="summary">在需要存取BeeGFS檔案系統的任何主機（例如運算或GPU節點）上安裝及設定BeeGFS用戶端。在這項工作中、您可以使用Ansible和BeeGFS集合。</block>
  <block id="c855016387ccd14e80b0628a2da5609b" category="paragraph">您必須在需要存取BeeGFS檔案系統的任何主機（例如運算或GPU節點）上安裝及設定BeeGFS用戶端。在這項工作中、您可以使用Ansible和BeeGFS集合。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步驟</block>
  <block id="f4bf34ee26e45437b7b34ee3858d3f39" category="list-text">如有需要、請從Ansible控制節點設定無密碼SSH、並將其設定為BeeGFS用戶端的每個主機：</block>
  <block id="c9793ac6c6a163b585094181979efe25" category="paragraph">「sh-copy -id &lt;user&gt;@&lt;hostname_or_ip&gt;'」</block>
  <block id="05c8acf59a637c421ef21a4a37d674de" category="list-text">在「host_vars/」下、為每個BeeGFS用戶端建立一個名為「.yml」的檔案、其中包含下列內容、並在預留位置文字中填入適合您環境的正確資訊：</block>
  <block id="ca6b4577e851d5587e19a3d017db68b1" category="list-text">建立新檔案「client_inventory.yml」、然後在頂端填入下列參數：</block>
  <block id="ec6e88f08b026e04d1ce5f5f31493b21" category="inline-link">使用Ansible Vault加密內容</block>
  <block id="d424a4948912165baf5c9641ad4de044" category="admonition">請勿以純文字儲存密碼。請改用Ansible Vault（請參閱的「Ansible」文件）<block ref="69d38d4b5deda302461f6461c5317006" category="inline-link-rx"></block>）或是在執行該教戰手冊時使用「Ask（隨叫隨到）」選項。</block>
  <block id="8f27eda73b5d4e7594b05bed1b90a053" category="list-text">在「client_inventory.yml」檔案中、在「beegfs_clients」群組中列出所有應設定為BeeGFS用戶端的主機、然後指定建置BeeGFS用戶端核心模組所需的任何其他組態。</block>
  <block id="42d868a1eb5776ce2eb9b95938bcc056" category="inline-link">RDMA支援</block>
  <block id="b9d3c4e1c18127cf36ad951b208d45bb" category="list-text">在「client_inventory.yml」檔案中、列出您要掛載在任何先前定義「vars」底部的BeeGFS檔案系統。</block>
  <block id="0ebb92016a1cd310802bb6e22bcd491c" category="admonition">「beegfs_client_config」代表已測試的設定。如需所有選項的完整概觀、請參閱netapp_eseries.beegfs`集合「beegfs_client」角色隨附的文件。這包括有關安裝多個BeeGFS檔案系統或多次安裝同一個BeeGFS檔案系統的詳細資料。</block>
  <block id="853c95fff114a0396695a5a34c4f78f1" category="list-text">建立新的「client_playbook .yml」檔案、然後填入下列參數：</block>
  <block id="8ae73b3fcef5fc8f1a73e62c987915e6" category="admonition">如果您已在適當的IPoIB介面上安裝必要的IB/RDMA驅動程式和設定的IP、請省略匯入「NetApp_Eseries.host」集合和「IPoIB」角色。</block>
  <block id="598ee1856218e19bf329d8bece215061" category="list-text">若要安裝及建置用戶端和Mount BeeGFS、請執行下列命令：</block>
  <block id="999070faf3729384137acf10348ed589" category="list-text">在您將BeeGFS檔案系統置於正式作業環境之前、我們*強烈*建議您登入任何用戶端、然後執行「beegfs-fs-fs-checksfs」、以確保所有節點都可連線、而且不會報告任何問題。</block>
  <block id="883ccbea6264c3d9c8ea56267b290a0a" category="summary">NetApp上BeeGFS的軟體組態包括BeeGFS網路元件、EF600區塊節點、BeeGFS檔案節點、資源群組和BeeGFS服務。</block>
  <block id="e366b0b441e75fcafac2db7ff979a799" category="doc">軟體組態</block>
  <block id="dea1b03288253149cb4c55f3c4f10e3e" category="section-title">BeeGFS網路組態</block>
  <block id="391f99769ce2b9374f0421ace7ce5ac5" category="paragraph">BeeGFS網路組態包含下列元件。</block>
  <block id="f05f92f283e258444df8e73ac9508c74" category="list-text">*浮動IP*浮動IP是一種虛擬IP位址、可動態路由傳送至同一個網路中的任何伺服器。多部伺服器可以擁有相同的浮動IP位址、但在任何指定時間、只能在一部伺服器上啟用。</block>
  <block id="76a7e91177d008d5a202ef507a9049d7" category="paragraph">每個BeeGFS伺服器服務都有自己的IP位址、可視BeeGFS伺服器服務的執行位置而在檔案節點之間移動。此浮動IP組態可讓每個服務獨立容錯移轉至其他檔案節點。用戶端只需知道特定BeeGFS服務的IP位址、就不需要知道目前執行該服務的檔案節點。</block>
  <block id="527f436644c629cc1f2330d74c5c29b4" category="list-text">* BeeGFS伺服器多重主頁組態*為了提高解決方案的密度、每個檔案節點都有多個儲存介面、其中IP設定在同一個IP子網路中。</block>
  <block id="5a19238d05fdcdb09e439e41a0a94349" category="paragraph">需要額外的組態、以確保此組態能與Linux網路堆疊正常運作、因為在預設情況下、如果某個介面的IP位在同一子網路中、則可在不同的介面上回應對該介面的要求。除了其他缺點、這種預設行為也使得無法正確建立或維護RDMA連線。</block>
  <block id="e7a28f6c997a9c0eba41eb574b5f829c" category="paragraph">Ansible型部署可處理反向路徑（RP）和位址解析傳輸協定（Arp）行為的強化、同時確保啟動和停止浮動IP；動態建立對應的IP路由和規則、讓多重主目錄網路組態正常運作。</block>
  <block id="12ec3f7db1a39d49d76e159a6fc9be24" category="paragraph">下圖顯示多個BeeGFS用戶端介面之間的流量平衡。</block>
  <block id="02eef1a6d9aefa452755edb315057e27" category="paragraph">由於BeeGFS中的每個檔案通常會跨越多個儲存服務進行等量分佈、因此多重軌道組態可讓用戶端達到比單一InfiniBand連接埠更高的處理量。例如、下列程式碼範例顯示通用的檔案分段組態、可讓用戶端在兩個介面之間平衡流量：</block>
  <block id="b28b500a27afaa858536ee53a4c02d91" category="section-title">EF600區塊節點組態</block>
  <block id="6e88eb560b5c117f0226888b924af1c5" category="paragraph">區塊節點由兩個主動/主動式RAID控制器組成、可共用存取同一組磁碟機。一般而言、每個控制器擁有系統上設定的一半磁碟區、但可視需要接管其他控制器。</block>
  <block id="674757e2095af366602187ca856f8ec4" category="paragraph">檔案節點上的多重路徑軟體可決定每個磁碟區的作用中最佳化路徑、並在纜線、介面卡或控制器故障時自動移至替代路徑。</block>
  <block id="458cd7cdbda7e7a38853eae8ce0e9662" category="paragraph">下圖顯示EF600區塊節點中的控制器配置。</block>
  <block id="b4adca73c8e2d619dedc4eb6a42bc966" category="paragraph">為了簡化共享磁碟HA解決方案、磁碟區會對應至兩個檔案節點、以便視需要彼此接管。下圖顯示如何設定BeeGFS服務和慣用磁碟區擁有權以達到最大效能的範例。每個BeeGFS服務左側的介面會指出用戶端和其他服務用來與其聯絡的偏好介面。</block>
  <block id="d1bff1512ad9e19d6469659f6a916a7e" category="paragraph">在前一個範例中、用戶端和伺服器服務偏好使用介面i1b與儲存服務1通訊。儲存服務1使用介面i1a做為首選路徑、以便在第一個區塊節點的控制器A上與其磁碟區（儲存設備_tgt_101、102）進行通訊。此組態可利用InfiniBand介面卡可用的全雙向PCIe頻寬、並從雙埠的HDRInfiniBand介面卡獲得比PCIe 4.0更好的效能。</block>
  <block id="f4fa0385d373373f4ab191231ead5909" category="section-title">BeeGFS檔案節點組態</block>
  <block id="5e2d5eb9f991b81a298fb57212c715fe" category="paragraph">BeeGFS檔案節點已設定為高可用度（HA）叢集、以便在多個檔案節點之間進行BeeGFS服務的容錯移轉。</block>
  <block id="f409d0a0c329860646597bbcc45fcc4b" category="inline-link">適用於高可用度附加元件的Red Hat訓練</block>
  <block id="79b70ba13b6d273b53c66d816a15830d" category="paragraph">NetApp撰寫並擴充數個開放式叢集架構（OCF）資源代理程式、讓叢集能夠智慧地啟動及監控BeeGFS資源。</block>
  <block id="ff07f4dbc22a6f0ecb4a11bfb6136d40" category="section-title">BeeGFS HA叢集</block>
  <block id="7a189557128751d94f2d8bca38ccf462" category="paragraph">一般而言、當您啟動BeeGFS服務（無論是否有HA）時、必須有幾個資源：</block>
  <block id="3f1f71800ded6b59769a66de67dd7d86" category="list-text">可連線服務的IP位址、通常由Network Manager設定。</block>
  <block id="03eb5c90128e244e904f61d22569b4af" category="list-text">作為BeeGFS儲存資料目標的基礎檔案系統。</block>
  <block id="510de0f837e4aacf9e6eb3c08926bcff" category="paragraph">這些通常是在/etc/stab'中定義的、並由systemd掛載。</block>
  <block id="49990dbe44b62019deed5be9f5c437a3" category="list-text">負責在其他資源準備就緒時啟動BeeGFS的系統服務。</block>
  <block id="4f26c3922778ca3d5247b1281f6843af" category="paragraph">如果沒有其他軟體、這些資源只會在單一檔案節點上啟動。因此、如果檔案節點離線、則無法存取BeeGFS檔案系統的一部分。</block>
  <block id="c60a1b018b03670c1a1a93baf9da5d45" category="paragraph">由於多個節點可以啟動每個BeeGFS服務、因此心臟起搏器必須確保每個服務和相依資源一次只能在一個節點上執行。例如、如果兩個節點嘗試啟動相同的BeeGFS服務、則如果兩個節點都嘗試寫入基礎目標上的相同檔案、就會有資料毀損的風險。為了避免這種情況、心臟起搏器必須仰賴電暈器同步、才能在所有節點之間可靠地保持整體叢集的狀態同步、並建立仲裁。</block>
  <block id="a96d4ad8c651d8ff21de193227e20f4d" category="paragraph">如果叢集發生故障、心臟起搏器會在另一個節點上反應並重新啟動BeeGFS資源。在某些情況下、心臟起搏器可能無法與原始故障節點通訊、以確認資源已停止。若要在重新啟動BeeGFS資源之前驗證節點是否已關閉、請先移除電源、使心臟起搏器從故障節點上關閉。</block>
  <block id="ad22605bb834d1c650f3b2f1e5c76401" category="paragraph">許多開放原始碼的屏障代理程式可讓心臟起搏器使用電力分配單元（PDU）或伺服器基板管理控制器（BMC）搭配API（例如RedfISH）來隔離節點。</block>
  <block id="05273fb3cfbaf5190eee8cfc0c3e0597" category="paragraph">當BeeGFS在HA叢集中執行時、所有BeeGFS服務和基礎資源都是由資源群組中的心臟起搏器管理。每個BeeGFS服務及其所依賴的資源都會設定成資源群組、以確保資源以正確的順序啟動和停止、並配置在同一個節點上。</block>
  <block id="de25b213ff1f6f931a4d9c0f59bbed69" category="paragraph">對於每個BeeGFS資源群組、心臟起搏器都會執行自訂BeeGFS監控資源、負責偵測故障情況、並在特定節點上無法存取BeeGFS服務時、以智慧方式觸發容錯移轉。</block>
  <block id="e33abb1ba19f563eaa662796e8b3021b" category="paragraph">下圖顯示由心臟起搏器控制的BeeGFS服務和相依性。</block>
  <block id="5346cef6f7de3aac02ebdfc1ae9b6f27" category="inline-link">多重模式的BeeGFS文件</block>
  <block id="c4ae8913dc1f6c9fed7961516b16defd" category="admonition">為了在同一個節點上啟動多個相同類型的BeeGFS服務、心臟起搏器已設定為使用多重模式組態方法來啟動BeeGFS服務。如需詳細資訊、請參閱<block ref="bc179f675bb7a303402ecb902ab09448" category="inline-link-rx"></block>。</block>
  <block id="553c30108a127bc2c66537e58970be9e" category="paragraph">由於BeeGFS服務必須能夠在多個節點上啟動、因此每項服務的組態檔（通常位於「/etc/beegfs」）會儲存在其中一個E系列磁碟區上、作為該服務的BeeGFS目標。如此一來、可能需要執行服務的所有節點都能存取特定BeeGFS服務的組態和資料。</block>
  <block id="39f54b8b12af6ae0edd74b4db43d9959" category="summary">NetApp上BeeGFS的硬體組態包括檔案節點和網路纜線。</block>
  <block id="a80f40a4cf172e4461c613d2afc0bade" category="doc">硬體組態</block>
  <block id="a6f76304e97d4b2df31a130d24073f88" category="section-title">檔案節點組態</block>
  <block id="8e9473694bc8ee293e1f6c4f730ab4ed" category="paragraph">檔案節點有兩個CPU插槽、設定為獨立的NUMA區域、包括本機存取相同數量的PCIe插槽和記憶體。</block>
  <block id="81fb4a697d99bad44c068f68db513e26" category="paragraph">InfiniBand介面卡必須安裝在適當的PCI擴充卡或插槽中、因此工作負載必須在可用的PCIe線道和記憶體通道之間取得平衡。您可以將個別BeeGFS服務的工作完全隔離到特定NUMA節點、藉此平衡工作負載。目標是從每個檔案節點取得類似的效能、就像是兩個獨立的單一插槽伺服器一樣。</block>
  <block id="26dc1928abfabc3027cfa2e4f0b2f57f" category="paragraph">下圖顯示檔案節點NUMA組態。</block>
  <block id="cc560c8656cb52d0c2376a0dbb2ac436" category="paragraph">BeeGFS程序會固定在特定的NUMA區域、以確保所使用的介面位於相同的區域。此組態可避免透過插槽間連線進行遠端存取。插槽之間的連線有時稱為QPI或GMI2連結、即使是在現代化的處理器架構中、也可能是使用高速度網路（例如HDRInfiniBand）時的瓶頸。</block>
  <block id="037505dd545df2577c95982dd52a9497" category="section-title">網路纜線組態</block>
  <block id="2efc6e5efcfc3424383b80badbc6f2f8" category="paragraph">在建置區塊中、每個檔案節點都會使用總共四個備援InfiniBand連線、連接至兩個區塊節點。此外、每個檔案節點都有四個與InfiniBand儲存網路的備援連線。</block>
  <block id="c2b0d4abc479963299ef11f7007b04d9" category="paragraph">在下圖中、請注意：</block>
  <block id="ccebd32ee2768501ecf2042e521d090c" category="list-text">所有以綠色顯示的檔案節點連接埠均用於連接至儲存架構；所有其他的檔案節點連接埠則是直接連接至區塊節點。</block>
  <block id="01be869a64586dc6df5d40be148742a7" category="list-text">特定NUMA區域中的兩個InfiniBand連接埠會連接到同一個區塊節點的A和B控制器。</block>
  <block id="92d102b77ed7526653d6ed77bc5f9297" category="list-text">NUMA節點0中的連接埠一律連線至第一個區塊節點。</block>
  <block id="41d34f3f75f0a6f23825fec8c1f6b167" category="list-text">NUMA節點1中的連接埠會連線至第二個區塊節點。</block>
  <block id="1109e0767ef0b323f02f85cdaa9a589d" category="paragraph">圖中所示的佈線組態可讓每個BeeGFS服務：</block>
  <block id="12e9ec8c0cb3aa87bfb400a73712d79b" category="list-text">無論執行BeeGFS服務的檔案節點為何、都可在相同的NUMA區域中執行。</block>
  <block id="488f6220ee8bab2e1e3621f7f99b598c" category="list-text">無論故障發生在何處、都要有次要的最佳路徑可通往前端儲存網路和後端區塊節點。</block>
  <block id="e2ae85c4e917fafc3b545710dcc3fdf1" category="list-text">如果區塊節點中的檔案節點或控制器需要維護、請將效能影響降至最低。</block>
  <block id="33f3e0c9879fd051eb380c62267a24cf" category="paragraph">下圖顯示用於充分運用PCIe雙向頻寬的纜線設計。</block>
  <block id="1a72dacfce92d062255a929bbb18fc8d" category="paragraph">對於每個BeeGFS服務、請使用相同的介面卡、將用戶端流量所使用的慣用連接埠、與服務磁碟區的主要擁有者區塊節點控制器路徑連線。如需詳細資訊、請參閱 <block ref="1ce6299bc86692b3e97783bdba904848" category="inline-link-macro-rx"></block>。</block>
  <block id="0dfb05d4ea761122194fbafcd7f3a5eb" category="summary">NetApp解決方案BeeGFS的第二代設計已使用三種建置區塊組態設定檔進行驗證。</block>
  <block id="57448c4b7cf64af279b612502ae49c08" category="doc">設計驗證</block>
  <block id="dd444e75087c1912fb6b2f9435eec0ba" category="paragraph">組態設定檔包括下列項目：</block>
  <block id="ba33770125b7249843843e3524e48e5e" category="list-text">單一基礎建置區塊、包括BeeGFS管理、中繼資料和儲存服務。</block>
  <block id="dc0ae690014a6e4ed1d17d728fce2e3a" category="list-text">BeeGFS中繼資料加上儲存建置區塊。</block>
  <block id="f789cf74ad54c463cf1827c970b695c0" category="list-text">BeeGFS純儲存建置區塊。</block>
  <block id="f27d4d7620b1158ad830c498a6faf1c5" category="paragraph">下圖顯示用於驗證NetApp解決方案BeeGFS的BeeGFS組態。</block>
  <block id="dfa0c76fc554fa6837cfe216381eb3df" category="section-title">BeeGFS檔案分段</block>
  <block id="73bf7a09a102bdf9e2984ff15f2e62cc" category="paragraph">平行檔案系統的一項優點是能夠跨越多個儲存目標、將個別檔案等量磁碟區、這可能代表相同或不同基礎儲存系統上的磁碟區。</block>
  <block id="f781a67c7f55c5a3d6d505e3569ff3c3" category="inline-link">分段</block>
  <block id="0102b96fad09ea07b9b6c943ac48e706" category="inline-link">分段API</block>
  <block id="be4c29766b20870006df2b27be87994e" category="paragraph">在BeeGFS中、您可以根據每個目錄和每個檔案來設定分段、以控制用於每個檔案的目標數量、並控制用於每個檔案分段的chunksize（或區塊大小）。此組態可讓檔案系統支援不同類型的工作負載和I/O設定檔、而不需要重新設定或重新啟動服務。您可以使用「beegfs-CTL」命令列工具或使用分段API的應用程式來套用等量磁碟區設定。如需詳細資訊、請參閱的BeeGFS文件<block ref="d307c57bb94d8613bf23053de378d367" category="inline-link-rx"></block> 和<block ref="d53017212bcf8a78d44d2efbf061a88a" category="inline-link-rx"></block>。</block>
  <block id="706c7a765e77b694cee17941887ccaaf" category="paragraph">為了達到最佳效能、在整個測試過程中都會調整等量磁碟區模式、並記錄每項測試所使用的參數。</block>
  <block id="a40727fe75676638a1b87009fafed260" category="section-title">IOR頻寬測試：多個用戶端</block>
  <block id="a4c77786e4208d299fbf0c491eb99106" category="inline-link">HPC GitHub</block>
  <block id="8b2e6032c8801b379e2fd75991ebb452" category="paragraph">IOR頻寬測試使用OpenMPI來執行綜合I/O產生器工具IOR的平行工作（可從以下網站取得<block ref="323e2ec03a214c41088a20e514e0a41e" category="inline-link-rx"></block>）跨所有10個用戶端節點、移至一或多個BeeGFS建置區塊。除非另有說明：</block>
  <block id="219cae8db1869355f9c480a2fe2c5d6d" category="list-text">所有測試均使用直接I/O、傳輸大小為1MiB。</block>
  <block id="de2223ae9c343f387e4a3549abf2a4fc" category="list-text">BeeGFS檔案分段設定為1MB chunksize、每個檔案一個目標。</block>
  <block id="8aa2f9ce00cbab54a4479ba40f638773" category="paragraph">下列參數用於IOR、區段數經過調整、可將一個建置區塊的Aggregate檔案大小維持在5TiB、三個建置區塊的區段數維持在40TiB。</block>
  <block id="a404b853baec85523834a070479317ea" category="paragraph">下圖顯示單一BeeGFS基礎（管理、中繼資料和儲存）建置區塊的IOR測試結果。</block>
  <block id="578da280bb783045852047cd081f65fd" category="paragraph">下圖顯示單一BeeGFS中繼資料+儲存建置區塊的IOR測試結果。</block>
  <block id="720f0ab0184643d51a1197789875c393" category="paragraph">下圖顯示單一BeeGFS純儲存建置區塊的IOR測試結果。</block>
  <block id="e3b081c19738d20e5f52be67ac8d0361" category="paragraph">下圖顯示使用三個BeeGFS建置區塊的IOR測試結果。</block>
  <block id="9abc8771b8098ae505a1ff386b580ef3" category="paragraph">如預期、基礎建置區塊與後續中繼資料+儲存建置區塊之間的效能差異可忽略不計。比較中繼資料+儲存建置區塊與純儲存建置區塊、可看出讀取效能略有提升、因為使用額外的磁碟機做為儲存目標。不過、寫入效能並無顯著差異。若要達到更高的效能、您可以將多個建置區塊一起新增、以線性方式擴充效能。</block>
  <block id="7465e2f5afc6bc7ebff6ea05e19d52d3" category="section-title">IOR頻寬測試：單一用戶端</block>
  <block id="4cb463d8f88ac93de9fecb82d125d05c" category="paragraph">IOR頻寬測試使用OpenMPI、使用單一高效能GPU伺服器執行多個IOR程序、以探索單一用戶端所能達到的效能。</block>
  <block id="6a2583bcd41d0a03702444d541162685" category="paragraph">此測試也會比較BeeGFS在用戶端設定為使用Linux核心分頁快取（「tuneFileCacheType = Native」）時的重新讀取行為和效能、以及預設的「緩衝」設定。</block>
  <block id="0123881fd1c799161bf0cc847d402a42" category="paragraph">原生快取模式會使用用戶端上的Linux核心分頁快取、讓重新讀取作業從本機記憶體產生、而非透過網路重新傳輸。</block>
  <block id="2748a8672e1df7ff75dc04c3e0086a44" category="paragraph">下圖顯示使用三個BeeGFS建置區塊和單一用戶端的IOR測試結果。</block>
  <block id="2e301b61d3683cc584633009bafffa70" category="admonition">這些測試的BeeGFS分段設定為1MB chunksize、每個檔案有八個目標。</block>
  <block id="8c5eae70f19670232111d1823b5edb56" category="paragraph">雖然使用預設的緩衝模式時、寫入和初始讀取效能較高、但對於重讀相同資料多次的工作負載、原生快取模式可大幅提升效能。這項改善的重新讀取效能對於深度學習等工作負載來說非常重要、因為深度學習會在許多時期重讀相同的資料集多次。</block>
  <block id="e9f3e979fd823256ea73296f49e954da" category="section-title">中繼資料效能測試</block>
  <block id="e3195dd21dbd9ee2c6c42f0c8a6c7128" category="paragraph">中繼資料效能測試使用MDTest工具（包含在IOR中）來測量BeeGFS的中繼資料效能。測試使用OpenMPI在所有十個用戶端節點上執行平行工作。</block>
  <block id="44ece23db4ca31ae5b81205ad387af00" category="paragraph">下列參數用於執行基準測試、其處理程序總數從10個增加到320個、步驟2個、檔案大小為4K。</block>
  <block id="b872c01a040702b121dc5f52261e99e0" category="paragraph">中繼資料效能是先以一到兩個中繼資料+儲存建置區塊來測量、藉由新增額外的建置區塊來顯示效能如何擴充。</block>
  <block id="c6c65b36c5c466822447bc4c94abd80c" category="paragraph">下圖顯示含有一個BeeGFS中繼資料+儲存建置區塊的MDTest結果。</block>
  <block id="5d4514dbb64a843f08caa7fe8140c121" category="paragraph">下圖顯示含有兩個BeeGFS中繼資料+儲存建置區塊的MDTest結果。</block>
  <block id="6bcc55d27d7ea16e6df55e7ec18fd377" category="section-title">功能驗證</block>
  <block id="b15005270887e63f3c777c3722631021" category="paragraph">在驗證此架構時、NetApp執行了數項功能測試、包括：</block>
  <block id="008151af32cff92eed6431ca4cf43500" category="list-text">停用交換器連接埠、使單一用戶端InfiniBand連接埠故障。</block>
  <block id="73b83d70be21d004da6e079b00bb5948" category="list-text">停用交換器連接埠、使單一伺服器InfiniBand連接埠故障。</block>
  <block id="f7b8ad51ce1aad4a6e15c6583fcbdd55" category="list-text">使用BMC觸發立即關閉伺服器電源。</block>
  <block id="6148d6995d77c1b8b1bfd4c6f299162b" category="list-text">將節點正常置於待命狀態、並將故障切換服務移轉至其他節點。</block>
  <block id="1cc77e3527f4ac004c8a5cdb5cac049e" category="list-text">正常地將節點重新連線、並將服務容錯回復至原始節點。</block>
  <block id="908463015e2671e9d90b06353dabae03" category="list-text">使用PDU關閉其中一個InfiniBand交換器。所有測試都是在壓力測試進行期間執行、並在BeeGFS用戶端上設定「SysSessionChecksEnabled:假」參數。未發現I/O錯誤或中斷。</block>
  <block id="c49182dc0c7a70b9cd2e10853d9ec6c7" category="inline-link">Changelog</block>
  <block id="788a9659515e495b379621cac9040872" category="admonition">有已知問題（請參閱<block ref="9892b1a82a523d642c4ee2c76b765b8b" category="inline-link-rx"></block>）當BeeGFS用戶端/伺服器RDMA連線意外中斷時、可能是因為主要介面遺失（如「connInterfacesFile」中所定義）、或是BeeGFS伺服器故障；作用中用戶端I/O在恢復前最多可掛斷10分鐘。若BeeGFS節點在規劃維護時正常放置在待命或使用TCP、則不會發生此問題。</block>
  <block id="7c6326491c77a63417df94790ba07083" category="inline-link">NVIDIA DGX超級POD與NetApp合作</block>
  <block id="2bf773d42bef6909b232e854a16b3ec1" category="summary">設定起搏器和電暈器同步、使其可擴充至超過五個建置區塊。</block>
  <block id="22892d2f5bfdfba001a02572258cca62" category="doc">擴充至五個建置區塊以外</block>
  <block id="cfd24c157d6cd9f200eb8c3cf68ee7ed" category="paragraph">您可以設定起搏器和電暈器同步、使其擴充至超過五個建置區塊（10個檔案節點）。不過、較大型的叢集也有缺點、因此心律調整器和電暈器同步最終會強制使用最多32個節點。</block>
  <block id="9e59383f4d4ca677923852ae81323178" category="paragraph">NetApp僅針對最多10個節點測試BeeGFS HA叢集、不建議或不支援擴充超過此限制的個別叢集。然而、BeeGFS檔案系統仍需擴充至超過10個節點、而NetApp已在NetApp的BeeGFS解決方案中納入此考量。</block>
  <block id="72799e21cef92db3ad98f7c0a923e398" category="paragraph">透過部署多個HA叢集、其中包含每個檔案系統中的一部分建置區塊、您可以獨立擴充整個BeeGFS檔案系統、使基礎HA叢集機制不受任何建議或硬限制。在此案例中、請執行下列動作：</block>
  <block id="5c3bc488def3e9ba17589e3a75fdd5c0" category="list-text">建立代表其他HA叢集的新Ansible庫存、然後省略設定其他管理服務。相反地、將每個額外叢集「ha_cluster.yml」中的「beegfs_ha_mgmtd_浮 點_ip」變數指向第一個BeeGFS管理服務的IP。</block>
  <block id="321f3f6b80bc5f9c02e358e120fa74b0" category="list-text">將其他HA叢集新增至同一個檔案系統時、請確定下列事項：</block>
  <block id="32e66ce3c599bce3fc21c5a5943b6f4d" category="list-text">BeeGFS節點ID是唯一的。</block>
  <block id="50b9a2f3bd2dc22b582e6e66d12bf0ff" category="list-text">與「group vars」下的每個服務對應的檔案名稱、在所有叢集中都是唯一的。</block>
  <block id="6219a68f7552d8328f7fc5df8510ffc3" category="list-text">BeeGFS用戶端和伺服器IP位址在所有叢集之間都是唯一的。</block>
  <block id="16d3c50a6b84c7701cadfdf721b74007" category="list-text">第一個包含BeeGFS管理服務的HA叢集正在執行、然後才嘗試部署或更新其他叢集。</block>
  <block id="6f94cb93f82c2013e179dc630a5dd715" category="list-text">在各自的目錄樹狀結構中分別維護每個HA叢集的庫存。</block>
  <block id="079e1a9e099799d390c677577618ecce" category="paragraph">嘗試在一個目錄樹狀結構中混合多個叢集的詳細目錄檔案、可能會導致BeeGFS HA角色如何將套用至特定叢集的組態集合在一起時發生問題。</block>
  <block id="f4250b17c613a290cad4edf8e2bab3fd" category="admonition">在建立新的HA叢集之前、不需要將每個HA叢集擴充至五個建置區塊。在許多情況下、每個叢集使用較少的建置區塊、更容易管理。一種方法是將每個機架中的建置區塊設定為HA叢集。</block>
  <block id="d1da0cd6852302b521f35aeee065f5ea" category="summary">在NetApp解決方案上部署BeeGFS時、請遵循最佳實務準則。</block>
  <block id="38b622e4d5c9d918330c81663f61a4e3" category="doc">檢視最佳實務做法</block>
  <block id="d780de93793370946b2449b88a29b5ea" category="section-title">標準慣例</block>
  <block id="b4d19c971bd6ad93985147c0ce9477c8" category="list-text">檔案節點主機名稱會依序編號（H01-HN）、機架頂端的數字較低、底部的數字較高。</block>
  <block id="7bf4bcec78c083e165c31432234ebef8" category="list-text">每個區塊節點都由兩個儲存控制器組成、每個控制器都有自己的主機名稱。</block>
  <block id="1d6d5c920cb7d130fd45d8ced35ebec2" category="paragraph">儲存陣列名稱是指可Ansible庫存中的整個區塊儲存系統。儲存陣列名稱應依序編號（A01-A）、個別控制器的主機名稱則衍生自該命名慣例。</block>
  <block id="a902add826ee667d7f067acb8b49432f" category="list-text">同一個建置區塊內的檔案和區塊節點共用相同的編號配置、並在機架中彼此相鄰、兩個檔案節點位於頂端、兩個區塊節點位於其正下方。</block>
  <block id="2761f73c104511b8aaeef2eb6c84f3d3" category="paragraph">例如、在第一個建置區塊中、檔案節點H01和h02都直接連接至區塊節點A01和A02。從上到下、主機名稱為H01、h02、A01和A02。</block>
  <block id="33324ee77729f51ada2c5446c9c21488" category="list-text">建置區塊會根據主機名稱以連續順序安裝、因此編號較低的主機名稱位於機架頂端、編號較高的主機名稱位於底部。</block>
  <block id="afdf73d1fa37280d63c602fa6be27740" category="paragraph">其目的是將連接至機架交換器頂端的纜線長度降至最低、並定義標準部署實務做法、以簡化疑難排解。如果資料中心因為擔心機架穩定性而不允許使用此功能、則肯定會允許使用相反的功能、從底部向上填入機架。</block>
  <block id="b4c0fb3649e4f85d78611d90d2d2d308" category="section-title">InfiniBand儲存網路組態</block>
  <block id="815b2630d684df2f4894bd753d3a1fcb" category="paragraph">每個檔案節點上的一半InfiniBand連接埠、用於直接連線至區塊節點。另一半連接至InfiniBand交換器、用於BeeGFS用戶端與伺服器的連線。在判斷用於BeeGFS用戶端和伺服器的IPoIB子網路大小時、您必須考量運算/GPU叢集和BeeGFS檔案系統的預期成長。如果您必須偏離建議的IP範圍、請記住、單一建置區塊中的每個直接連線都有獨特的子網路、而且不會與用於用戶端與伺服器連線的子網路重疊。</block>
  <block id="a4f2d907e6fd183bbbc4d275c08b7a9a" category="section-title">直接連線</block>
  <block id="07a0544547e3cceec6f669bd25c6a605" category="paragraph">每個建置區塊內的檔案和區塊節點、一律使用下表中的IP進行直接連線。</block>
  <block id="d9938c4beed355ac7387d03d8f191c9e" category="admonition">此定址方案遵循下列規則：第三個八位元組永遠是不規則的、甚至是不規則的、這取決於檔案節點是不規則的或是偶數的。</block>
  <block id="b55e37e80a68661366be8c4377b13489" category="cell">檔案節點</block>
  <block id="90c8d508b315842cddaf605e8e068d6f" category="cell">IB連接埠</block>
  <block id="75ba8d70e3692ba200f0e0df37b4d2ae" category="cell">IP 位址</block>
  <block id="d7f9ab96aecba4fb98ecf8831eb0a462" category="cell">區塊節點</block>
  <block id="b9549a36d11b47e2d2f9389f6363ff8e" category="cell">實體IP</block>
  <block id="0d01a155a448abaa8ab4b0bdd3ea5e54" category="cell">虛擬IP</block>
  <block id="e9813c434db44aa063e37598de3ed515" category="cell">ODD（上一）</block>
  <block id="9d928738606162dca1d244ffcbdf0036" category="cell">i1a.</block>
  <block id="8f337c973339dd7093883bd28ddb6588" category="cell">192.168.1.10</block>
  <block id="495cb471115cc2dbd5c60736f989aa8c" category="cell">ODD（C1）</block>
  <block id="e36314e624d2b2ca257e1f1ecb381f93" category="cell">2A.</block>
  <block id="d984a05fa268b7cc6ac052a38960aeb2" category="cell">192.168.1.100</block>
  <block id="80f8cac1e092ca14301921951cf77f91" category="cell">192.168.1.101</block>
  <block id="c7a617044afee64ec7d511879e8b194c" category="cell">I2A</block>
  <block id="d731a116ccfe40ce4a5adb1bf565d785" category="cell">192.168.1.10</block>
  <block id="a9aeb028763672267b98adb1e61f06ca" category="cell">192.168.3.100</block>
  <block id="868e778e153cfafee02c89678e31e3e4" category="cell">192.168.3.101</block>
  <block id="b723decd732b31d828ae939f8f8c81fb" category="cell">i3a</block>
  <block id="28013a9391888f81944ead3ec1401cb0" category="cell">192.168.5.10</block>
  <block id="cfb1a9d899157fd3919c08dceff7fe61" category="cell">偶數（C2）</block>
  <block id="8945c747c6a4da714083579891b2495a" category="cell">192.168.5.100</block>
  <block id="538f8a364ff4308c16dbf7a80a554b5f" category="cell">192.168.5.101</block>
  <block id="d4d9efce9a26c8551723c677f65e1284" category="cell">i4a.</block>
  <block id="7e7269d72492d715bbd00efdcdec7e0a" category="cell">192.168.1.10</block>
  <block id="1fbf861a0f4d9494682cfff33756b7aa" category="cell">192.168.1.100</block>
  <block id="7a1a4e2ee2757f302d47c7e3cdc8fcc3" category="cell">192.168.1.101</block>
  <block id="1442135832b351ed9b2f3b91f2393ec7" category="cell">偶數（下半年）</block>
  <block id="0522334c503ae8e87d77104f7b27ba17" category="cell">192.168.1.10</block>
  <block id="f8bc2fbe2c937ea5b5e8839cbea69491" category="cell">2B</block>
  <block id="28de33b5199547c2f026595b7175a940" category="cell">192．168．2．100</block>
  <block id="d006845bf7fd39e054131ca6f76c2c47" category="cell">192．168．2．101</block>
  <block id="3a1cc00317003b20386d92ca13328e3d" category="cell">192．168．4．10</block>
  <block id="ccce62893693ca1e63992fa77159dce3" category="cell">24.100</block>
  <block id="eab39d2ba2b7a903ccf8cef112e1d506" category="cell">24.101</block>
  <block id="02def76181eddeab3ec0492be002417d" category="cell">地址：192．168．6．10</block>
  <block id="d4b42e0f0d80e9c910e062f49b48b5f5" category="cell">6.100</block>
  <block id="f23edf799227dfd20d80544836aad8e9" category="cell">6.101</block>
  <block id="5e0ca78bea1b6ed4af93b1b1c5d7c573" category="cell">192．168．8．10</block>
  <block id="3581177979a7b934a2accd3f5f999444" category="cell">192．168．8．100</block>
  <block id="49213c8f0e8758438d7a69e2789a8b7d" category="cell">192．168．8．101</block>
  <block id="5e98efce8292b94590f3ca502c1d8697" category="paragraph">每個檔案節點都會執行多個BeeGFS伺服器服務（管理、中繼資料或儲存設備）。為了讓每項服務獨立容錯移轉至其他檔案節點、每項服務都會設定獨特的IP位址、以便在兩個節點之間浮動（有時稱為邏輯介面或LIF）。</block>
  <block id="4db8c0036deb36a38e4df4660af9ed06" category="paragraph">此部署雖然並非必要、但會假設這些連線使用下列IPoIB子網路範圍、並定義套用下列規則的標準定址方案：</block>
  <block id="8d41eefa8441a4ca177fe0f2676a9512" category="list-text">第二個八位元組永遠是不符合或甚至不符合、取決於檔案節點InfiniBand連接埠是ODD或偶數。</block>
  <block id="6482f8ef9c5ff1d8a971601fcad837d6" category="list-text">BeeGFS叢集IP永遠是「xxx」。127.100.yyy'或'xxx.xxx.128.100.y'。</block>
  <block id="3aed58e1cc4af0e5cda8b7e10e2fd863" category="admonition">除了用於頻內作業系統管理的介面、電暈同步還能使用其他介面來進行叢集心律跳轉和同步。如此可確保單一介面遺失不會導致整個叢集中斷運作。</block>
  <block id="d95a2f19c705379e32f8030de274d07e" category="list-text">BeeGFS管理服務永遠是「xxx.xxx.Y.101.0」或「xxx.xxx.Y.102.0」。</block>
  <block id="29cd1587ba2833db9af29eac16f0d72b" category="list-text">BeeGFS中繼資料服務一律位於「xxx.yyy.101.zzz」或「xxx.xxx.y.102.zzz」。</block>
  <block id="be092b10130fe0c97dd9358f0c131935" category="list-text">範圍從「100.xxx.1.1」到「100.xxx.99.255」的位址會保留給用戶端。</block>
  <block id="3ac8c958d4c77187295fd53646229e9e" category="paragraph">下表提供子網路A的範圍：100127.0.0/16。</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="8433249cf732856c8ef7700f591da923" category="cell">InfiniBand連接埠</block>
  <block id="5c43713485260d7759e7710e65d5b181" category="cell">IP位址或範圍</block>
  <block id="32e90ecbd165097494e967a23490ee41" category="cell">BeeGFS叢集IP</block>
  <block id="16bfa5161249dae15f8c441a34126387" category="cell">i1b</block>
  <block id="fcb936b16dcf3c23dec73fa21c9c16f1" category="cell">100127.100.1 - 100127.1005.255</block>
  <block id="ae709a18a45df821c97f171d87abda05" category="cell">BeeGFS管理</block>
  <block id="ca46d9d01d96136b3bd1dea0bce8b99f" category="cell">100127.101.0</block>
  <block id="c7725fe17ccf0fe6dfa72467bca22d07" category="cell">BeeGFS中繼資料</block>
  <block id="2aaea2be17c5c489bc5ec00da30f01e0" category="cell">i1b或i3b</block>
  <block id="5474dd17966e980dee3133c4fdddcf29" category="cell">100127.101.1 - 100127.101.255</block>
  <block id="d01488abddf6343d229f4a687a740a9d" category="cell">BeeGFS儲存設備</block>
  <block id="43c64dcbdc9c36edb0a78b932e87b96c" category="cell">100127.103.1 - 100127.103.255</block>
  <block id="7b0215ed75674e2bc6f9d23b5db3a59a" category="cell">BeeGFS用戶端</block>
  <block id="12ad67de237d3ee3ee2ca3ed39a93826" category="cell">（因用戶端而異）</block>
  <block id="88bd43ac89ad7875c3db7323b9879d13" category="cell">100127.1.1 - 100127.99.255</block>
  <block id="00ee8ecc0f95892eb58786ee6e94e4e7" category="paragraph">下表提供子網路B的範圍：100128.0.0/16。</block>
  <block id="42e7db8b69b0d0451fe5e7e94d271956" category="cell">i4b.</block>
  <block id="672e53647fb3fbb550b46ac1eaaad363" category="cell">100128.100.1 - 100128.1005.255</block>
  <block id="50641838fba9970d18ab721f2d775331" category="cell">i2b</block>
  <block id="6240652cf0cb3a0056e31569edba6f3e" category="cell">100128.102.0</block>
  <block id="6bbae520cb1416f9508d58010c4df4a0" category="cell">i2b或i4b</block>
  <block id="3ac8689fd677355ec3c1098b78d717dd" category="cell">100128.102.1 - 100128.102.255</block>
  <block id="61b0ff8b431abb2cad4481cab938c338" category="cell">100128.104.1 - 100128.104.255</block>
  <block id="83dc7e1fb9aa3660d2fc0ccb6e72bd1a" category="cell">100128.1.1 - 100128.99.255</block>
  <block id="cd42d4848d52f3ad668601f29b839282" category="admonition">並非上述範圍內的所有IP都用於此NetApp認證架構。它們示範如何預先配置IP位址、以便使用一致的IP定址方案輕鬆擴充檔案系統。在此方案中、BeeGFS檔案節點和服務ID對應於已知IP範圍的第四個八位元組。如果需要、檔案系統當然可以擴充至超過255個節點或服務。</block>
  <block id="ce0a47ccdc84e9c90b9185aea530a07b" category="summary">需要特定設備、纜線和組態來支援BeeGFS on NetApp解決方案、此解決方案將BeeGFS平行檔案系統與NetApp EF600儲存系統結合在一起。</block>
  <block id="7cac973d2abc65a232606799a99be23c" category="paragraph">深入瞭解：</block>
  <block id="6ee419ed5a936cfed45771da0b746c94" category="list-text"><block ref="6ee419ed5a936cfed45771da0b746c94" category="inline-link-macro-rx"></block></block>
  <block id="1ce6299bc86692b3e97783bdba904848" category="list-text"><block ref="1ce6299bc86692b3e97783bdba904848" category="inline-link-macro-rx"></block></block>
  <block id="2c39c30b16a5c14e4b3bd73361f541c5" category="list-text"><block ref="2c39c30b16a5c14e4b3bd73361f541c5" category="inline-link-macro-rx"></block></block>
  <block id="b7f5b93ad68dd5ab95107b85145443e8" category="list-text"><block ref="b7f5b93ad68dd5ab95107b85145443e8" category="inline-link-macro-rx"></block></block>
  <block id="9db3ca538820d0cfb7b44ef80f16ca98" category="inline-link-macro">效能調校</block>
  <block id="a51906ad0f905e303cf3b09d82ec1db0" category="list-text"><block ref="a51906ad0f905e303cf3b09d82ec1db0" category="inline-link-macro-rx"></block></block>
  <block id="730b718214a170296ed598158264e021" category="summary">BeeGFS解決方案包含根據驗證測試進行效能調校的建議。</block>
  <block id="a49e13cf9bc8e242e7b828e3c9016699" category="paragraph">儘管BeeGFS提供合理的開箱即用效能、但NetApp已開發出一套建議的調校參數、以最大化效能。這些參數會考量基礎E系列區塊節點的功能、以及在共享磁碟HA架構中執行BeeGFS所需的任何特殊需求。</block>
  <block id="6900084f28039c00033899865271a4b5" category="section-title">檔案節點的效能調校</block>
  <block id="7ed4e287a78a4cc348d1e60d143ceda8" category="paragraph">您可以設定的可用調校參數包括：</block>
  <block id="d8eb1bf5eeddb34869fa0aee2c5c3be0" category="list-text">*檔案節點的UEFI/BIOS中的系統設定。*若要發揮最大效能、建議您在做為檔案節點的伺服器機型上設定系統設定。您可以使用系統設定程式（UEFI/BIOS）或底板管理控制器（BMC）提供的Redfish API來設定檔案節點時的系統設定。</block>
  <block id="bb2fcb1abe8d0829558e398d9acb4589" category="inline-link-macro">調整檔案節點系統設定以獲得效能</block>
  <block id="6721128d9ea380f9965cc220f28619e1" category="list-text">*必要組態參數的預設設定。*必要的組態參數會影響BeeGFS服務的設定方式、以及E系列磁碟區（區塊裝置）如何由心臟起搏器設定格式及掛載。這些必要的組態參數包括：</block>
  <block id="93de4dab2e303d649f94f0880095e6ef" category="list-text">BeeGFS服務組態參數</block>
  <block id="c5b3473e89672cc155d0436c6e60bd52" category="inline-link">BeeGFS服務組態參數</block>
  <block id="334a50f926a902a241ecfae54f3cce32" category="list-text">Volume格式化和掛載參數會設定為建議的預設值、而且只能針對進階使用案例進行調整。預設值會執行下列動作：</block>
  <block id="4b9b870ed7f3db8f28c2ddcf4d3bd986" category="list-text">根據目標類型（例如管理、中繼資料或儲存設備）、以及基礎磁碟區的RAID組態和區段大小、最佳化初始磁碟區格式。</block>
  <block id="9f641b3b08e18d35b2219dee293e2038" category="list-text">調整心臟起搏器如何掛載每個Volume、以確保變更立即排清至E系列區塊節點。如此可在檔案節點發生故障且正在進行作用中寫入時、避免資料遺失。</block>
  <block id="72247689b02927b1ceac4fb69e6c9954" category="inline-link">Volume格式化與掛載組態參數</block>
  <block id="c5d80eb8c0726de2a9804385295dc0e3" category="paragraph">預設設定是用來驗證NetApp解決方案上的BeeGFS、但您可以變更這些設定、以因應您的特定工作負載或使用案例進行調整。您可以變更的一些Linux作業系統設定範例包括：</block>
  <block id="b56281fe1e5f14da49b6d1d4c6ad0cd9" category="list-text">E系列區塊裝置上的I/O佇列。</block>
  <block id="43a8170c4aebbb467c4d4b59d77a7662" category="paragraph">您可以在作為BeeGFS目標的E系列區塊裝置上設定I/O佇列、以便：</block>
  <block id="ce0213a2bd6755f2eacf9574b2b56dda" category="list-text">根據裝置類型（NVMe、HDD等）調整排程演算法。</block>
  <block id="c78d3d0bdafa5fc5623e3d56a9cc33ce" category="list-text">增加未處理要求的數量。</block>
  <block id="b785a1945e736aa8340d2e4bde128b82" category="list-text">調整要求大小。</block>
  <block id="a9a2c451a0c5c7939a07afe7cd297216" category="list-text">最佳化預先讀取行為。</block>
  <block id="f39721f45b17814f0740b3c066ca0b66" category="list-text">虛擬記憶體設定：</block>
  <block id="552afad9cf059c34e2ed8d24ff34fc12" category="paragraph">您可以調整虛擬記憶體設定、以獲得最佳的持續串流效能。</block>
  <block id="aa8e8d4d1817c4e08c70cd3c1b4c89b9" category="list-text">CPU設定：</block>
  <block id="423dd652f980ba19cb7fb7f577576270" category="paragraph">您可以調整CPU頻率調節器和其他CPU組態、以獲得最大效能。</block>
  <block id="eb2cf8d186779ea110100038f3ec2e90" category="list-text">讀取要求大小。</block>
  <block id="ba4dcc8d5b46a4c30176506ef828aea4" category="section-title">區塊節點的效能調校</block>
  <block id="4f59030dbd3da04d4b74738f5149fffb" category="paragraph">根據套用至特定BeeGFS建置區塊的組態設定檔、區塊節點上設定的Volume群組會稍微變更。例如、使用24個磁碟機EF600區塊節點：</block>
  <block id="841fc343eee01328e222ebada200ca5d" category="list-text">對於單一基礎建置區塊、包括BeeGFS管理、中繼資料和儲存服務：</block>
  <block id="bbea55f4794f89e45fe7c40eaf8ca3ee" category="list-text">1個2+2個RAID 10 Volume群組、用於BeeGFS管理和中繼資料服務</block>
  <block id="92f2b7b47db52c081f552bd884a78ae7" category="list-text">2個8+2個RAID 6 Volume群組用於BeeGFS儲存服務</block>
  <block id="4f4960028dfd13311a5679d2450101d1" category="list-text">若為BeeGFS中繼資料+儲存建置區塊：</block>
  <block id="fdd7b1bdaea27f32d5925fd1a957fce4" category="list-text">1個2+2個RAID 10 Volume群組、用於BeeGFS中繼資料服務</block>
  <block id="196fdf9280847a2a4a9ddd0b8520bdfb" category="list-text">僅適用於BeeGFS儲存設備建置區塊：</block>
  <block id="632ac8eccac17a8789dd33202130e509" category="list-text">2個10+2個RAID 6 Volume群組用於BeeGFS儲存服務</block>
  <block id="014e85e7f3bbdad1ad6f193e82d21755" category="inline-link-macro">部署指示</block>
  <block id="39b751cb17d740944bc5071eba1abda2" category="admonition">由於BeeGFS需要的管理與中繼資料儲存空間比儲存空間大幅減少、因此有一個選項是針對RAID 10 Volume群組使用較小的磁碟機。較小的磁碟機應安裝在最外側的磁碟機插槽中。如需詳細資訊、請參閱 <block ref="92eed053ec15880d36275e60ab80275b" category="inline-link-macro-rx"></block>。</block>
  <block id="1708794637b71b8aadfa80d503ccc505" category="paragraph">這些都是由Ansible型部署所設定、以及其他一些一般建議的設定、以最佳化效能/行為、包括：</block>
  <block id="b02fbba0a56e144e15b688980d01275a" category="list-text">將全域快取區塊大小調整為32KiB、並將需求型快取排清調整為80%。</block>
  <block id="c70b65aef502812d5a0e8a4b173334d9" category="list-text">停用自動負載平衡（確保控制器磁碟區指派維持原定狀態）。</block>
  <block id="94966bf9df1a2fb2442d06d53723f28e" category="list-text">啟用讀取快取和停用預先讀取快取。</block>
  <block id="65f3cbabf1e92d0ce2d27d87d85a3c5a" category="list-text">啟用含鏡射的寫入快取、並需要電池備份、以便在區塊節點控制器故障時、快取仍會持續存在。</block>
  <block id="dfb95cf8b58d92dcb47401bae0964c5d" category="list-text">指定磁碟機指派給磁碟區群組的順序、在可用磁碟機通道之間平衡I/O。</block>
  <block id="2260cb128d87141c6a0a2c06c043def7" category="summary">定義一般的Ansible庫存結構之後、請定義BeeGFS檔案系統中每個建置區塊的組態。</block>
  <block id="b8bb1668a8a0007267670827d99f76b5" category="paragraph">這些部署說明示範如何部署由基礎建置區塊（包括管理、中繼資料和儲存服務）所組成的檔案系統、第二個含有中繼資料和儲存服務的建置區塊、以及第三個純儲存建置區塊。</block>
  <block id="bc4ca1def58917532e653ebf4c3c5f15" category="paragraph">這些步驟旨在顯示完整的典型組態設定檔、您可以使用這些設定檔來設定NetApp BeeGFS建置區塊、以符合整個BeeGFS檔案系統的需求。</block>
  <block id="053cdc4e7aa5884fba5be0b7e80bcb5c" category="admonition">在本節及後續章節中、視需要進行調整、以建立代表您要部署之BeeGFS檔案系統的詳細目錄。尤其是使用代表每個區塊或檔案節點的Ansible主機名稱、以及儲存網路所需的IP定址方案、以確保其可擴充至BeeGFS檔案節點和用戶端的數量。</block>
  <block id="e00187948ca315221e5e284a4312f83f" category="section-title">步驟1：建立Ansible庫存檔案</block>
  <block id="cbdf4dddad7bf23198edcbf2c8721659" category="list-text">建立新的「inventory.yml」檔案、然後插入下列參數、視需要將主機替換為「Eseria_storage系統」、以代表部署中的區塊節點。名稱應與「host_vars/&lt;fileName（主機名稱）&gt;.yml」所使用的名稱相對應。</block>
  <block id="742c9db30f264a7d33e72383a817b4f5" category="paragraph">在後續章節中、您將在「ha_cluster」下建立其他可執行群組、以代表您要在叢集中執行的BeeGFS服務。</block>
  <block id="066251bf9494493f76299f6f40a80df6" category="section-title">步驟2：設定管理、中繼資料和儲存建置區塊的庫存</block>
  <block id="5320d481bd8442fec42afcaded2a8d49" category="paragraph">叢集或基礎建置區塊中的第一個建置區塊必須包含BeeGFS管理服務、以及中繼資料和儲存服務：</block>
  <block id="a54299a446e0a2e17f57383db8e31dc6" category="list-text">在「inventory.yml」中、在「ha_cluster：子項目」下填入下列參數：</block>
  <block id="fd84d0d4501e2eca409dc18043cf1492" category="list-text">建立「group vars/mgmt.ml」檔案、並包含下列項目：</block>
  <block id="bcc9cdaf60435f4d091a1bfdac879201" category="list-text">在「Group_vars/」下、使用下列範本建立資源群組「meta_01」到「meta_08」的檔案、然後填寫下表中每個服務的預留位置值：</block>
  <block id="3df790a0a0a3be54d9cbac91d4bc35e1" category="inline-link">NetApp EF600陣列簡介</block>
  <block id="4ada98602970473e524def1d48723bd6" category="admonition">磁碟區大小是以整體儲存資源池（也稱為Volume群組）的百分比來指定。NetApp強烈建議您在每個資源池中保留一些可用容量、以便有空間進行SSD過度資源配置（如需詳細資訊、請參閱<block ref="dfc1025f9a756c10e6b0cbe0f4bc500a" category="inline-link-rx"></block>）。儲存資源池「beegfs_m1_m2_m5_m6'」也會將1%的資源池容量配置給管理服務。因此、對於儲存資源池中的中繼資料磁碟區、當使用1.92TB或3.844TB磁碟機時、請將此值設為「21.25」；如果使用7.65TB磁碟機、請將此值設為「22.25」；如果使用15.3TB磁碟機、請將此值設為「23.75」。</block>
  <block id="34082694d21dbdcfc31e6e32d9fb2b9f" category="cell">檔案名稱</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">連接埠</block>
  <block id="b1cddc6c78e92a26b8976dc97327d412" category="cell">浮動IP</block>
  <block id="72159601fc6c3d952cc9825d610ddd68" category="cell">NUMA區域</block>
  <block id="40cf615dcacf5ec5faf6a3cdf1ff5a6e" category="cell">儲存資源池</block>
  <block id="cdd25d91a2d0aca59a80f91cfe9af9de" category="cell">擁有控制器</block>
  <block id="f4d0c8022be4f31d06814c33705037ff" category="cell">meta_01.yml</block>
  <block id="1f7aa6705d5b742085538c627f6f9c2b" category="cell">8015</block>
  <block id="cfcd208495d565ef66e7dff9f98764da" category="cell">0</block>
  <block id="7ef878b8d47cf2658a8b7e4c1b8f133d" category="cell">beegfs_m1_m2_m5_m6.</block>
  <block id="7fc56270e7a70fa81a5935b72eacbe29" category="cell">答</block>
  <block id="60b1afbaab870bf5621ed87ae12559fe" category="cell">meta_02.yml</block>
  <block id="62d2b7ba91f34c0ac08aa11c359a8d2c" category="cell">8025</block>
  <block id="9d5ed678fe57bcca610140957afab571" category="cell">b</block>
  <block id="3ce592406a461bfadfa5ab1f08c5c506" category="cell">meta_03.yml</block>
  <block id="a2b8a85a29b2d64ad6f47275bf1360c6" category="cell">8035</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="cell">1.</block>
  <block id="c229ea898f8c27aeb40c65332e30db3f" category="cell">Beegfs_m3_m4_m7_M8</block>
  <block id="7f6482de225123824ca5b23c1cf79f05" category="cell">meta_04.yml</block>
  <block id="704cddc91e28d1a5517518b2f12bc321" category="cell">8045</block>
  <block id="833a23c43dc9c206a593873d80d04903" category="cell">meta_05.yml</block>
  <block id="444b0d9a802792791bb9a2da568b463d" category="cell">8055</block>
  <block id="38774c8cd9de3fd76c7df6b0746f2f2b" category="cell">meta_06.yml</block>
  <block id="320e4df890a1a620573db8170f39a093" category="cell">8065</block>
  <block id="5a681b3e1f7ad2d965284e36f4f6b7d3" category="cell">meta_07.yml</block>
  <block id="ede529dfcbb2907e9760eea0875cdd12" category="cell">8075</block>
  <block id="a9cc3f3ebc7a8daedf369af06faba518" category="cell">meta_08.yml</block>
  <block id="5011bf6d8a37692913fce3a15a51f070" category="cell">8085</block>
  <block id="89f0938aa83de82ca99f8b06297ed69c" category="list-text">在「Group_vars/」下、使用下列範本建立資源群組「shor_01」到「shor_08」的檔案、然後填入每個服務的預留位置值、以參照範例：</block>
  <block id="9b62ac6b206ab6cafe8dafa0990559c7" category="inline-link-macro">建議的儲存資源池過度資源配置百分比</block>
  <block id="b627976db3394ccf24342632cef6f4f1" category="cell">STOR_01.yml</block>
  <block id="40f4da34bbe180214c23b9e55da4f772" category="cell">8013</block>
  <block id="5ef33d06ff783e8453c10b95db8c1253" category="cell">beegfs_s1_s2</block>
  <block id="70963f6e36ca66556bef5f6ae74ad0ad" category="cell">STOR_02.yml</block>
  <block id="1ecdec353419f6d7e30857d00d0312d1" category="cell">8023</block>
  <block id="a4253b13d64a7017467d335c0c147ed3" category="cell">STOR_03.yml</block>
  <block id="fc5b3186f1cf0daece964f78259b7ba0" category="cell">8033</block>
  <block id="a3cc9ef3e643fd2d2e1b6c2672b1c361" category="cell">beegfs_s2_s4</block>
  <block id="d471f1c4be4f658b822b7cfcfc808efa" category="cell">STOR_04.yml</block>
  <block id="5bd529d5b07b647a8863cf71e98d651a" category="cell">8043</block>
  <block id="6a0625f228a1c5802a3d0ca970c7ebac" category="cell">STOR_05.yml</block>
  <block id="dfccdb8b1cc7e4dab6d33db0fef12b88" category="cell">8053</block>
  <block id="2ac54a6d92aca96fef8d0eac5b813f34" category="cell">Beegfs_S1_S6</block>
  <block id="09da1a861f10d113069c5e1da9d2decd" category="cell">STOR_06.yml</block>
  <block id="8d1f1aac0dd8a76b49e8bbdda0c7c98c" category="cell">8063</block>
  <block id="cf124e58023b3726106af9c8718a48ed" category="cell">STOR_07.yml</block>
  <block id="ffa9b486ad206c638c657b7ed335635c" category="cell">8073</block>
  <block id="3e96e523215f928a3915e79e1451e2e7" category="cell">Beegfs_S7_S8</block>
  <block id="0e4b036746af52a755e4b546698b2b61" category="cell">STOR_08.yml</block>
  <block id="20ef119e812e178ecb44efa448b57ebc" category="cell">8083</block>
  <block id="80e0c052ed9f2bde54c56adb04f880f1" category="section-title">步驟3：設定中繼資料+儲存建置區塊的詳細目錄</block>
  <block id="9e701ac8f2dd669a0e51464b4d8e3331" category="paragraph">這些步驟說明如何設定BeeGFS中繼資料+儲存建置區塊的可執行庫存。</block>
  <block id="ff1cbf3210fb9b21912445c6ea8cb9f6" category="list-text">在「inventory.yml」中、在現有組態下填入下列參數：</block>
  <block id="628d1b90e1a21bbcec24af78377f8297" category="list-text">在「Group_vars/」下、使用下列範本建立資源群組「meta_09」到「meta_16」的檔案、然後填入每個服務的預留位置值、以參照範例：</block>
  <block id="bc5e8003da73758b95c46194672943bb" category="admonition">如需正確使用尺寸、請參閱 <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>。</block>
  <block id="9c6de3c786b8c9c409de2fd8070e5072" category="cell">meta_09.yml</block>
  <block id="2ea9f3181dbee99d651a0d6c53be4a36" category="cell">Beegfs_m9_m10_M13_M14</block>
  <block id="f370a281056494e99bcade5ddef17b26" category="cell">meta_10.yml</block>
  <block id="27f563eed2131061540c21a6239b43d8" category="cell">meta_11.ml</block>
  <block id="7c335ef1ce51db644c52518580d45d49" category="cell">Beegfs_M11_M12_M15_M16</block>
  <block id="a2a3007e91ab84d40e9453997468f1ad" category="cell">meta_12.ml</block>
  <block id="14c79c2a227a377885225e0f4dcf53b0" category="cell">meta_13.yml</block>
  <block id="07e72a8a343c421129dc3a92902de565" category="cell">meta_14.yml</block>
  <block id="d4d36ef3d915a0d2eaac8c62f1d8eff6" category="cell">meta_15.yml</block>
  <block id="b465a4b4c591a6f2e44fedac80e726d0" category="cell">meta_16.myl</block>
  <block id="91e38d134a7ca4a23006b0cf023d9011" category="list-text">在「Group_vars/」下、使用下列範本建立資源群組「shor_09」到「shor_16」的檔案、然後填入每個服務的預留位置值、以參照範例：</block>
  <block id="71c1385fcc844d118e8b2688b0cfd2d6" category="cell">STOR_09.yml</block>
  <block id="9282f3f43896f146dcbcc2d03d530b59" category="cell">beegfs_s9_s10</block>
  <block id="8f72ae1bf7ca7b8218a4bf9e719f5e7d" category="cell">STOR_10.yml</block>
  <block id="e5a3d4f42adb756f3b3c2e3ed045e4a8" category="cell">STOR_11.yml</block>
  <block id="6e4cec4b32bddd9c9a3574aacee223b6" category="cell">Beegfs_S11_s12.</block>
  <block id="05fd4833433a12b38d11d8045aebddff" category="cell">Stor_12.ml</block>
  <block id="437037bccd34f3db0b238843b50fe65a" category="cell">STOR_13.yml</block>
  <block id="7db433542754f496e2d707f51bf00c05" category="cell">beegfs_s13_s14</block>
  <block id="b3c4ed6c5b5c833713923f9e9bdfb9b9" category="cell">STOR_14.yml</block>
  <block id="4871ef58b7b91db78d33bb4d95e4bf27" category="cell">STOR_15.yml</block>
  <block id="b1a9c1cb2640dd5bc9fb4e80dda30200" category="cell">Beegfs_S15_S16</block>
  <block id="b02a9cdb541eba39e680a1da9c6299c7" category="cell">STOR_16.yml</block>
  <block id="dea1f079dcd8c8280e07dcd96ea8c075" category="section-title">步驟4：設定僅儲存建置區塊的庫存</block>
  <block id="711be1acedea341e1f5455f007cdb22b" category="paragraph">這些步驟說明如何設定BeeGFS純儲存區塊的可執行庫存。設定中繼資料+儲存設備的組態與純儲存設備建置區塊之間的主要差異、在於所有中繼資料資源群組都不存在、而且每個儲存資源池的「Criteria _DRIVE _count」也會從10變更為12。</block>
  <block id="5b6fe069463b7f5581a1864de036e765" category="list-text">在「Group_vars/」下、使用下列範本建立資源群組「shor_17」到「shor_24」的檔案、然後填寫每個服務的預留位置值、以參照範例：</block>
  <block id="f9838993bed3d0e550ae346ed2e4355e" category="cell">STOR_17.yml</block>
  <block id="8cf4aacf94a115dfc0190ee6782190d3" category="cell">Beegfs_S17_s18</block>
  <block id="7876b49b042d07da9a565db780a9b186" category="cell">STOR_18.yml</block>
  <block id="291847ab33dfc1d81beed13f4d7a0519" category="cell">STOR_19.yml</block>
  <block id="6a972920f626e0b0b8d505315beaf38b" category="cell">Beegfs_s19_S20</block>
  <block id="943a4f354a2af18dac1fe2a6e14fe880" category="cell">Stor_20.ml</block>
  <block id="a5aadbbde2e0b66fc661a126f5a1ce1e" category="cell">STOR_21.yml</block>
  <block id="9c82263beb960ece0e5b6ac0604bb4d9" category="cell">Beegfs_S21_S22</block>
  <block id="4879e56fe4d161ba3e4df67f961c483a" category="cell">STOR_22.yml</block>
  <block id="316b3c9a6656c51b87a725bf1f678a52" category="cell">STOR_23.yml</block>
  <block id="2404c81b13915ef9d59e0ac6328f4c10" category="cell">beegfs_S23_s24</block>
  <block id="47662afeeaa16771e7d516dd96ade0b7" category="cell">STOR_24.yml</block>
  <block id="66136a118d01240429805a157ae4b538" category="summary">針對第二代建置區塊、依照每個儲存資源池組態的標準四個磁碟區進行操作時、請參閱這些建議的百分比。</block>
  <block id="13d38edc52fe6e049aae05e6fce1573a" category="paragraph">當遵循第二代建置區塊每個儲存池組態的標準四個磁碟區時、請參閱下表。</block>
  <block id="2d115a94acc324947afb0abf7c47d665" category="paragraph">下表提供每個BeeGFS中繼資料或儲存目標的「Eseria_storage儲存資源池組態」中、作為磁碟區大小的建議百分比：</block>
  <block id="ec8691da9bf60fda22f12e08033d054b" category="cell">磁碟機大小</block>
  <block id="6f6cb72d544962fa333e2e34ce64f719" category="cell">尺寸</block>
  <block id="6f4922f45568161a8cdf4ad2299f6d23" category="cell">18</block>
  <block id="d81fdeb5a429e85d04118048e4b3485d" category="cell">21.5</block>
  <block id="6303058eb2f22355195922bb9eeac265" category="cell">22.5%</block>
  <block id="1ff1de774005f8da13f42943881c655f" category="cell">24</block>
  <block id="b6f404dc4372a8369386a51240b69703" category="admonition">上述指南不適用於包含管理服務的儲存資源池、此服務應將上述大小減少0.25%、以便將1%的儲存資源池分配給管理資料。</block>
  <block id="cede28c203641f70169adaabc10df9b6" category="inline-link">TR-4800:附錄A：瞭解SSD的耐用度和過度資源配置</block>
  <block id="dab022c0b8356780eb602bc87effd71f" category="paragraph">若要瞭解如何判斷這些值、請參閱<block ref="fa826cd698d934925bfe1b514e70b591" category="inline-link-rx"></block>。</block>
  <block id="bea1a33800109358727c67f41cd01d07" category="summary">部署及管理組態時、需要執行一或多個包含執行必要工作的教戰手冊、並將整體系統移至所需狀態。</block>
  <block id="40184afe39cc9f2361b3b73e0695976d" category="doc">部署BeeGFS</block>
  <block id="a5cd3ed116608dac017f14c046ea56bf" category="inline-link">角色</block>
  <block id="d0dbcd7fcc2b33ea218a58e2364a462a" category="paragraph">雖然所有工作都可納入單一教戰手冊中、但對於複雜的系統而言、這種做法很快就變得難以管理。Ansible可讓您建立及發佈角色、以封裝可重複使用的教戰手冊和相關內容（例如：預設變數、工作和處理常式）。如需詳細資訊、請參閱的「Ansible」文件<block ref="68a1974ca8634592518191ca9775617f" category="inline-link-rx"></block>。</block>
  <block id="63d74efd13802381ddc8b8a65a3a5000" category="paragraph">角色通常會在包含相關角色和模組的可Ansible集合中散佈。因此、這些教戰手冊主要是匯入分散在各種NetApp E系列Ansible系列收藏中的多個角色。</block>
  <block id="3fb2d69a2432fdcecc09bb3418ad3ace" category="admonition">目前、部署BeeGFS至少需要兩個建置區塊（四個檔案節點）、除非將個別的仲裁裝置設定為連線斷路器、以減輕在使用雙節點叢集建立仲裁時發生的任何問題。</block>
  <block id="2ab028f46312dfd58cd64798fc7cbf9e" category="list-text">建立新的「playbook、yml」檔案、其中包括：</block>
  <block id="26a3e9e044d0e5b372c4803d6bdeefbd" category="admonition">本方針執行幾項「pre_tesss」、以驗證檔案節點上是否安裝Python 3、並檢查所提供的Ansible標記是否受到支援。</block>
  <block id="7cf59981bd844e32610404655f205256" category="list-text">當您準備部署BeeGFS時、請將「Ansible Playbook」命令與庫存和方針檔案搭配使用。</block>
  <block id="f73890e8771abfa1abdc045ab1b722ef" category="paragraph">部署作業會執行所有的「pre_tessment」、然後在繼續實際部署BeeGFS之前提示使用者確認。</block>
  <block id="efd5cfa405ebe66e35820b347b961b90" category="paragraph">執行下列命令、視需要調整貨叉數量（請參閱以下附註）：</block>
  <block id="2485710fb8c15237f98f63beae48b455" category="inline-link">控制方針執行</block>
  <block id="e5e4c2e4c004bc7dbd4a04d4b0971e53" category="paragraph">視部署規模和Ansible控制節點與BeeGFS檔案和區塊節點之間的網路效能而定、部署時間可能會有所不同。</block>
  <block id="c38012b2187d10d4a33d168693918570" category="summary">每個建置區塊都由兩個已驗證的x86檔案節點組成、這些節點使用HDR（200GB）InfiniBand直接連線至兩個NetApp區塊節點。</block>
  <block id="0893812920a9268362b89a618b2f05c4" category="paragraph">每個建置區塊都包含兩個已驗證的x86檔案節點、這些節點使用HDR（200GB）InfiniBand纜線直接連接至兩個區塊節點。</block>
  <block id="9df6f3b087eea6552beb54d44653501a" category="list-text">使用雙埠200GB主機介面卡（HIC）設定每個BeeGFS區塊節點、並在其兩個儲存控制器中的每個都安裝HIC。</block>
  <block id="9e5081bbd0a64102ab8844f96776d6ea" category="admonition">生產使用案例的電源供應器組態通常應使用備援PSU。</block>
  <block id="cf31d049daa8cd238cb4238371f2e5d0" category="list-text">如有需要、請在每個BeeGFS區塊節點中安裝磁碟機。</block>
  <block id="eb86aba8f900c8f076cdcddafcf7271f" category="list-text">如果建置區塊將用於執行BeeGFS中繼資料和儲存服務、而較小的磁碟機則用於中繼資料磁碟區、請確認它們已安裝在最外側的磁碟機插槽中、如下圖所示。</block>
  <block id="c448ee45144a8930f2211d0a4edb7b91" category="list-text">對於所有的建置區塊組態、如果磁碟機機箱未完全安裝、請確定插槽0–11和12–23中已安裝相同數量的磁碟機、以獲得最佳效能。</block>
  <block id="7fd5b7ef2a561c49e1b59a838397af45" category="admonition">橫跨多個建置區塊的節點永遠不會直接連線。每個建置區塊都應視為獨立式單元、而建置區塊之間的所有通訊都是透過網路交換器進行。</block>
  <block id="57f799feabdc3b75aa704ff51e74f4c1" category="list-text">視需要、依照相同的佈線準則組裝其他建置組塊。</block>
  <block id="6a2ae129e5b77fd39f068e6cdee42d2a" category="admonition">可部署在單一機架中的建置區塊總數、取決於每個站台可用的電力和冷卻。</block>
  <block id="b11764419626b2eff6352f3d8e6022e3" category="summary">若要設定可Ansible控制節點、請識別可透過網路存取所有檔案和區塊節點管理連接埠的虛擬或實體機器、以便用來設定解決方案。</block>
  <block id="c4e4fc85a76d5e87beac70d1fa166882" category="paragraph">請*不要*設定區塊節點的無密碼SSH。這既不受支援、也不需要。</block>
  <block id="a8bb1258f035db2e1b989badd7504202" category="summary">若要定義檔案和區塊節點的組態、您可以建立可執行的詳細目錄、以代表您要部署的BeeGFS檔案系統。</block>
  <block id="811a6b46c73b2ff846d806c69f166392" category="paragraph">若要定義檔案和區塊節點的組態、您可以建立可執行的詳細目錄、以代表您要部署的BeeGFS檔案系統。清單包括主機、群組和變數、說明所需的BeeGFS檔案系統。</block>
  <block id="f710d81b04cfd57ef65bc4cca28bc3d4" category="section-title">步驟1：定義所有建置區塊的組態</block>
  <block id="08ecdaa3e32e095bd8f7ecec87a6ffe1" category="paragraph">定義套用至所有建置區塊的組態、無論您個別套用至哪些組態設定檔。</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">開始之前</block>
  <block id="1633329793556e695f8ae53c7f3c8756" category="list-text">在Ansible控制節點上、找出您要用來儲存Ansible庫存和教戰手冊檔案的目錄。</block>
  <block id="2af34d0fd4b17ecc42b7fb40d3a2019d" category="paragraph">除非另有說明、否則會針對此目錄建立此步驟中建立的所有檔案和目錄、以及執行下列步驟。</block>
  <block id="31f13138a9fb78368dd1c5b8b9cb522e" category="list-text">建立下列子目錄：</block>
  <block id="f502c582ecc3459969f6ae37e60464d1" category="paragraph">《host_vars》</block>
  <block id="f2151fe487fd8f761c16c5d92971a46f" category="paragraph">《團體》</block>
  <block id="5fa06f80972ff05cf8eb18aa9af90bbd" category="paragraph">"套裝軟體"</block>
  <block id="49266d47983011d7ceee48c764eaad20" category="section-title">步驟2：定義個別檔案和區塊節點的組態</block>
  <block id="bcbd88b78dd9388280471b20c50ef836" category="paragraph">定義適用於個別檔案節點和個別建置區塊節點的組態。</block>
  <block id="4ace9bc4fa627e77f6406dd2f64e2028" category="list-text">在「host_vars/」下、為每個BeeGFS檔案節點建立一個名為「.yml」的檔案、其中包含下列內容、並特別注意BeeGFS叢集IP和主機名稱的填入內容、這些內容以odd或偶數結尾。</block>
  <block id="65742ecf20e6c51de487a8a5c4e5d085" category="paragraph">一開始、檔案節點介面名稱會與此處列出的名稱相符（例如ib0或ibs1f0）。這些自訂名稱是在中設定 <block ref="9c327e4b0e0a41a0187df973a6c1c1f1" category="inline-xref-macro-rx"></block>。</block>
  <block id="c1df6ea154e4f3c22584570de9017604" category="admonition">如果您已經部署BeeGFS叢集、則必須先停止叢集、再新增或變更靜態設定的IP位址、包括用於NVMe/IB的叢集IP和IP。這是必要的、因此這些變更會正常生效、而且不會中斷叢集作業。</block>
  <block id="64f6e7ce4bce20648e5b5817cc7c9d5d" category="list-text">在「host_vars/」下、為每個BeeGFS區塊節點建立一個名為「&lt;主機名稱&gt;.yml」的檔案、然後填入下列內容。</block>
  <block id="350317d433df31d79bf0ded1b3748715" category="paragraph">請特別注意要填入以odd結尾的儲存陣列名稱與偶數結尾之內容的相關注意事項。</block>
  <block id="d9aa2babb29bda2ebcdcb05c255e1dd3" category="paragraph">針對每個區塊節點、建立一個檔案、然後為兩個控制器之一（通常為A）指定「&lt;management _ip&gt;」（管理IP）。</block>
  <block id="a79b02f70003beee254343e4cae10ad4" category="section-title">步驟3：定義應套用至所有檔案和區塊節點的組態</block>
  <block id="7a7623c76e8a35ad9b47b72876017ffc" category="paragraph">您可以在與群組對應的檔案名稱中、定義「group _vars」下一組主機的通用組態。如此可避免在多個位置重複執行共用組態。</block>
  <block id="b8250a298e8217ebff19d4f7c62cf654" category="inline-link">使用變數</block>
  <block id="45c67f165a1990ff04bfa4ffd3ad1908" category="paragraph">主機可以位於多個群組中、執行時、Ansible會根據其可變優先順序規則、選擇要套用到特定主機的變數。（如需這些規則的詳細資訊、請參閱的「Ansible」文件<block ref="e846c866a706aed07204d4b81c43f562" category="inline-link-rx"></block>）</block>
  <block id="30670ef79ffcebf619cb84794bb9f467" category="paragraph">主機對群組指派是在實際的Ansible庫存檔案中定義、此檔案是在本程序結束時建立的。</block>
  <block id="13fe78da26730165534ca728d16729df" category="paragraph">在Ansible中、您想要套用至所有主機的任何組態都可以定義為「All（全部）」群組。使用下列內容建立檔案「group_vars/all.yml」：</block>
  <block id="970c2de774d4cba551050f0b96346cc6" category="section-title">步驟4：定義應套用至所有檔案節點的組態</block>
  <block id="68decee7f537598fe42c449c7effd748" category="paragraph">檔案節點的共用組態是在稱為「ha_cluster」的群組中定義。本節中的步驟會建置應包含在「group vars/ha_cluster．yml」檔案中的組態。</block>
  <block id="01eabbaba4e3200ffffeaf687ced4089" category="list-text">在檔案頂端、定義預設值、包括在檔案節點上用做「show」使用者的密碼。</block>
  <block id="3eeae040dcd4e8e08ba89cd729351414" category="list-text">您也可以設定高可用度（HA）叢集的名稱、並指定叢集內通訊的使用者。</block>
  <block id="22bf408c8339ca14dab3745bbe56780d" category="paragraph">如果您要修改私有IP定址方案、也必須更新預設的「beegfs_ha_mgmtd_浮 點IP」。這必須符合您稍後為BeeGFS管理資源群組所設定的項目。</block>
  <block id="ba4d50db9221cc812d5f7981d4600c2d" category="paragraph">使用「beegfs_ha_alert_email_lists」指定一封或多封應接收叢集事件警示的電子郵件。</block>
  <block id="e69d5d030b5267144694edd30e58fa4b" category="admonition">儘管看似冗餘、但當您將BeeGFS檔案系統擴充至單一HA叢集以外的位置時、「beegfs_ha_mgmtd_浮 點_ip'是很重要的。部署後續HA叢集時、不需要額外的BeeGFS管理服務、並指向第一個叢集所提供的管理服務。</block>
  <block id="7509dcf152f48abcba19fa72adedb808" category="inline-link">在Red Hat High Availability叢集中設定隔離功能</block>
  <block id="b2f365e9dc240069eb174f596f8086dd" category="paragraph">在此步驟中、請注意：</block>
  <block id="83a5cc26327b36012de2442c022e0357" category="list-text">預設會啟用隔離功能、但您需要設定隔離_agent_。</block>
  <block id="502142ce464e9e0c49b233594ce3af26" category="list-text">在「PCM1_host_map」或「PCM1_host_list」中指定的「&lt;主機名稱&gt;」必須對應至「Ansible」清單中的主機名稱。</block>
  <block id="08c76f94c7c5d2fb0509d39d58f7d298" category="list-text">不支援在沒有隔離的情況下執行BeeGFS叢集、尤其是在正式作業中。這主要是為了確保BeeGFS服務（包括區塊裝置等任何資源相依性）因發生問題而容錯移轉、不會有多個節點同時存取的風險、進而導致檔案系統毀損或其他不良或非預期的行為。如果必須停用隔離功能、請參閱BeeGFS HA角色使用入門指南中的一般附註、並在「ha_cluster_crm_config_options[stonith啟用的]中、將「beegfs_ha_cluster_crm_config_options[stonith啟用的]」設為「假」。</block>
  <block id="8134b950ce435c1478c36f8d9e28640a" category="list-text">有多個節點層級的隔離裝置可供使用、BeeGFS HA角色可設定Red Hat HA套件儲存庫中可用的任何隔離代理程式。如果可能、請使用透過不斷電系統（UPS）或機架電力分配單元（rPDU）運作的隔離代理程式、 由於某些隔離代理程式（例如基板管理控制器（BMC）或伺服器內建的其他熄燈裝置）、在某些故障情況下可能無法回應Fence要求。</block>
  <block id="6793d5cb3a8bc008d05678615f821ca7" category="list-text">在Linux作業系統中啟用建議的效能調校。</block>
  <block id="951cd0f9ef758f90609564a78a7f36a2" category="paragraph">雖然許多使用者認為效能參數的預設設定通常運作良好、但您可以選擇變更特定工作負載的預設設定。因此、這些建議會包含在BeeGFS角色中、但預設不會啟用、以確保使用者知道套用至其檔案系統的調校。</block>
  <block id="2e468d52e0778656623f6a98e831b3c0" category="paragraph">若要啟用效能調校、請指定：</block>
  <block id="5886796779dc029ac41ffca429f9f5d1" category="list-text">（選用）您可以視需要調整Linux作業系統中的效能調校參數。</block>
  <block id="fe7cbbcd6bbbe894cb7364e04d36c7ae" category="inline-link">E系列BeeGFS GitHub網站</block>
  <block id="372ec1e9d1761b6aa16b9f0b54a4433b" category="list-text">在「group vars/ha_cluster．yml」（視需要調整套件）中填入下列參數：</block>
  <block id="382cd5df5d20e8ee60bea9f8be1884e3" category="list-text">設定「udev"規則、確保邏輯InfiniBand連接埠識別碼與基礎PCIe裝置之間的對應一致。</block>
  <block id="acb63a2b1a344472ec1b72c168bf5a95" category="paragraph">「udev"規則必須是每個作為BeeGFS檔案節點之伺服器平台的PCIe拓撲所特有的規則。</block>
  <block id="8cec215dcbcd9866be7ad7f12652d9bd" category="paragraph">驗證的檔案節點請使用下列值：</block>
  <block id="b535d5891e9112526732586cf8225d93" category="list-text">（選用）更新中繼資料目標選取演算法。</block>
  <block id="e3c1663ae83b766d79e4b2be55767666" category="inline-link">基準測試BeeGFS系統</block>
  <block id="8dff66e73ac10da6c457b7092c6f9005" category="admonition">在驗證測試中、「隨機配置資源」通常用於確保測試檔案在效能基準測試期間平均分散到所有BeeGFS儲存目標（如需基準測試的詳細資訊、請參閱BeeGFS網站<block ref="831dbcfeece1d9e52170bb11173ba315" category="inline-link-rx"></block>）。實際使用時、可能會導致編號較低的目標填滿速度比編號較高的目標更快。省略「Randomrounds」、只要使用預設的「Randomized」（隨機）值、就能提供良好的效能、同時仍能使用所有可用的目標。</block>
  <block id="aad0b8e6a3552eebcdcf125f218d1954" category="section-title">步驟5：定義通用區塊節點的組態</block>
  <block id="f9ed56c11a1443e285b3d786249fe6aa" category="paragraph">區塊節點的共用組態是在稱為「Eseria_storage系統」的群組中定義。本節中的步驟會建置應包含在「group _vars/ Eseries _storage系統.yml」檔案中的組態。</block>
  <block id="7d304d17d15c3332b9d8584fa30f070b" category="list-text">設定「Ansible connection to local（可連線至本機）」、提供系統密碼、並指定是否應驗證SSL憑證。（通常情況下、Ansible會使用SSH連線至託管主機、但在使用NetApp E系列儲存系統做為區塊節點的情況下、模組會使用REST API進行通訊。） 在檔案頂端新增下列項目：</block>
  <block id="a18d6a60f542af2e3b0784928e17f417" category="list-text">若要確保最佳效能、請在中安裝區塊節點所列的版本 <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>。</block>
  <block id="8c41baf1ca98e1184f48c4721d44d431" category="inline-link">NetApp支援網站</block>
  <block id="38119f4253b4080e689702afd647df1f" category="paragraph">請從下載對應的檔案<block ref="3f80e15ba326a9eb1fc39b6d8ba81472" category="inline-link-rx"></block>。您可以手動升級、或是將它們納入Ansible控制節點的「套件/」目錄、然後在「Eserie_storage儲存系統.yml」中填入下列參數、以使用Ansible進行升級：</block>
  <block id="72423a5fa99fafb4c2dc7b7e7f7d7962" category="admonition">將「Eseria_drive_韌 體_grade_drives_online」設定為「假」會加速升級、但必須等到部署BeeGFS之後才能執行。這是因為該設定需要在升級前停止所有磁碟機的I/O、以避免應用程式錯誤。雖然在設定磁碟區之前執行線上磁碟機韌體升級仍很快、但我們建議您將此值設為「true」、以避免日後發生問題。</block>
  <block id="2b0551e04ffc3a713c07e9a9611b9897" category="list-text">若要最佳化效能、請對全域組態進行下列變更：</block>
  <block id="6b7cf272a4e3aeaf52c2d0ca991829e5" category="list-text">若要確保最佳的Volume資源配置和行為、請指定下列參數：</block>
  <block id="b969df7be52ed192c298428e4fb0e696" category="admonition">針對「Eseria_storage資源池可用磁碟機」指定的值、是NetApp EF600區塊節點的專屬值、可控制磁碟機指派給新Volume群組的順序。此順序可確保每個群組的I/O平均分散於後端磁碟機通道。</block>
  <block id="7042a03d018b94aee36197baf79897b2" category="summary">為了發揮最大效能、我們建議您在您做為檔案節點的伺服器機型上設定系統設定。</block>
  <block id="e95c3b26aabb0242b0a38d72568b125a" category="paragraph">若要發揮最大效能、建議您在您做為檔案節點的伺服器機型上設定系統設定。</block>
  <block id="291e90fb83bca326d06b5479d0ae7197" category="paragraph">系統設定會因您用來做為檔案節點的伺服器機型而有所不同。本主題說明如何設定已驗證之Lenovo ThinkSystem SR665伺服器檔案節點的系統設定。</block>
  <block id="cfa9d7ef51eae23751a0ea54765b99fd" category="section-title">使用UEFI介面調整系統設定</block>
  <block id="01d5e77f89697d310442aa744d5c4068" category="paragraph">在* UEFI Setup &gt; System Settings*下、調整下列系統設定：</block>
  <block id="6e2e169ab41f56781f3cd65629914fc6" category="section-title">操作模式功能表</block>
  <block id="f7adfd4c98207b1161c7b693c16fa9ea" category="cell">*系統設定*</block>
  <block id="a3fb412bb8de9718b8510aa99340221a" category="cell">*變更為*</block>
  <block id="1c2631aa94b6d5e1cc826b0cb76a87ba" category="paragraph">操作模式</block>
  <block id="90589c47f06eb971d548591f23c285af" category="paragraph">自訂</block>
  <block id="43e16592d1b7c57c68cdf68bcd7f2fbd" category="paragraph">CTDP</block>
  <block id="e1ba155a9f2e8c3be94020eef32a0301" category="paragraph">手冊</block>
  <block id="db0877bc3fbb4ce0ffd2f36fa5470581" category="paragraph">CTDP手冊</block>
  <block id="9de6d14fff9806d4bcd1ef555be766cd" category="paragraph">350</block>
  <block id="43287f46609a4dc60f40223b99452814" category="paragraph">套件電力限制</block>
  <block id="8bec16a6c589939ad9d0a3c20f7dd8dc" category="paragraph">效率模式</block>
  <block id="bcfaccebf745acfd5e75351095a5394a" category="paragraph">停用</block>
  <block id="50a4d260500229aae705dffbef792499" category="paragraph">globe-C態 控制</block>
  <block id="bbb8600e28b07b4e7765ccb37c8ba72d" category="paragraph">SOC P狀態</block>
  <block id="16a2e561c536a77cbfd10490ea398be6" category="paragraph">P0</block>
  <block id="f7d2d14860cfdee82e8cf9418c1ec624" category="paragraph">DF C狀態</block>
  <block id="9c1a39470ba5d6a8856c5e813e20ef6b" category="paragraph">啟用記憶體關機</block>
  <block id="3011761cbf6a8eb38a41f6b38210c119" category="paragraph">每個插槽的NUMA節點</block>
  <block id="4142a6b2c0ac3aaf643751457e9aad6a" category="paragraph">NPS1</block>
  <block id="cdceaf6498461c15ce1ae0800bf60c66" category="section-title">裝置和I/O連接埠功能表</block>
  <block id="fb31ba7c369028665e7e1a20bd645da6" category="paragraph">IOMMU</block>
  <block id="ada62bbe41ae187c3f0f777ffbd44d28" category="section-title">電源選單</block>
  <block id="e7dc1149b98b9a234419b52cb65c86eb" category="paragraph">PCIe Power Brake</block>
  <block id="a4fb96bd64d4ecceb3f0f416f7032bb9" category="section-title">處理器功能表</block>
  <block id="78ee21f7e9d290c773c1aa6ae0d03303" category="paragraph">全域C狀態控制</block>
  <block id="dc8a824c345b5e3bbaa79fce219830c2" category="paragraph">SMT模式</block>
  <block id="28fb70bc7fdb441f9e6550205a24c92c" category="paragraph">CPPC</block>
  <block id="83ed73e76e0c1cfe38ef9627b7ae0fe0" category="section-title">使用Redfish API調整系統設定</block>
  <block id="2bfb51b6fb78d5540135d28668652ab6" category="paragraph">除了使用UEFI設定、您也可以使用Redfish API來變更系統設定。</block>
  <block id="33e221e2cea2342a6bae3c4c24f33827" category="inline-link">DMTF網站</block>
  <block id="d96afe3ab332c2cc42ac69c811923ba7" category="paragraph">如需Redfish架構的詳細資訊、請參閱<block ref="108ef396f9aef1d6bcaea08379b877eb" category="inline-link-rx"></block>。</block>
  <block id="71f5771dab663d80ba4dad1627e3386a" category="summary">升級總覽</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">法律聲明提供版權聲明、商標、專利等存取權限。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律聲明</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版權</block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商標</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 標誌及 NetApp 商標頁面上列出的標章均為 NetApp 、 Inc. 的商標。其他公司與產品名稱可能為其各自所有者的商標。</block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">專利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">如需最新的 NetApp 擁有專利清單、請參閱：</block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隱私權政策</block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">開放原始碼</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知檔案提供有關 NetApp 軟體所使用之協力廠商版權與授權的資訊。</block>
  <block id="cc1ba14f8dc9bd7ba20e2aa654cde10b" category="inline-link">E系列/EF系列SANtricity 的注意事項</block>
  <block id="2dae7f81af3097152530b0bc519d7eb1" category="paragraph"><block ref="2dae7f81af3097152530b0bc519d7eb1" category="inline-link-rx"></block></block>
  <block id="e3b88cba18358b065044f4788449026b" category="summary">解決方案支援BeeGFS平行叢集檔案系統、可在高效能、低延遲的NetApp E系列儲存設備上執行。NetApp支援的高成本效益、易於管理且高可用度的HPC解決方案。</block>
  <block id="28e8b3e83af233fe7085ba954fc6fd36" category="doc">採用E系列儲存設備的NetApp BeeGFS</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">開始使用</block>
  <block id="b89fcecfac1f6b8376165aabe5b6c5ee" category="sidebar">其他文件</block>
  <block id="bc4fe2352063642d68529f2aa0ca7ca3" category="sidebar">NetApp 產品文件</block>
  <block id="dbd68e15f4c30d2a47d780a9bf4f3da1" category="sidebar">BeeGFS文件</block>
  <block id="974ad78dc53c253ebfe5b2b8b376f353" category="sidebar">工具支援</block>
  <block id="d564be87f67790fe4b92faa0eea29c48" category="sidebar">Ansible Galaxy.上的NetApp E系列集合</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="sidebar">NetApp 互通性對照表</block>
  <block id="668e2078ef1b1722c77cdb5c523a4463" category="sidebar">NetApp知識庫</block>
  <block id="c35665ae18bf4eff9afa413fcb281b07" category="sidebar">NetApp文件上的BeeGFS</block>
  <block id="f40341c80e215542b4fdfe4e2f2e2a21" category="sidebar">本網站內容</block>
  <block id="539652fdf317cc6e27c7373dc6fe13d3" category="sidebar">檢視解決方案設計</block>
  <block id="6c24b1b24585abc1454b91e5eb163103" category="sidebar">部署解決方案</block>
  <block id="c5d1e465274381bca5df236c2a5a7d57" category="sidebar">部署軟體</block>
  <block id="97ecf64b4f2550ec2c53f49bb9fde847" category="sidebar">設定Ansible控制節點</block>
  <block id="f99ff2e7716d2f6aa55979e838f0a328" category="sidebar">建立可Ansible庫存</block>
  <block id="da7f5c02044100badae24523f01941a2" category="sidebar">定義BeeGFS建置區塊</block>
  <block id="8025f3ce3e3e1dd003430788c4be8b5e" category="sidebar">擴充BeeGFS叢集</block>
  <block id="e304a70d2f42f62cefb9b474f73a1e91" category="sidebar">建議的Volume百分比</block>
  <block id="ba13e086fe19056a379b6240e05651a8" category="sidebar">TR-4915 -使用E系列和BeeGFS進行AI資料移動</block>
  <block id="bc893b2686532fc683cb056beffd08aa" category="cell">磁碟機大小（10+2 RAID 6）儲存Volume群組</block>
  <block id="64dc43320ec1a44c390fafb5e2408f4b" category="inline-link">NVIDIA DGX基礎POD</block>
  <block id="33d753992c8525a016e60650889ef7a9" category="paragraph">如需詳細資訊、請參閱<block ref="917e0b817a1bc5579c3d00c8de7a0790" category="inline-link-rx"></block> 和<block ref="d4d49ddfca3de3daecdc231399362db8" category="inline-link-rx"></block>。</block>
  <block id="53c31a8ba69af9d096629948d271d34d" category="paragraph-title">利用頻寬的纜線</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">關於這項工作</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="paragraph-title">步驟</block>
  <block id="015dd422187100bd2a53cae756db5bcd" category="paragraph-title">一個BeeGFS基礎（管理、中繼資料和儲存）建置區塊</block>
  <block id="2eb32f267ab2864aa50a3171522c1574" category="paragraph-title">BeeGFS中繼資料+儲存建置區塊</block>
  <block id="2cf619569e1d3422599fa7ba3fff04f2" category="paragraph-title">BeeGFS純儲存建置區塊</block>
  <block id="9443a11095bad63a50d95ece24842fb2" category="paragraph-title">三個BeeGFS建置區塊</block>
  <block id="3c793d71f0d81892f28ab10f661381c8" category="paragraph-title">一個BeeGFS中繼資料+儲存建置區塊</block>
  <block id="94c5de0e8c5b79f8b061a00a2d638234" category="paragraph-title">兩個BeeGFS中繼資料+儲存建置區塊</block>
  <block id="aa00436c66c8456a1c9ef0a12178a4ab" category="paragraph-title">子網路A：100127.0/16</block>
  <block id="079e5887eeb92f6f17c9fa25fd464e2a" category="paragraph-title">子網路B：100128.0/16</block>
  <block id="02cf3373667b246c17c8d054c073a372" category="paragraph">衍生架構、部署建議有多種差異：</block>
  <block id="2e93d3c37349d17095fd0dca7d6fe097" category="inline-link-macro">高容量建置區塊</block>
  <block id="8a43f7c3e77834cf43b5398c116033e3" category="list-text"><block ref="8a43f7c3e77834cf43b5398c116033e3" category="inline-link-macro-rx"></block></block>
  <block id="119c6b2e3908d75335ad13f9fead045a" category="cell">1,938,577,200</block>
  <block id="753b107ce954fb125f0557af947a86c5" category="cell">51.77TB</block>
  <block id="bb586a502f621b433b3966d68c887364" category="cell">3,880,388,400</block>
  <block id="8b2e1597e74fb68a87ef415a1ce004fc" category="cell">103.55TB</block>
  <block id="9c0aa8a6ddcfe00cef8951f0edd99c58" category="cell">8、125、278、000</block>
  <block id="b0baa6e5c027744d7e7f2a93d8686bf5" category="cell">216.74 TB</block>
  <block id="edd8590257b34c7c6f57e06f28bb9460" category="cell">17、269、854000</block>
  <block id="0d9c02ec5b1f4c4a835073aa142d0b7f" category="cell">460.60TB</block>
  <block id="f8ed0cba5469cc89e05fa4d3025eca1b" category="summary">高容量建置區塊的設計差異。</block>
  <block id="8b074fc693c7d8fd35c61de8fe2dee9a" category="doc">大容量建置區塊</block>
  <block id="fb5708557d5e7c6d44ac55ef4c09a054" category="paragraph">標準BeeGFS解決方案設計以高效能工作負載為設計考量。尋求高容量使用案例的客戶應觀察此處概述的設計與效能特性差異。</block>
  <block id="800f7da804cf784ad962d085fbc70486" category="section-title">硬體與軟體組態</block>
  <block id="90f177623f1131fc7f45e82db6189a1b" category="paragraph">高容量建置區塊的硬體和軟體組態為標準配置、但EF600控制器應更換為EF300控制器、並可選擇連接1到7個IOM擴充支架、每個儲存陣列各有60個磁碟機、每個建置區塊總計2至14個擴充托盤。</block>
  <block id="467fccc62f2ea7630303f15d47a54aa7" category="paragraph">部署高容量建置區塊設計的客戶、可能只會使用由BeeGFS管理、中繼資料及每個節點儲存服務所組成的基礎建置區塊樣式組態。為了節省成本、大容量儲存節點應在EF300控制器機箱的NVMe磁碟上配置中繼資料磁碟區、並應將儲存磁碟區配置至擴充托盤中的NL-SAS磁碟機。</block>
  <block id="774f4231e5651061791e65cf90314897" category="paragraph"><block ref="774f4231e5651061791e65cf90314897" category="inline-image-macro-rx" type="image"></block></block>
  <block id="267aa4fef181a2097a06345c854cc106" category="paragraph">這些規模調整準則假設大容量建置區塊在基礎EF300機箱中設定一個2+2 NVMe SSD Volume群組作為中繼資料、並在每個IOM擴充匣中設定6x 8+2 NL-SAS Volume群組作為儲存設備。</block>
  <block id="963320465e8fcfa25188a669a43858c4" category="cell">磁碟機大小（容量HDD）</block>
  <block id="55fd8e839de07671a6869fad80279ab9" category="cell">每個寬板的容量（1個紙匣）</block>
  <block id="001115a96afe0add22e654316239365a" category="cell">每個寬帶容量（2個磁碟匣）</block>
  <block id="b9781606af717d9b153714ca7a3a2d33" category="cell">每個寬帶容量（3個磁碟匣）</block>
  <block id="345ffe7c9ac213823037fbcdca8f4ef2" category="cell">每個寬帶容量（4個磁碟匣）</block>
  <block id="6b7e0bcfc566b639bc0d10bad9f871dd" category="cell">4TB</block>
  <block id="676efbc64df1b4909842616f91027d96" category="cell">439TB</block>
  <block id="25c359cf674976f1bd282922ff6ed0e3" category="cell">878 TB</block>
  <block id="1416acbb13ce37c62934fde6e37b3c6b" category="cell">1317 TB</block>
  <block id="3aa071e61efaac2113f5fc251c03b688" category="cell">1756 TB</block>
  <block id="0706c165b0123479cffaac9b374484f0" category="cell">8 TB</block>
  <block id="76a91245e71b558dbe0040ea8b7b3c21" category="cell">2634 TB</block>
  <block id="dd9fa1084ca34ce21c6b127bd37446b9" category="cell">3512 TB</block>
  <block id="1191f788083da9194f8eef9400d10898" category="cell">10 TB</block>
  <block id="6587b6d3747beeadda1eccb500e9771b" category="cell">1097 TB</block>
  <block id="3a89d830e84dc7715fe902bb9adac448" category="cell">2195 TB</block>
  <block id="1024776bf84a4c2469e49539ac248790" category="cell">3292 TB</block>
  <block id="0af601e969fa263e021792cfd1dfd4af" category="cell">4390 TB</block>
  <block id="aad11c7dd0feb18c08cb728eea0a8c46" category="cell">12 TB</block>
  <block id="0fc4914bd341e29e4eef438ff8c44bdb" category="cell">3951 TB</block>
  <block id="4d63a00ef9361479d55d2914d7f75e28" category="cell">5268TB</block>
  <block id="324f218b8144e744b54eb58e0bf14eea" category="cell">16 TB</block>
  <block id="af4d6969d11876b269a31ebb39d7c34e" category="cell">7024 TB</block>
  <block id="7ba1b40b5eed0a67df50aa00c907f9ac" category="cell">18 TB</block>
  <block id="23f86ea0b6ba63be94542d36e1d0ac20" category="cell">1975 TB</block>
  <block id="01dbb09e4b3f7243c1cae305daf2972a" category="cell">5927 TB</block>
  <block id="547259566f92db3383cbd2575b9d68c1" category="cell">7902 TB</block>
  <block id="585389cefc924819e7ab6d5b7eba5f03" category="paragraph">衍生架構的設計與效能差異：</block>
  <block id="f45c646cffcf39011c125e7523fa9149" category="summary">高容量建置區塊的部署變化。</block>
  <block id="fc6e06f3e4cfc328095f04c8f44c28f1" category="paragraph">標準BeeGFS解決方案部署指南概述高效能工作負載需求的程序與建議。想要滿足高容量需求的客戶、應觀察此處列出的部署與建議差異。</block>
  <block id="cbfb14f470701bf93424d757c624369a" category="section-title">控制器</block>
  <block id="174e6193fff9ed7c9b1839367e007f13" category="paragraph">對於大容量建置區塊、EF600控制器應更換為EF300控制器、每個控制器均安裝Cascade HIC以進行SAS擴充。每個區塊節點在陣列機箱中會有最少數量的NVMe SSD、用於BeeGFS中繼資料儲存設備、並會附加到擴充機櫃、其中會有NL-SAS HDD用於BeeGFS儲存磁碟區。</block>
  <block id="1ec9226d3745f2995d2686d2450831c7" category="paragraph">「檔案節點對區塊」節點組態保持不變。</block>
  <block id="af932b84cc0c8562c0e572647564048f" category="section-title">磁碟機放置</block>
  <block id="f96a95c482225ca6a9b4c17bfa47d918" category="paragraph">BeeGFS中繼資料儲存設備的每個區塊節點至少需要4個NVMe SSD。這些磁碟機應放置在機箱最外側的插槽中。</block>
  <block id="fdd528ca6f274d102819b008b189961c" category="section-title">擴充托盤</block>
  <block id="6627fde89324d2cbb6afd245e3d32d35" category="paragraph">大容量建置區塊的大小可為每個儲存陣列配備1至7個60個磁碟機擴充支架。</block>
  <block id="80b4ce0c4b11e4d8c7c4a14614b871f7" category="inline-link-macro">請參閱EF300磁碟機櫃纜線</block>
  <block id="25ada85328148d5356ce4edd989b1f40" category="paragraph">如需連接每個擴充托盤的說明、 <block ref="8c170f7da852d665db7cd9113b2ed6bb" category="inline-link-macro-rx"></block>。</block>
  <block id="0607ff4a53c90b270dd9fd9fce5c3d92" category="sidebar">大容量選項</block>
  <block id="23bc11ca7e09a55b459ef424efb98c36" category="summary">使用PC檢視叢集的狀態。</block>
  <block id="d4c39d91a1df6c7a7094c35722ec3ed5" category="doc">檢查叢集的狀態</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="section-title">總覽</block>
  <block id="b6330a3d35150021353dc39d5bf1899a" category="paragraph">執行中<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 從任何叢集節點、都是查看叢集整體狀態及每個資源狀態（例如BeeGFS服務及其相依性）的最簡單方法。本節將說明您在的輸出中所能找到的內容<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 命令。</block>
  <block id="a58022af0d3ce83b3b4031643fcdb7be" category="section-title">瞭解輸出來源<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block></block>
  <block id="24b70b7dc179eb742a98eca1b4c954b3" category="paragraph">執行<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 在任何叢集服務（起搏器和電暈器同步）啟動的叢集節點上。輸出頂端會顯示叢集摘要：</block>
  <block id="9e1d70fa0d8e4964c3bd135b73fa8375" category="paragraph">以下章節列出叢集中的節點：</block>
  <block id="ce0c86ab66a5ecdcc820da60194c7abc" category="paragraph">這特別代表任何處於待命或離線狀態的節點。待命中的節點仍在參與叢集、但標記為不符合執行資源的資格。離線的節點表示叢集服務未在該節點上執行、可能是因為手動停止、或是因為節點已重新開機/關機。</block>
  <block id="39dd7b2f17eda84e2e8059bb568493c9" category="admonition">當節點初次啟動時、叢集服務將會停止、需要手動啟動、以避免意外將資源還原至不正常的節點。</block>
  <block id="cbc566d6b815d43dd99c76ca8f2fd4f8" category="paragraph">如果節點因為非管理原因（例如故障）而處於待命或離線狀態、則會在節點狀態旁以括弧顯示其他文字。例如、如果隔離功能已停用、而資源遇到您將會看到的故障<block ref="1db3c4bcbb494ae3b1b2e86c57842a69" prefix=" " category="inline-code"></block>。另一個可能的狀態是<block ref="3fd6d1573d7af30709095c1a01f1fdd9" prefix=" " category="inline-code"></block>（這會短暫地被視為節點正在被圍起來、但如果隔離失敗、表示叢集無法確認節點狀態、則會持續存在（這可能會封鎖其他節點上的資源啟動）。</block>
  <block id="56cfcb8bfa2e43de0547ffbf4a2edd0e" category="paragraph">下一節顯示叢集中所有資源及其狀態的清單：</block>
  <block id="45caf63eb71a242bf4ef160a8aeeb2a4" category="paragraph">與節點類似、如果資源有任何問題、資源狀態旁會顯示其他文字、並以括弧表示。例如、如果心臟起搏器要求資源停止、但無法在分配的時間內完成、則心臟起搏器會嘗試隔離節點。如果禁用隔離功能或隔離操作失敗，則資源狀態將是<block ref="bb38152bf8b813a142650a06ad87363e" prefix=" " category="inline-code"></block> 而起搏器將無法在不同的節點上啟動。</block>
  <block id="028c86c0d3bdc4a78f8123e9fad41847" category="paragraph">值得一提的是、BeeGFS HA叢集運用了許多BeeGFS最佳化的自訂OCF資源代理程式。特別是BeeGFS監視器、負責在特定節點上的BeeGFS資源無法使用時觸發容錯移轉。</block>
  <block id="0532f63b7151a82cb4b5e3351e2371d0" category="summary">正常停止及啟動HA叢集。</block>
  <block id="7479b021f04933331bfad4de007ca0c2" category="doc">停止並啟動叢集</block>
  <block id="2b884da4a956e42f63bc07b5d20c50b1" category="paragraph">本節說明如何正常關機並重新啟動BeeGFS叢集。可能需要的範例案例包括電力維護或資料中心或機架之間的移轉。</block>
  <block id="c61d5048d10a534a03e7687782b475e2" category="paragraph">如果您基於任何原因需要停止整個BeeGFS叢集並關閉所有服務執行：</block>
  <block id="3ad6e9988864aeae2ef386345946dc6d" category="inline-link-macro">容錯移轉</block>
  <block id="9e94ba8f70ed52b0ae6c2a8725f97a9f" category="paragraph">若要在所有節點上啟動叢集服務和資源、請執行下列步驟：</block>
  <block id="80bd5673b361d19dc46e6b882f98b061" category="paragraph">或在特定節點上啟動服務：</block>
  <block id="56ad9ec5396c5f035697d1e62c4b0926" category="paragraph">此時請執行<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 並驗證叢集和BeeGFS服務是否在所有節點上啟動、以及服務是否在您預期的節點上執行。</block>
  <block id="9cdd9805effd30bec624c806fd980309" category="summary">在叢集節點之間移動BeeGFS服務。</block>
  <block id="f6054493b235622c6d85c56597db1eb1" category="doc">容錯移轉和容錯回復服務</block>
  <block id="2c053c4f4aa73d509803b712a335712b" category="paragraph">BeeGFS服務可在叢集中的節點之間進行容錯移轉、以確保當節點發生故障或需要執行計畫性維護時、用戶端能夠繼續存取檔案系統。本節說明系統管理員在從故障中恢復後、或在節點之間手動移動服務時、如何修復叢集。</block>
  <block id="07216bb55061288a2fa29cda954742e3" category="section-title">容錯移轉與容錯回復</block>
  <block id="23709dbf750335ca35bb098cb16932f2" category="section-title">容錯移轉（計畫性）</block>
  <block id="805e61a2ff2aebdab58587660993241c" category="paragraph">一般而言、當您需要將單一檔案節點離線以進行維護時、您會想要從該節點移動（或耗盡）所有BeeGFS服務。您可以先將節點置於待命狀態、以達成此目標：</block>
  <block id="ecbf8d7e7d9f1eb0a529231cebd2199c" category="paragraph"><block ref="45235c2d84b11e465f5ed5176cc9fc73" prefix="" category="inline-code"></block></block>
  <block id="badd2ea7f58914039bb51471883e3461" category="paragraph">使用驗證之後<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 所有資源都已在替代檔案節點上重新啟動、您可以視需要關機或對節點進行其他變更。</block>
  <block id="1343bdd328b646934d900b04ee8ba9bd" category="section-title">容錯回復（在計畫性容錯移轉之後）</block>
  <block id="746bffd8542d5a995ff4e29343881c45" category="paragraph">當您準備好將BeeGFS服務還原至首選節點時、請先執行<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 並在「Node List（節點清單）」中驗證狀態是否為「standby（待命）」。如果節點重新開機、則會顯示為離線、直到叢集服務上線為止：</block>
  <block id="91e6580245db1e731f9ba78076973736" category="paragraph">節點上線後、請使用以下功能將其從待命模式中移出：</block>
  <block id="040901cb649ee5383b238c42c7746fca" category="paragraph">最後、將所有BeeGFS服務重新部署回其偏好的節點：</block>
  <block id="6ebfd7088ae3d5d766caee83ef99e7bc" category="section-title">容錯回復（非計畫性容錯移轉之後）</block>
  <block id="e09245effc62059e51f926fad603e413" category="inline-link-macro">疑難排解</block>
  <block id="364ed45bbda2e3fd57309efe24fc0d55" category="paragraph">當節點在非計畫性（或計畫性）重新開機之後開機時、叢集服務不會設定為自動啟動、因此您必須先使用以下項目使節點上線：</block>
  <block id="f00b2994ca5cfc6ab0328a63736caa02" category="paragraph">接下來清除任何資源故障並重設節點的隔離記錄：</block>
  <block id="ac161f403f36186463574a43968aa121" category="paragraph">請在中驗證<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 節點處於線上且健全狀態。根據預設、BeeGFS服務不會自動容錯回復、以避免意外將資源移回不正常的節點。當您準備好時、將叢集中的所有資源、以下列方式傳回其偏好的節點：</block>
  <block id="a65e0cef92147365de773d870438a30d" category="section-title">將個別BeeGFS服務移至替代檔案節點</block>
  <block id="606a28acf3a90904d7e27f3497573da7" category="section-title">將BeeGFS服務永久移至新的檔案節點</block>
  <block id="8f56c19ef179745c1437a4f477337649" category="paragraph">如果您想要永久變更個別BeeGFS服務的偏好檔案節點、請調整「Ansible」（可執行）資源清冊、使偏好的節點列在第一位、然後重新執行「Ansible」（可執行）資源清冊。</block>
  <block id="346788f496d57b1e768d1dfaccdb3660" category="section-title">暫時將BeeGFS服務移至替代檔案節點</block>
  <block id="bad9cbcf702b276e1564c24e67ad301c" category="paragraph">一般而言、如果某個節點正在進行維護、您會想要使用[Failover and failover countures]（#Failover與容錯回復步驟）（#容 錯移轉與容錯回復）將所有服務移出該節點。</block>
  <block id="0a51cf78eac085426260a02c70378519" category="paragraph">如果由於某些原因、您確實需要將個別服務移至不同的檔案節點執行：</block>
  <block id="15bda9336e0e061125e3b40fe7bfbb0f" category="paragraph">若要將BeeGFS服務移回其慣用節點、請先清除暫用資源限制（視多項服務需要重複此步驟）：</block>
  <block id="d5c46792adbb43a012cbc1e858dc8bf4" category="paragraph">當您準備好將服務實際移回偏好的節點時、請執行：</block>
  <block id="05ccfd1bb05ec0cb0ad0dbc5cfa2b32d" category="paragraph">請注意、此命令會重新部署任何不再具有暫用資源限制的服務、而這些服務並未位於偏好的節點上。</block>
  <block id="b64fbf2b70c0da78d7c165d234dbde59" category="summary">如果原始伺服器故障、請更換檔案節點。</block>
  <block id="813789e46622daf96cc8a246b7123900" category="doc">取代檔案節點</block>
  <block id="7d8e819a8720821d1bda4944e3b284f8" category="paragraph">這是更換叢集中檔案節點所需步驟的總覽。這些步驟假設檔案節點因為硬體問題而失敗、並以新的相同檔案節點取代。</block>
  <block id="0ca6560aa88bd22fa1b3bb69d8594555" category="section-title">步驟：</block>
  <block id="237c1293f678bb3fb45da7ff985bc6ff" category="list-text">實體更換檔案節點、並將所有纜線恢復至區塊節點和儲存網路。</block>
  <block id="2fcfb8cbd69fbc9fbfe292049243f520" category="list-text">在檔案節點上重新安裝作業系統、包括新增Red Hat訂閱。</block>
  <block id="54bf3b134460f90ada283da98dfe7f55" category="list-text">在檔案節點上設定管理和BMC網路功能。</block>
  <block id="e07337279837c08243349fd1812b45ad" category="list-text">如果主機名稱、IP、PCIe對邏輯介面對應、或是新檔案節點的其他任何變更、請更新Ansible詳細目錄。如果節點被相同的伺服器硬體所取代、而且您使用的是原始網路組態、則通常不需要這麼做。</block>
  <block id="1092a09068da1d54ef98835a92b7ae93" category="list-text">例如、如果主機名稱已變更、請建立（或重新命名）節點的庫存檔案 <block ref="68c99491876298ad1740f875d0009eb1" prefix="(" category="inline-code"></block>）、然後在Ansible庫存檔案中 <block ref="d28e452e49fc926f32af1d87afcff3ce" prefix="(" category="inline-code"></block>）、將舊節點的名稱改為新節點名稱：</block>
  <block id="4e77e3629d6cf2dd24d01cd0816444dc" category="list-text">從叢集中的其他節點之一移除舊節點：<block ref="0b3c8b6f1b9e3417f6658a2d7bf57e50" prefix=" " category="inline-code"></block>。</block>
  <block id="80b3f35b9a09098f23ac89ae2b86b045" category="admonition">執行此步驟之前、請勿繼續。</block>
  <block id="b13bbcb9af62574d6f02dd11fb1e8467" category="list-text">在Ansible控制節點上：</block>
  <block id="bdd8d1913bd5c9a453285898025b96c3" category="list-text">移除舊的SSH金鑰：</block>
  <block id="357f3d871a04ba99dca4088160a070c7" category="list-text">將無密碼SSH設定為取代節點：</block>
  <block id="7142a43bd39c703832e1dedd5cc1781d" category="list-text">重新執行Ansible playbook以設定節點並將其新增至叢集：</block>
  <block id="cb6fdf37da197d680c43c0f6f18ad11d" category="list-text">此時、請執行<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 並確認已列出更換的節點、並正在執行服務。</block>
  <block id="7728706b8b42de0081920e7246a76547" category="summary">避免HA叢集意外回應環境中的預期變更。</block>
  <block id="e1fee8e589d1f622a7c4194531dd6d51" category="doc">將叢集置於維護模式</block>
  <block id="de51662eceb9c88ae773c201eb0345d1" category="paragraph">將叢集置於維護模式會停用所有資源監控、並防止心臟起搏器移動或以其他方式管理叢集中的資源。所有資源都會繼續在其原始節點上執行、無論是否有暫時性的故障情況、都無法存取這些資源。建議/實用的案例包括：</block>
  <block id="ea4d028cbc39da373f2405d19e55ab0f" category="list-text">可能會暫時中斷檔案節點與BeeGFS服務之間的連線的網路維護。</block>
  <block id="fb9f2ee248fa11ccfb854f09fcda2a80" category="list-text">區塊節點升級。</block>
  <block id="92a6e3227dfe7be15777e64043fb613f" category="list-text">檔案節點作業系統、核心或其他套件更新。</block>
  <block id="6c1cf36b91fdf2375e857652291bab2e" category="paragraph">一般而言、將叢集手動置於維護模式的唯一理由、是避免它對環境中的外部變更做出回應。如果叢集中的個別節點需要實體修復、請勿使用維護模式、只要依照上述程序將該節點置於待命狀態即可。請注意、重新執行Anunible會自動將叢集置於維護模式、以利進行大部分的軟體維護、包括升級和組態變更。</block>
  <block id="bbf6745fae83e12806200feeb795f0ef" category="paragraph">若要檢查叢集是否處於維護模式、請執行：</block>
  <block id="4ecbc8384cde54344112e6ab08db42be" category="paragraph">您可以執行PCS狀態並確保所有資源都顯示為「（Unmanaged）」、以進行驗證。若要使叢集離開維護模式執行：</block>
  <block id="9afe1c93907babebeb4d7a466e216a3e" category="summary">新增或移除叢集的建置區塊。</block>
  <block id="da82c1c93eafcb34930ae3da89361e1e" category="doc">擴充或縮小叢集</block>
  <block id="c8fb5d104008cab3ab8a229181f5dfac" category="paragraph">本節說明各種考量事項和選項、以調整BeeGFS HA叢集的大小。一般而言、叢集大小是透過新增或移除建置區塊來調整、而建置區塊通常是以HA配對形式設定兩個檔案節點。如果需要、也可以新增或移除個別的檔案節點（或其他類型的叢集節點）。</block>
  <block id="711c6d6edaed786b4dc0203b75460778" category="section-title">將建置區塊新增至叢集</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">考量</block>
  <block id="f29b9abf87c880782cf8c378e24a1668" category="paragraph">透過新增額外的建置區塊來擴充叢集、是一項簡單的程序。開始之前、請記住每個HA叢集中叢集節點的最小和最大數量限制、並決定是否要將節點新增至現有HA叢集、或是建立新的HA叢集。通常每個建置區塊都由兩個檔案節點組成、但每個叢集的節點數最少為三個節點（以建立仲裁）、建議（測試）最多為十個節點。在進階案例中、您可以新增單一「tiebreaker」節點、而在部署雙節點叢集時、該節點不會執行任何BeeGFS服務。如果您正在考慮進行這類部署、請聯絡NetApp支援部門。</block>
  <block id="662a466b951b1af4fe3b4c3fd2e0370c" category="paragraph">在決定如何擴充叢集時、請謹記這些限制和任何預期的未來叢集成長。例如、如果您有六個節點叢集、需要再新增四個節點、建議您只是啟動一個新的HA叢集。</block>
  <block id="2b988a3f29ebee8dccd80147a22c1bc6" category="admonition">請記住、單一BeeGFS檔案系統可由多個獨立的HA叢集組成。如此一來、檔案系統就能繼續擴充、遠遠超過基礎HA叢集元件的建議/硬限制。</block>
  <block id="c9e209235fa71f94c6ca46692bb327a3" category="inline-link-macro">使用自訂架構</block>
  <block id="0a9e15a6a510b24d4e6ac91c02152457" category="paragraph">建立正確的檔案之後、只需要使用以下命令重新執行自動化作業：</block>
  <block id="8d695d37ced4690199d537aed9d4bd55" category="section-title">從叢集移除建置區塊</block>
  <block id="b68ea55d7263db6f96db88774fb7b864" category="paragraph">當您需要淘汰建置區塊時、請謹記下列幾點考量事項：</block>
  <block id="c26cc9593863fbf09a98a7c1809d4501" category="list-text">此建置區塊中執行哪些BeeGFS服務？</block>
  <block id="64e344a53d6a50c0b641de71dcc0d0e6" category="list-text">是否只有檔案節點即將淘汰、而且區塊節點應附加至新的檔案節點？</block>
  <block id="de3bc01ba61503e7b8699b9318d0fd0b" category="list-text">如果整個建置區塊都已淘汰、資料是否應該移至新的建置區塊、分散到叢集中的現有節點、或移至新的BeeGFS檔案系統或其他儲存系統？</block>
  <block id="b6bb45be6629ebff573a5364d6abba3e" category="list-text">這種情況是否會在停電期間發生、還是應該在不中斷營運的情況下進行？</block>
  <block id="9b0ed7965704c34f1d45d89e7afe7bfc" category="list-text">建置區塊是否正在使用中、或主要包含不再使用的資料？</block>
  <block id="2f1f874ab85cc95aedb0e31639ddd1be" category="paragraph">由於可能的起點和所需的終端狀態各不相同、請聯絡NetApp支援部門、以便我們根據您的環境和需求、找出並協助實作最佳策略。</block>
  <block id="1819205ce38618cd2752bb84e2b73e58" category="summary">BeeGFS HA叢集疑難排解。</block>
  <block id="d60c463bb4096f3ed4bd1618626dfe10" category="doc">疑難排解</block>
  <block id="b162a91192a0936d7593cb252c65dfd8" category="paragraph">本節將說明如何調查及疑難排解在操作BeeGFS HA叢集時可能發生的各種故障和其他情況。</block>
  <block id="40327cd11d60bd1f114b3e4566f94e50" category="section-title">疑難排解指南</block>
  <block id="e1c58302972da23d09a5ab5fe221a170" category="section-title">正在調查意外的容錯移轉</block>
  <block id="4fbaa99fc13cc42ed40e8b05969de8fb" category="paragraph">當節點被意外隔離、其服務移至另一個節點時、第一步應該是查看叢集是否在底部顯示任何資源故障<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>。通常、如果成功完成隔離並在另一個節點上重新啟動資源、則不會出現任何情況。</block>
  <block id="31288ba37f67baa9a96377c197fd16b4" category="paragraph">一般而言、下一步是使用來搜尋整個系統記錄<block ref="eed23a3d2310f43954a09887cb36b398" prefix=" " category="inline-code"></block> 在其餘任一檔案節點上（所有節點上的心臟起搏器記錄都會同步）。如果您知道故障發生的時間、可以在故障發生前立即開始搜尋（建議至少提前10分鐘）：</block>
  <block id="adc8528fced336e7a819071c746b5738" category="paragraph">下列各節顯示您可以在記錄中加入的一般文字、以進一步縮小調查範圍。</block>
  <block id="a6dea15cd908ef20a94b7b92df902f0b" category="section-title">調查/解決的步驟</block>
  <block id="d418f50c5ddea28b4ca856017b36cb20" category="section-title">步驟1：檢查BeeGFS監視器是否偵測到故障：</block>
  <block id="a0d295ceecafcdade2e77c52fee836e0" category="paragraph">如果容錯移轉是由BeeGFS監控器觸發、您應該會看到錯誤（如果沒有、請繼續下一步）。</block>
  <block id="ba35f78b5ee9757310a818131880e7ba" category="admonition">不同於來自心臟起搏器的記錄、BeeGFS服務的記錄不會分散到叢集中的所有節點。若要調查這些故障類型、必須從發生故障的原始節點取得記錄。</block>
  <block id="e7ed0a662a65a2b9a77688262294bdeb" category="paragraph">監視器可能回報的問題包括：</block>
  <block id="7cdeb72a25ab193e904385b516b1b346" category="list-text">無法存取目標！</block>
  <block id="b5937b98653f70b6902650183cf4ec74" category="list-text">說明：表示無法存取區塊磁碟區。</block>
  <block id="2fe85519f178203eb9e17cd7d958eff5" category="list-text">疑難排解：</block>
  <block id="a337b1ea21fcd18ca666a6d53d5d43cd" category="list-text">如果服務也無法在替代檔案節點上啟動、請確認區塊節點正常運作。</block>
  <block id="1a92a4c3328c821522ae4b4f7b7939f4" category="list-text">請檢查是否有任何實體問題、以免從此檔案節點存取區塊節點、例如發生故障的InfiniBand介面卡或纜線。</block>
  <block id="07d73b1c441d1587365e83eab249cc0e" category="list-text">無法連線到網路！</block>
  <block id="640de5e4317b2b6b4cdfc75056c11dc1" category="list-text">說明：用戶端用來連線至此BeeGFS服務的介面卡均未連線。</block>
  <block id="a6fe0c48e93a5942e6a707553dc58b72" category="list-text">如果有多個/所有檔案節點受到影響、請檢查網路上是否有故障用於連接BeeGFS用戶端和檔案系統。</block>
  <block id="89af81e10eaa132cd26657feb6c0255d" category="list-text">請檢查是否有任何實體問題、例如會使此檔案節點無法存取用戶端、例如發生故障的InfiniBand介面卡或纜線。</block>
  <block id="74a668540699bf39afc1015b6ce839e7" category="list-text">BeeGFS服務未啟用！</block>
  <block id="d297ccf512793d172de0cfd4051e2e96" category="list-text">說明：BeeGFS服務意外停止。</block>
  <block id="4937184e80e5bebefae7244965d351b9" category="list-text">在報告錯誤的檔案節點上、檢查受影響BeeGFS服務的記錄、以查看是否報告當機。如果發生這種情況、請利用NetApp支援開啟案例、以便調查當機事件。</block>
  <block id="feec20659fe99c02d4979b8ad026cc97" category="list-text">如果BeeGFS記錄中沒有報告錯誤、請檢查日誌記錄、查看系統是否記錄服務停止的原因。在某些情況下、BeeGFS服務可能沒有機會在程序終止之前記錄任何訊息（例如有人執行）<block ref="c287e2fa9b978b64df6b25bc14f4ebad" prefix=" " category="inline-code"></block>）。</block>
  <block id="6c187654c83a0705225e629e5ef0e690" category="section-title">步驟2：檢查節點是否意外離開叢集</block>
  <block id="48de5b8ba61031259301e7dcfed5f30f" category="paragraph">如果節點發生災難性硬體故障（例如主機板當機）、或發生核心異常或類似軟體問題、BeeGFS監視器將不會報告錯誤。請改為尋找主機名稱、您應該會看到來自心臟起搏器的訊息、指出節點意外遺失：</block>
  <block id="e2c890774d7c7d0dbdd940e9e70a6e38" category="section-title">步驟3：驗證起搏器是否能夠隔離節點</block>
  <block id="233ac49c948b907a2f3ece7ba249837e" category="paragraph">在所有情況下、您都應該看到心臟起搏器試圖將節點隔離、以驗證它實際上是否離線（確切的訊息可能會因隔離原因而異）：</block>
  <block id="43878a52c3fd9ee95d536dd53db82be8" category="paragraph">如果隔離動作成功完成、您會看到如下訊息：</block>
  <block id="c9fc2871ff88666659a1639b7bc7a907" category="paragraph">如果隔離動作因為某種原因而失敗、BeeGFS服務將無法在另一個節點上重新啟動、以避免資料毀損的風險。如果隔離設備（PDU或BMC）無法存取或設定錯誤、則這是需要個別調查的問題。</block>
  <block id="824b5f569e1c282ba489e1d3fe24611f" category="section-title">處理失敗的資源動作（可在PCS狀態的底部找到）</block>
  <block id="ac9c4f2d9dc79954795119e7ac4da835" category="inline-link-macro">非計畫性容錯移轉之後的容錯回復</block>
  <block id="afdd1f65895e11b4a9ab295926e39116" category="paragraph">否則、通常只會有兩種情況出現「失敗的資源動作」。</block>
  <block id="43c78de0154f6f48f749527f62bfd41c" category="section-title">案例1：使用隔離代理程式偵測到暫時性或永久性問題、然後重新啟動或移至其他節點。</block>
  <block id="b06e37c96b80ada3e042c0997f9d54a6" category="paragraph">有些屏障代理程式比其他代理程式更可靠、而且每個代理程式都會實作自己的監控方法、以確保屏障設備已就緒。尤其是RedfISH屏障代理程式已被視為回報失敗的資源動作、例如下列動作、即使它仍會顯示為「已啟動」：</block>
  <block id="13ff1974a31501c1a357c51cda2ff685" category="paragraph">回報特定節點上失敗資源動作的隔離代理程式、預期不會觸發該節點上執行BeeGFS服務的容錯移轉。只需在相同或不同的節點上自動重新啟動即可。</block>
  <block id="549252a4b6f49c6993519d622a3e9c5d" category="paragraph">解決步驟：</block>
  <block id="51f376a71f801714c5dbbdfa83541a86" category="list-text">如果隔離代理程式持續拒絕在所有或一部分節點上執行、請檢查這些節點是否能夠連線至隔離代理程式、並確認隔離代理程式已在「Ansible」（可隔離）資源清冊中正確設定。</block>
  <block id="1ae58017c838c0e0ed1e3299e7c683d5" category="list-text">例如、如果RedfISH（BMC）屏障代理程式與負責隔離的節點相同、而且OS管理和BMC IP位於同一個實體介面上、則某些網路交換器組態將不允許兩個介面之間進行通訊（以防止網路迴圈）。根據預設、HA叢集會嘗試避免在其負責隔離的節點上放置隔離代理程式、但在某些情況/組態中可能會發生這種情況。</block>
  <block id="217b4320fb1b29ae95bb478645ec6ba8" category="list-text">一旦所有問題都解決（或問題似乎是暫時性的）、請執行<block ref="b292ce60014c1c0e30e4db1f177243d3" prefix=" " category="inline-code"></block> 以重設失敗的資源動作。</block>
  <block id="5e2b597167eb07cb64833681dcd53f6f" category="section-title">案例2：BeeGFS監視器偵測到問題並觸發容錯移轉、但由於某些原因、資源無法在次要節點上啟動。</block>
  <block id="cf41377d64715247d22bef68c671d9dc" category="paragraph">如果啟用了隔離功能、且資源未被封鎖、無法在原始節點上停止（請參閱「待命（故障時）」的疑難排解一節）、最可能的原因包括在次要節點上啟動資源時發生問題、因為：</block>
  <block id="ecbc2fa36aa8e4ccfd535f315ff5a1bc" category="list-text">次要節點已離線。</block>
  <block id="9fc9f95992286a812b388e7c2def3cde" category="list-text">實體或邏輯組態問題使次要實體無法存取做為BeeGFS目標的區塊磁碟區。</block>
  <block id="1ffc42a5bdee5039a96dffea4901017d" category="list-text">針對失敗資源動作中的每個項目：</block>
  <block id="fb6dc7c10276db82fd903122c9aa6780" category="list-text">確認失敗的資源動作是啟動作業。</block>
  <block id="6ec17a9b3e2983ef695c793467180ed8" category="list-text">根據指示的資源和故障資源動作中指定的節點：</block>
  <block id="15cdec9d63ec68e3300810746f7c66c5" category="list-text">尋找並修正任何會使節點無法啟動指定資源的外部問題。例如、如果BeeGFS IP位址（浮動IP）無法啟動、請確認至少有一個必要的介面已連線/連線、並連接至正確的網路交換器。如果BeeGFS目標（區塊裝置/ E系列磁碟區）故障、請驗證與後端區塊節點的實體連線是否如預期連接、並驗證區塊節點是否正常。</block>
  <block id="66f0528ed6c9cd01b92486aef88bca25" category="list-text">如果沒有明顯的外部問題、而且您想找出造成此事件的根本原因、建議您先向NetApp支援部門提出案例進行調查、然後再繼續進行、因為下列步驟可能會使根本原因分析（RCA）變得具有挑戰性/不可能。</block>
  <block id="3f79d63c01f8e573f1485641a01784f5" category="list-text">解決任何外部問題之後：</block>
  <block id="0fc5581e5e588d921d0659c6725c8bb7" category="list-text">從Ansible inventory.yml檔案中註解任何無法運作的節點、然後重新執行完整的可執行教戰手冊、以確保所有邏輯組態都已在次要節點上正確設定。</block>
  <block id="837bc4d502bb7c6e4bb1557e18c0d778" category="list-text">附註：當節點正常運作且您已準備好容錯回復時、請別忘了取消註釋這些節點、然後重新執行教戰手冊。</block>
  <block id="7198cccc6bdd4a3f49c6f73aecb797e3" category="list-text">或者、您也可以嘗試手動恢復叢集：</block>
  <block id="6db4e0b9e5f080b1d47896ae71390476" category="list-text">使用下列方法將任何離線節點重新連線：<block ref="2e6a9bc781ade1dd9ff94654afbc34bd" prefix=" " category="inline-code"></block></block>
  <block id="0292b418af30a3106696db822913b4fd" category="list-text">使用下列方法清除所有失敗的資源動作：<block ref="b292ce60014c1c0e30e4db1f177243d3" prefix=" " category="inline-code"></block></block>
  <block id="8177fac49f20d8c76b3afe0ead42fe89" category="list-text">執行PCS狀態、並驗證所有服務是否如預期啟動。</block>
  <block id="0a584da0f19f70578ae419f6c3de1804" category="list-text">如有需要、請執行<block ref="31b8a2d98f4312a9e7b7ac373d9cca6a" prefix=" " category="inline-code"></block> 可將資源移回其首選節點（如果可用）。</block>
  <block id="b34551a00d39152d67273fc8e1fc4a52" category="section-title">常見問題</block>
  <block id="e728c5fcf9b4ab50066868a6b637a709" category="section-title">BeeGFS服務不會在要求時進行容錯移轉或容錯回復</block>
  <block id="07f7fa9ba2b669bb79d185d75b136e12" category="paragraph">*可能的問題：* The<block ref="960b2f261f11ad1988eea18a4ecc34c9" prefix=" " category="inline-code"></block> 執行命令已執行、但從未成功完成。</block>
  <block id="844f68b15c1713a6baa4b0ec6aa225df" category="paragraph">*如何檢查：*執行<block ref="5a4892b5d40be89d668321c86afd400b" prefix=" " category="inline-code"></block> 並使用ID檢查任何位置限制<block ref="2fcf6d99d76b884a404fa4e359bf2b59" prefix=" " category="inline-code"></block>。</block>
  <block id="9e43dd5b3ec5864eaeb73e8dc9a4a445" category="paragraph">*如何解決：*執行<block ref="3132f7183339b30b65d4c94ec98e59c6" prefix=" " category="inline-code"></block> 然後重新執行<block ref="5a4892b5d40be89d668321c86afd400b" prefix=" " category="inline-code"></block> 以驗證是否移除額外的限制。</block>
  <block id="1950007e622fca4ac1ecb2dca5c5b0ca" category="section-title">當隔離功能停用時、PC狀態中的一個節點會顯示「待命（故障時）」</block>
  <block id="7f73632b6cb42dac5be42f899b8f3075" category="paragraph">*可能的問題：*起搏器無法成功確認故障節點上的所有資源均已停止。</block>
  <block id="62e46498125737c7dea16f67e65f663b" category="paragraph">*如何解決：*</block>
  <block id="2443318955c1e9ac3d484a3a95366847" category="list-text">執行<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 並檢查是否有任何未「啟動」的資源、或是在輸出底部顯示錯誤、並解決任何問題。</block>
  <block id="fde999fddc7a609f9b1112a0d74b811e" category="list-text">可使節點恢復聯機運行<block ref="22c6d25b4cef458448bf6ec7b072cfdc" prefix=" " category="inline-code"></block>。</block>
  <block id="0b566700630488a9f296399143b71b21" category="section-title">在發生非預期的容錯移轉之後、啟用隔離功能時、資源會在PCS狀態中顯示「已啟動（故障時）」</block>
  <block id="d82216004991d1ee26d8a39d995fd037" category="paragraph">*可能的問題：*發生觸發容錯移轉的問題、但心臟起搏器無法驗證節點是否已被隔離。這可能是因為屏障設定錯誤、或屏障代理程式發生問題（例如：PDU已從網路中斷連線）。</block>
  <block id="d9377bb89128ecc3849d522366a1bc0e" category="list-text">驗證節點是否確實關機。</block>
  <block id="26cf4911b5df9522d0b71ba51aa2797f" category="admonition">如果您指定的節點實際上並未關閉、而是執行叢集服務或資源、則會發生資料毀損/叢集故障。</block>
  <block id="eb7adca6805c8d7130032cd721d69726" category="list-text">手動確認隔離：<block ref="5448b9bc8364c2b3f706918cda259325" prefix=" " category="inline-code"></block></block>
  <block id="1c0ee784ecf6c6dae18bd342462b0460" category="paragraph">此時、服務應完成容錯移轉、並在另一個正常節點上重新啟動。</block>
  <block id="144c35532a298805242b9831523175df" category="section-title">常見疑難排解工作</block>
  <block id="e78d742ead1e3187a4781d20c9f53692" category="section-title">重新啟動個別BeeGFS服務</block>
  <block id="5bd968465c3ccdeb171ce7ade4907d6f" category="paragraph">通常、如果需要重新啟動BeeGFS服務（例如為了協助變更組態）、則應更新「Ansible」（可存取）清單並重新執行播放手冊。在某些情況下、可能需要重新啟動個別服務、以加快疑難排解的速度、例如變更記錄層級、而不需要等待整個方針執行。</block>
  <block id="57f3d071d972e615cf2b21fc580b3981" category="admonition">除非在Ansible庫存中也新增任何手動變更、否則下次執行Ansible教戰手冊時將會還原這些變更。</block>
  <block id="e6ec687230170238fbff13af150aac11" category="section-title">選項1：系統d控制的重新啟動</block>
  <block id="8bd682031ba8c79bdc3518a66ecb5f1d" category="paragraph">如果BeeGFS服務可能無法以新組態正確重新啟動、請先將叢集置於維護模式、以防止BeeGFS監視器偵測到服務停止、並觸發不想要的容錯移轉：</block>
  <block id="e445f63138e0cf42d48b191e7212fba5" category="paragraph">如有需要、請在進行任何服務組態變更<block ref="7b2e56941196b9587e16891bfbec2093" prefix=" " category="inline-code"></block> （範例：<block ref="e3cb2c4f0757837b4a51b638bed0ec4d" prefix=" " category="inline-code"></block>）然後使用systemd重新啟動：</block>
  <block id="fc618f42db9108f58f9c7fc76181a551" category="paragraph">範例：<block ref="d1adfe915ae154bb103f4a2e2d28183d" prefix=" " category="inline-code"></block></block>
  <block id="b8a88c45f80fb4ad388f6cfe0958b272" category="section-title">選項2：心律調整器控制的重新啟動</block>
  <block id="b28d67df7faeb6762f0262ed21fd5c44" category="paragraph">如果您不擔心新的組態可能會導致服務意外停止（例如、只是變更記錄層級）、或是處於維護期間、不擔心停機、您只需重新啟動BeeGFS監控器、即可取得您要重新啟動的服務：</block>
  <block id="1ea90ec9ad2232dc8536efa244b502cd" category="paragraph">例如、若要重新啟動BeeGFS管理服務：<block ref="19191ce739dde363bc25ef750853010b" prefix=" " category="inline-code"></block></block>
  <block id="647328604bd666deba44b0caaea998a2" category="summary">瞭解如何在部署BeeGFS HA叢集之後管理這些叢集。</block>
  <block id="0aa1ffb15625f418cfc560deda2535bb" category="doc">概述、主要概念和術語</block>
  <block id="d051e95d54ee33ed5c79e05f582bab59" category="paragraph">本節適用於部署BeeGFS HA叢集之後、需要管理的叢集管理員。即使是熟悉Linux HA叢集的使用者、也應該徹底閱讀本指南、因為管理叢集的方式有許多差異、尤其是使用Ansible進行重新設定。</block>
  <block id="612b7c650263f39248b97e7e57b35a77" category="section-title">重要概念</block>
  <block id="db7e5dec439a7c83d48d86330a62e954" category="inline-link-macro">詞彙與概念</block>
  <block id="8961c26dabe98c278717f1cb0fc25fdc" category="paragraph">**叢集節點：*執行起搏器和電暈器同步服務的伺服器、並參與HA叢集。</block>
  <block id="e0a3a06b3c015009967896eb40327e82" category="paragraph">**檔案節點：*用於執行一或多個BeeGFS管理、中繼資料或儲存服務的叢集節點。</block>
  <block id="1985ebdeb71d83b6b551914e77b2b178" category="paragraph">**區塊節點：* NetApp E系列儲存系統、可為檔案節點提供區塊儲存。這些節點不會參與BeeGFS HA叢集、因為它們提供自己的獨立HA功能。每個節點包含兩個儲存控制器、可在區塊層提供高可用度。</block>
  <block id="31a3205f29074295100fad4351661826" category="paragraph">** BeeGFS服務：* BeeGFS管理、中繼資料或儲存服務。每個檔案節點都會執行一或多項服務、這些服務會使用區塊節點上的磁碟區來儲存其資料。</block>
  <block id="495f4cf25a1d9d4e5a1258aafbbf0c8d" category="paragraph">**建置區塊：*標準化部署BeeGFS檔案節點、E系列區塊節點、以及其上執行的BeeGFS服務、可簡化BeeGFS HA叢集/檔案系統的擴充、並遵循NetApp驗證架構。也支援自訂HA叢集、但通常採用類似的建置區塊方法來簡化擴充。</block>
  <block id="f1816719094f9c5af3f9f2666c1c5666" category="paragraph">** BeeGFS HA叢集：*一組可擴充的檔案節點、用於執行BeeGFS服務、並以區塊節點作為後盾、以高可用度的方式儲存BeeGFS資料。以業界公認的開放原始碼元件為基礎、採用Ansible進行包裝與部署。</block>
  <block id="830f6f39f3eb0533714fc986605bb0fc" category="paragraph">**叢集服務：*是指叢集內每個節點上執行的起搏器和電暈器同步服務。請注意、如果只需要兩個檔案節點、節點可能無法執行任何BeeGFS服務、只能以「tiebreaker」節點的形式參與叢集。</block>
  <block id="ac47f8eb4b50e1f3fefe94fafff761c2" category="paragraph">**叢集資源：*針對叢集中執行的每個BeeGFS服務、您將會看到BeeGFS監控資源、以及一個資源群組、其中包含BeeGFS目標、IP位址（浮動IP）及BeeGFS服務本身的資源。</block>
  <block id="25d0c377de7b7699ce796352723a7a41" category="paragraph">** Ansible：*軟體資源配置、組態管理及應用程式部署工具、以程式碼形式提供基礎架構。這是BeeGFS HA叢集的封裝方式、可簡化在NetApp上部署、重新設定及更新BeeGFS的程序。</block>
  <block id="53ece6444fc3a7adacd61f55a3d5e410" category="paragraph">** PCS：*叢集中任何檔案節點均提供命令列介面、用於查詢及控制叢集中節點和資源的狀態。</block>
  <block id="1ed63b060fea1b0497535f402b308312" category="section-title">通用術語</block>
  <block id="d3d43886ce330c5bc1abf87c9da84517" category="paragraph">**容錯移轉：*每個BeeGFS服務都有一個優先要執行的檔案節點、除非該節點故障。當BeeGFS服務在非慣用/次要檔案節點上執行時、就表示該服務正在進行容錯移轉。</block>
  <block id="360fc740d5a934107e93d720053a8a24" category="paragraph">*容錯回復：*將BeeGFS服務從非偏好的檔案節點移回偏好的節點。</block>
  <block id="1687b43e3f76609bd3a5dda1cdbd29b3" category="paragraph">** HA配對：*可存取相同區塊節點集的兩個檔案節點、有時稱為HA配對。這是整個NetApp常用的詞彙、用來指可「接管」彼此的兩個儲存控制器或節點。</block>
  <block id="3663bc32267b225ac55e52a4e99f2b3c" category="inline-link-macro">維護模式</block>
  <block id="e7f8a11794ad2275f244bec012ef84de" category="paragraph">** HA叢集：*執行BeeGFS服務的一或多個檔案節點、可在叢集中的多個節點之間容錯移轉、以建立高可用度的BeeGFS檔案系統。檔案節點通常會設定成HA配對、以便在叢集中執行BeeGFS服務的子集。</block>
  <block id="c8c3d1dbab26a87a3652e84d9f35d37f" category="summary">您應該何時使用Ansible與PCS命令列工具來管理HA叢集？</block>
  <block id="932c5a738d1d867e858cd1dbc1391b1a" category="doc">使用Ansible與PCS工具的時機</block>
  <block id="272d3f535988cc62fbddd197f2ce0477" category="paragraph">所有叢集部署和重新設定工作都應使用外部可控制節點的Ansible來完成。叢集狀態的暫時性變更（例如、將節點置入和移出待命）通常是透過登入叢集的一個節點（最好是未降級或即將進行維護的節點）、以及使用PCS命令列工具來執行。</block>
  <block id="5b94af0d2c18b35c22f5cfa622f91a3c" category="paragraph">修改任何叢集組態、包括資源、限制、內容及BeeGFS服務本身、都應該使用Ansible來完成。維護叢集的一部分、是維護「Ansible Inventory and playbook（Ansible Inventory and playbook）」的最新複本（理想的來源控制方式是追蹤變更）。當您需要變更組態時、請更新詳細目錄、然後重新執行匯入BeeGFS HA角色的Ansible教戰手冊。</block>
  <block id="636c6afe41e34a0f4dc30a8fee8de25c" category="paragraph">HA角色會處理將叢集置於維護模式、然後在重新啟動BeeGFS或叢集服務以套用新組態之前進行任何必要的變更。由於在初始部署之外通常不需要完整的節點重新開機、因此重新執行Ansible通常被視為「安全」程序、但如果任何BeeGFS服務需要重新啟動、則建議在維護期間或下班時間重新執行。這些重新啟動通常不會造成應用程式錯誤、但可能會影響效能（某些應用程式處理效能可能優於其他應用程式）。</block>
  <block id="cfe79eee27daf73a913f7b76cbb46461" category="paragraph">當您想要將整個叢集恢復到完全最佳狀態時、重新執行Ansible也是一個選項、而且在某些情況下、可能比使用PC更容易恢復叢集狀態。尤其是在叢集因某種原因而停機的緊急情況下、一旦所有節點都備份重新執行Ansible、就可能比嘗試使用PC更快且更可靠地還原叢集。</block>
  <block id="c94162d41104b03145716ac6946bd39a" category="summary">使用Ansible重新設定叢集。</block>
  <block id="388a6dd09725cda0da5d81c2d32f9c19" category="doc">重新設定HA叢集和BeeGFS</block>
  <block id="cb584c33a4eae31ed6d0c6ae575a915c" category="inline-link-macro">指定通用檔案節點組態</block>
  <block id="f7f37d848a0be4caeb97d6886778dc2a" category="paragraph">如需管理員在執行維護或服務叢集時應注意的特定組態選項詳細資料、請參閱下方。</block>
  <block id="d876616b83b1231cc28d82f157ed29c5" category="section-title">如何停用和啟用屏障</block>
  <block id="22228968b8b77db0d4e57d7cb284feb3" category="paragraph">設定叢集時、預設會啟用/需要隔離功能。在某些情況下、可能需要暫時停用隔離功能、以確保在執行某些維護作業（例如升級作業系統）時、不會意外關閉節點。雖然可以手動停用此功能、但系統管理員仍應注意取捨。</block>
  <block id="bdb2b6bd7635150b7e92a51e70612e12" category="section-title">選項1：使用Ansible（建議）停用隔離功能。</block>
  <block id="619a84cba5006df3e436e2a726ca2871" category="paragraph">使用Ansible停用隔離功能時、BeeGFS監視器的失敗動作會從「Fence」變更為「standby」（待命）。這表示、如果BeeGFS監視器偵測到故障、就會嘗試將節點置於待命狀態、並容錯移轉所有BeeGFS服務。在主動式疑難排解/測試之外、這通常比選項2更為理想。缺點是、如果資源無法在原始節點上停止、就會被封鎖、無法從其他位置啟動（這也是為什麼正式作業叢集通常需要隔離）。</block>
  <block id="0809fe829e193f81980e79631c9c15cc" category="list-text">在您的Ansible庫存中<block ref="24eab3114da61057c831607cf391b3b9" prefix=" " category="inline-code"></block> 新增下列組態：</block>
  <block id="d73646db1bf30029f2486d5b7462cde5" category="list-text">重新執行「Ansible」方針、將變更套用至叢集。</block>
  <block id="50a460b97c563d3429b629b6911db7d5" category="section-title">選項2：手動停用隔離功能。</block>
  <block id="28850c63d2fb8db15eeb1664c121e11b" category="paragraph">在某些情況下、您可能想要暫時停用隔離功能、而不重新執行Ansible、或許是為了協助疑難排解或測試叢集。</block>
  <block id="e0740d4e01fcc73df3a73294627cd292" category="admonition">在此組態中、如果BeeGFS監視器偵測到故障、叢集將嘗試停止對應的資源群組。它不會觸發完整容錯移轉、也不會嘗試重新啟動受影響的資源群組、或將其移至其他主機。若要恢復、請先解決所有問題、然後再執行<block ref="b292ce60014c1c0e30e4db1f177243d3" prefix=" " category="inline-code"></block> 或手動將節點置於待命狀態。</block>
  <block id="99f83169540f1c3e08a1e696707dcbee" category="list-text">若要判斷隔離（stonith）是否已全域啟用或停用、請執行：<block ref="f9bc36eebaadfbe3971849dbb1a7a291" prefix=" " category="inline-code"></block></block>
  <block id="88653da28715cbac123466935349c7b2" category="list-text">若要停用隔離執行：<block ref="d3749d5705f2a9af97f05b0c5c91b235" prefix=" " category="inline-code"></block></block>
  <block id="79c811c32be072ba96828f7eaf67e191" category="list-text">若要啟用隔離執行：<block ref="65795833f6c4653caabc1cbacafe84d8" prefix=" " category="inline-code"></block></block>
  <block id="d60c67e58f8b774cb2aa20f043f8db60" category="summary">使用Ansible更新BeeGFS和HA叢集。</block>
  <block id="51e0180a7b3c2158984fbbe6e8f869a0" category="paragraph">Ansible應用於所有BeeGFS升級、包括在BeeGFS的主要、次要和修補版本之間移動。若要更新BeeGFS、您必須先更新BeeGFS Ansible集合、這也會為部署/管理自動化和基礎HA叢集提供最新的修正與增強功能。即使更新至最新版本的收藏、BeeGFS也不會升級至<block ref="6afa1ad605a4192ba2e50e8be9966e68" prefix=" " category="inline-code"></block> 與一起執行<block ref="1c5a0082b7b70fba66dc89c5dcadda70" prefix=" " category="inline-code"></block> 設定。</block>
  <block id="c647c561b083b3d7395174f66f8631ea" category="inline-link-macro">BeeGFS升級文件</block>
  <block id="c24ac53eed3b244d067e62d9a64dfd49" category="admonition">如需BeeGFS版本的詳細資訊、請參閱 <block ref="8574fc3a2a061b998ddd0369208f121a" category="inline-link-macro-rx"></block>。</block>
  <block id="47d550a414d88378d8af3a8ee7202f43" category="paragraph">每個版本的BeeGFS集合都會與特定版本的BeeGFS進行測試、以確保所有元件之間的互通性。也會執行測試、確保可從最新版集合所支援的BeeGFS版本升級至最新版所支援的版本。</block>
  <block id="898fd772d03120abb80bc290103408c1" category="cell">原始版本</block>
  <block id="6b109fe64fc40b0f8653da2a76f4622d" category="cell">升級版本</block>
  <block id="4805ea9349955c3f72d0d2a6e29e9599" category="cell">多重軌道</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">詳細資料</block>
  <block id="0cbcbda5109bcde6b94054595b5c2163" category="cell">7.3.2</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="cell">是的</block>
  <block id="80af1bca395a5729dba29bf239d414de" category="cell">將beegfs集合從v3.0.1升級至v3.1.0、新增多重軌道</block>
  <block id="cd0d3c01d5de47172fb0980b9e484085" category="cell">7.2.8</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">否</block>
  <block id="f8c6df0b95129e4f957da4faa69e9a95" category="cell">將beegfs集合從v3.0.1升級至v3.1.0</block>
  <block id="90e738eca301c4d89366b1a4d15fe37f" category="cell">7.3.1</block>
  <block id="37ee8dee8daa5fa1f91e93f31f1e4548" category="cell">使用beegfs集合v3.1.0升級、新增多重軌道</block>
  <block id="35aee211b7a94a90469b8820e9b58379" category="cell">使用beegfs集合v3.1.0升級</block>
  <block id="2f4c1ac28e39c823ee4c1a07b7cd93aa" category="paragraph">可存取的集合升級 <block ref="d8617fd1dfbd628e2360b843d6070e54" category="inline-link-macro-rx"></block>，執行下列命令：</block>
  <block id="c199206a11a9882502e88de065338656" category="paragraph">如需離線收藏升級、請從下載收藏 <block ref="d8617fd1dfbd628e2360b843d6070e54" category="inline-link-macro-rx"></block> 按一下所需的<block ref="5ab34c986ae1945ee0c548bc8d6ac4a8" prefix=" " category="inline-code"></block> 然後<block ref="80af28150f2ffd9a902b18cd4e9b6656" prefix=" " category="inline-code"></block>。將tar傳輸到Ansible控制節點、然後執行下列命令。</block>
  <block id="dd26fb41f43f69172e0099b87c9d0732" category="inline-link-macro">安裝集合</block>
  <block id="6aa260cc14fabe54e7e9f6efd513b871" category="paragraph">請參閱 <block ref="78e19afa50f5104f13264e857fffab2b" category="inline-link-macro-rx"></block> 以取得更多資訊。</block>
  <block id="e6811430a0324887ba2ad63393a262e1" category="inline-link-macro">版本升級附註</block>
  <block id="800371603b58ee549a4a9674cd231cfd" category="inline-link-macro">部署BeeGFS HA叢集</block>
  <block id="5c349c42761230bd8e50fff98f6e7508" category="paragraph">若要套用BeeGFS更新：</block>
  <block id="a2dd7653f3025e7feb8e282bcc0bde84" category="paragraph">BeeGFS HA角色將在幕後處理：</block>
  <block id="2d304ec0e0fbeec292dc41145e2eecb0" category="list-text">確保叢集處於最佳狀態、且每個BeeGFS服務都位於其偏好的節點上。</block>
  <block id="5f143f3872f8df75b9266e40b2272406" category="list-text">將叢集置於維護模式。</block>
  <block id="400df38ef11abbe30ea67fa8e7200a0d" category="list-text">更新HA叢集元件（如有需要）。</block>
  <block id="33421319eb71c7eeb0ce5b0e4a6e4b8f" category="list-text">每次升級一個檔案節點、如下所示：</block>
  <block id="e8e28076de7654eb24e044afdf734b1a" category="list-text">將其置於待命狀態、並將其服務容錯移轉至次要節點。</block>
  <block id="428a1ecc41f6178248f2f8dadec2f62b" category="list-text">升級BeeGFS套件。</block>
  <block id="8a1d7e8d1dce93a3d4fb9150570283c2" category="list-text">回復服務：</block>
  <block id="f4a4c394b32e613eb518abe373f40c37" category="list-text">將叢集移出維護模式。</block>
  <block id="2e5a7ec61feb5cc6bfdf6e50d5cc9a86" category="section-title">從BeeGFS 7.2.6或7.3.0版升級</block>
  <block id="7202d449c02688973a53bb72a0090f19" category="inline-link-macro">BeeGFS連線型驗證</block>
  <block id="334d537e5273e4291972dbb772133d23" category="paragraph">在7.3.1之後發佈的BeeGFS版本將不再允許服務在未指定任何一項的情況下啟動<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block> 或設定<block ref="194193db6aa10dc83a871ef82dae32ce" prefix=" " category="inline-code"></block> 在服務的組態檔中。強烈建議啟用連線型驗證安全性。請參閱 <block ref="f745eac1796bcd7c76bb4ab7bb03be5b" category="inline-link-macro-rx"></block> 以取得更多資訊。</block>
  <block id="37075250adff19201f1f54be05b5a07a" category="paragraph">根據預設<block ref="59544be57ace17b034c14f8d12510eee" prefix=" " category="inline-code"></block> 角色將產生及發佈此檔案、並將其新增至位於的Ansible控制節點<block ref="d60ea3ba7610ba191573b69dca307efb" prefix=" " category="inline-code"></block>。。<block ref="84f7933b4ff9fefcfc60fd5fff4b3b54" prefix=" " category="inline-code"></block> 角色也會檢查此檔案是否存在、並將其提供給用戶端（若有）。</block>
  <block id="1ea32c7c84666a27c0f0add65b2c620e" category="admonition">如果是<block ref="84f7933b4ff9fefcfc60fd5fff4b3b54" prefix=" " category="inline-code"></block> 角色未用於設定用戶端、此檔案必須手動散佈至每個用戶端和<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block> 中的組態<block ref="1b33ed41c854e3144951352c24ab4653" prefix=" " category="inline-code"></block> 檔案集以供使用。從未啟用連線型驗證的舊版BeeGFS升級時、除非設定停用連線型驗證、否則用戶端將會失去存取權<block ref="2ff6bdfeb6b3a41d28029b9ff7bdb93c" prefix=" " category="inline-code"></block> 在中<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> （不建議）。</block>
  <block id="cc211dfb7bfb2c913740671716097933" category="summary">BeeGFS on NetApp解決方案結合BeeGFS平行檔案系統與NetApp E系列儲存系統、打造可靠、可擴充且具成本效益的基礎架構、可跟上嚴苛工作負載的腳步。</block>
  <block id="49274a22f777d8ee156d9a597e66731d" category="doc">總覽與需求</block>
  <block id="4fde5e2673b7e14764688237d98539a4" category="paragraph">使用Ansible部署BeeGFS高可用度叢集時、請將任何NetApp E/EF系列儲存系統當作BeeGFS區塊節點、將x86伺服器當作BeeGFS檔案節點。</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">簡介</block>
  <block id="58d7101385af8eaef1dc397806989cbb" category="inline-link-macro">NetApp認證的架構</block>
  <block id="6d2bf94f38d1fdf840fe9b231866899c" category="section-title">部署總覽</block>
  <block id="00298d02a62e3ad710061bdb858bc72b" category="paragraph">部署BeeGFS檔案系統通常需要執行下列步驟：</block>
  <block id="a3f59792a4244ec442fe3d6689ce5a5d" category="list-text">初始設定：</block>
  <block id="bed2a4653b2c422bf2632c104da5c873" category="list-text">安裝/纜線硬體。</block>
  <block id="a2d48c839c25c269a71b232a366cdfbc" category="list-text">設定檔案和區塊節點。</block>
  <block id="e8ec50ce42367b5c2125ba84ee0b2b07" category="list-text">設定可Ansible控制節點。</block>
  <block id="1166a5354ac02035abc5f968f7ed4570" category="list-text">將BeeGFS檔案系統定義為可Ansible庫存。</block>
  <block id="45a41d17b919852e176b0bef9ba18dde" category="list-text">針對檔案和區塊節點執行Ansible、以部署BeeGFS。</block>
  <block id="b29828241f384dfaa560eb24d45c7035" category="list-text">（可選）設置客戶端和BeeGFS掛載。</block>
  <block id="3b5256e7140e65040f9635a6b8b884ee" category="paragraph">後續章節將更詳細地說明這些步驟。</block>
  <block id="216c2fbf006b3f1ca9acdd60d04a9b4b" category="paragraph">Ansible負責所有的軟體資源配置與組態工作、包括：</block>
  <block id="fd699aca3f31bc5416fca3a153cc4779" category="list-text">在區塊節點上建立/對應磁碟區。</block>
  <block id="7565e19b34a4d2460620720a599da376" category="list-text">在檔案節點上格式化/調整磁碟區。</block>
  <block id="8744d71fb56c3e75f875de0a416ea912" category="list-text">在檔案節點上安裝/設定軟體。</block>
  <block id="dcc4901f1f1938989ed2264f42fd1104" category="list-text">建立HA叢集並設定BeeGFS資源和檔案系統服務。</block>
  <block id="077a8397a5f4ba0711faf87b91f8906c" category="paragraph">Ansible的BeeGFS支援已於發表 <block ref="e5bec9f043c86b9afcbef28a688a4cdd" category="inline-link-macro-rx"></block> 這是一套角色與模組的集合、可將BeeGFS HA叢集的端點對端點部署與管理自動化。</block>
  <block id="ff58765d6c48f433685b2f9354c057ed" category="section-title">Ansible Control Node</block>
  <block id="267dc210028d3a563bde0eb07ca563a0" category="paragraph">此節點將包含用於管理BeeGFS的目錄和方針。它需要：</block>
  <block id="fa364b2fe46e5e06529d637ca126add1" category="list-text">Ansible 6.x（Ansible核心2.13）</block>
  <block id="3ac4555ed79bcb16976991998d5a957c" category="list-text">Python 3.6（或更新版本）</block>
  <block id="44ebd117631269d8cc52eda82b890ecc" category="list-text">Python（pip）套件：ipaddr和netaddr</block>
  <block id="8486bce50d4152772da3c4531a015ab8" category="paragraph">此外、建議您從控制節點設定無密碼SSH、以連接所有BeeGFS檔案節點和用戶端。</block>
  <block id="5bca534f5a45c18ffc0306e63b306c62" category="section-title">BeeGFS檔案節點</block>
  <block id="676b08aacbe937f16d558f23d90b29da" category="section-title">BeeGFS用戶端節點</block>
  <block id="2e0da5c1c3cbd1cda1312f57209c96e4" category="inline-link-macro">BeeGFS支援Linux發佈與核心</block>
  <block id="b44b294130612c32e5f179fb81f347ec" category="paragraph">如果您不使用Ansible來設定BeeGFS用戶端和BeeGFS、則可以選擇任何 <block ref="ed8f85054917a214583881f0e58e2825" category="inline-link-macro-rx"></block> 可以使用。</block>
  <block id="03a96e493f11c9bdee76520257a1462d" category="summary">使用主機變數（host_vars）指定個別檔案節點的組態。</block>
  <block id="021fa309ed559d86433974a82c934acb" category="doc">設定個別檔案節點</block>
  <block id="882d9f125986842da2dd0a55dab49692" category="paragraph">本節將逐步介紹填入的內容<block ref="6ec1b7d2e07359817e585e3cab8e078f" prefix=" " category="inline-code"></block> 叢集中每個檔案節點的檔案。這些檔案應僅包含特定檔案節點專屬的組態。這通常包括：</block>
  <block id="3a67b6422642abadfa758fc6684f8438" category="list-text">定義IP或Ansible主機名稱應用於連線至節點。</block>
  <block id="fc0fd95b8cee27585e1c24e4d4a97663" category="list-text">設定用於HA叢集服務（起搏器和電暈器同步）的其他介面和叢集IP、以便與其他檔案節點通訊。根據預設、這些服務使用的網路與管理介面相同、但應該有額外的介面可供備援。一般做法是在儲存網路上定義額外的IP、避免需要額外的叢集或管理網路。</block>
  <block id="a557d06b3a2f8ed98f967366125754a4" category="list-text">設定介面、用於透過所需的傳輸協定連線至區塊節點（例如：iSCSI/iSER、NVMe/IB、NVMe/RoCE、FCP等）。</block>
  <block id="3990d1c8eb99844fa4339dea97a4f692" category="inline-link-macro">規劃檔案系統</block>
  <block id="625cd1f9698fddb4256f18db4fbe2c9f" category="list-text">在頂端指定Ansible應使用的IP或主機名稱來SSH連接節點並加以管理：</block>
  <block id="2c411df90af25473ca34f96c5d61fdbd" category="list-text">設定可用於叢集流量的其他IP：</block>
  <block id="13252baac98263adb995638740670156" category="inline-link-macro">InfiniBand（使用IPoIB）</block>
  <block id="4ec9f0d4c55bed99ab83189074c79fda" category="list-text">如果網路類型為 <block ref="ce64f086b1422863947177e8ac3c3f3f" category="inline-link-macro-rx"></block>：</block>
  <block id="703a1e1ae0933c0197e1615ce5751d82" category="inline-link-macro">融合式乙太網路上的RDMA（RoCE）</block>
  <block id="e8f5d6c59a43e4d1004ee930d690ba27" category="list-text">如果網路類型為 <block ref="513b838786f4a360fbbf4a58f2a48329" category="inline-link-macro-rx"></block>：</block>
  <block id="1e6c082cb30ec9603b75d0e43e10ed58" category="inline-link-macro">乙太網路（僅TCP、無RDMA）</block>
  <block id="022fdafc43fcb01f91b57ea09f74ecea" category="list-text">如果網路類型為 <block ref="0d1150d6d50cb438873f5f691ec395a3" category="inline-link-macro-rx"></block>：</block>
  <block id="caec0146669daf8b955fbc692dce520b" category="list-text">指出叢集流量應使用哪些IP、優先IP列在較高的位置：</block>
  <block id="8ab316490a957aa5fb5fe572defa9604" category="admonition">在步驟2中設定的IPS不會作為叢集IP使用、除非包含在中<block ref="736da50e459ba4f3c37629db79164765" prefix=" " category="inline-code"></block> 清單。這可讓您使用Ansible來設定其他IP /介面、以便在需要時用於其他用途。</block>
  <block id="fe608507c9e692b58aed73b8f11125e4" category="list-text">如果檔案節點需要透過IP型傳輸協定來通訊區塊節點、則必須在適當的介面上設定IP、以及安裝/設定該傳輸協定所需的任何套件。</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="inline-link-macro">iSCSI</block>
  <block id="e38ebb7478bbd7c30fcefbdd68c36a12" category="list-text">如果使用 <block ref="c46eb98747333d3b3d4803c99165252d" category="inline-link-macro-rx"></block>：</block>
  <block id="04363472361fdfa664dfcfdfa289d7f8" category="inline-link-macro">商用</block>
  <block id="25d076d8b955ae9a10c335a6a41c5dac" category="list-text">如果使用 <block ref="fa0a3baed35abd76cdb7d05d37537402" category="inline-link-macro-rx"></block>：</block>
  <block id="10c103240eb7689c62b54e419902d174" category="inline-link-macro">NVMe / IB</block>
  <block id="17e6fab71004356520b6a05746233689" category="list-text">如果使用 <block ref="cb33aa2303f4543f0ddc6cc084dc11e2" category="inline-link-macro-rx"></block>：</block>
  <block id="bb0b9e255a3bf215a4f994ef912a5fd7" category="inline-link-macro">NVMe / RoCE</block>
  <block id="7b049824318ebce7d5761f9928468034" category="list-text">如果使用 <block ref="dcd6a35349a26dd7f2ff0413151122c4" category="inline-link-macro-rx"></block>：</block>
  <block id="7de7f0266a638e2b92287e19c3daa0c0" category="list-text">其他通訊協定：</block>
  <block id="26bcb9f1cb6f391f4b2c18e676bb458d" category="inline-link-macro">NVMe / FC</block>
  <block id="22c518d1512a40bae5f92e178ec69be7" category="list-text">如果使用 <block ref="20d003b59b6b0f29fbb82550734ddf9c" category="inline-link-macro-rx"></block>，不需要設定個別介面。BeeGFS叢集部署會自動偵測傳輸協定、並視需要安裝/設定需求。如果您使用Fabric來連接檔案和區塊節點、請確保交換器已依照NetApp和交換器廠商的最佳實務做法正確分區。</block>
  <block id="cfaa375bf6c7f9fcc1bc04d4f30c9154" category="inline-link-macro">NetApp</block>
  <block id="59153461462a6c82d6207480cde38687" category="list-text">使用FCP或SAS不需要安裝或設定其他軟體。如果使用FCP、請確定交換器已正確分區如下 <block ref="6839ca80f3cddcad48af8ac7c3fe1eba" category="inline-link-macro-rx"></block> 以及交換器廠商的最佳實務做法。</block>
  <block id="31887cc493f03e51b901bf0def837d66" category="list-text">目前不建議使用IB SRP。視E系列區塊節點支援的項目而定、請使用NVMe/IB或iSER。</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">請按這裡</block>
  <block id="02613a7c8b7a72805b5196cbf7ed0def" category="paragraph">按一下 <block ref="6ff86e054594e10fe2118d48eb3fbd14" category="inline-link-macro-rx"></block> 例如、代表單一檔案節點的完整庫存檔案。</block>
  <block id="310ccb00662c7e9dcc32789c0d9b1b7a" category="section-title">進階：在乙太網路與InfiniBand模式之間切換NVIDIA ConnectX VPI介面卡</block>
  <block id="2b4c9bc157bda4a68fe7b673b411f9cd" category="paragraph">例如、將InfiniBand模式中的介面電流變更為乙太網路、以便用於RoCE：</block>
  <block id="f352db79870cb8a06a0551761aba6955" category="list-text">針對您要設定的每個介面指定<block ref="366fe119442ebda85ac564541700d0b5" prefix=" " category="inline-code"></block> 做為指定的對應（或字典）<block ref="ced82128b540acaf7a5a55ad007dc9fc" prefix=" " category="inline-code"></block> 其中<block ref="ecb5fc74e9cd1f249d43a2bdbf2f239d" prefix=" " category="inline-code"></block> 由HCA的介面連接埠號碼決定。。<block ref="ecb5fc74e9cd1f249d43a2bdbf2f239d" prefix=" " category="inline-code"></block> 值可透過執行來決定<block ref="2ea620f2a9b9bed90c46047fef7e151b" prefix=" " category="inline-code"></block> 並從PCI插槽名稱新增1至最後一個數字、然後轉換為十進位。</block>
  <block id="070b28e93cab063481c989d1404f9835" category="list-text">例如給定的<block ref="92c00058a177a7a840386578304e1345" prefix=" " category="inline-code"></block> （2 + 1 -&gt; HCA連接埠3）-&gt;<block ref="f5e96e67a1ff914902859c7140e258c6" prefix=" " category="inline-code"></block>：</block>
  <block id="5656da44562ac70934e97182890aa356" category="inline-link-macro">NetApp E系列主機系列文件</block>
  <block id="62a3f60b673661ad66352505cb4f5f47" category="paragraph">如需其他詳細資料、請參閱 <block ref="9ec6c7f8da9119d3e119ae207cfbe732" category="inline-link-macro-rx"></block> 針對您使用的介面類型/傳輸協定。</block>
  <block id="7b56de51b6636ae6d5c0129d3aa799db" category="summary">使用群組變數（群組_vars）指定通用檔案節點組態。</block>
  <block id="db3a70a0b14fbd38f2ad1025900202fe" category="paragraph">所有檔案節點的組態均應定義於<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block>。通常包括：</block>
  <block id="8a78a1a399a517e776a6453f500e5c3c" category="list-text">如何連線及登入每個檔案節點的詳細資料。</block>
  <block id="d749e2ca3efe2efbf2d8495c53fa6cb8" category="list-text">通用網路組態。</block>
  <block id="01166eafe622404b58002e5aa76ca528" category="list-text">是否允許自動重新開機。</block>
  <block id="109b40c80787d84c2b222ada208f2967" category="list-text">如何設定防火牆和SELinux狀態。</block>
  <block id="cd29db396a81799f9eb0187ecae937b1" category="list-text">叢集組態、包括警示和隔離。</block>
  <block id="8b4f60df6198db9d4eb1c6bbb19def6d" category="list-text">效能調校：</block>
  <block id="8ae73df7c749e2eb45a156f0c39fcc04" category="list-text">通用BeeGFS服務組態。</block>
  <block id="787446c6f7e5e0f4a50705b5035eba79" category="admonition">此檔案中設定的選項也可在個別檔案節點上定義、例如使用混合式硬體模型、或是每個節點的密碼不同。個別檔案節點的組態優先於此檔案中的組態。</block>
  <block id="0971602076ba9dff100f7cfc2d9e6059" category="paragraph">建立檔案<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> 並填入如下內容：</block>
  <block id="84531cf8a820148a6599e174baf94979" category="list-text">指出Ansible Control節點應如何與遠端主機進行驗證：</block>
  <block id="2d33afd54604fb6475c44a1bc47fe2b1" category="admonition">尤其是在正式作業環境中、請勿以純文字儲存密碼。請改用Ansible Vault（請參閱） <block ref="37147a1e5d41497ae56472e8a2868a2a" category="inline-link-macro-rx"></block>）或<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> 執行教戰手冊時的選項。如果是<block ref="f2bf771afbc16045e1951ded58c56f98" prefix=" " category="inline-code"></block> 已經是root、您可以選擇省略<block ref="424240cd4e5c359372b7f199431603d5" prefix=" " category="inline-code"></block>。</block>
  <block id="0a94da3169c04bc12f2c561654269433" category="list-text">如果您在乙太網路或InfiniBand介面上設定靜態IP（例如叢集IP）、且多個介面位於同一個IP子網路（例如、如果ib0使用192.168.1.10/24、而ib1使用192.168.1.11/24）、必須設定其他IP路由表和規則、多重主目錄支援才能正常運作。只需啟用提供的網路介面組態掛勾、如下所示：</block>
  <block id="502d35f94d5c17779c9050bbed75f65f" category="list-text">部署叢集時、視儲存傳輸協定而定、可能需要重新啟動節點、以協助探索遠端區塊裝置（E系列磁碟區）或套用組態的其他層面。依預設、節點會在重新開機前提示、但您可以指定下列項目、讓節點自動重新啟動：</block>
  <block id="ff31dc05d095d346c18f3e8f2d758fe0" category="list-text">根據預設、重新開機後、若要確保區塊裝置和其他服務已就緒、Ansible將會等到系統完成<block ref="dbd7cb25a43d1cd2bbc3bac871dad694" prefix=" " category="inline-code"></block> 在繼續部署之前就已到達。在使用NVMe / IB的某些情況下、這可能不夠長、無法初始化、探索及連線至遠端裝置。這可能會導致自動部署提早繼續、而且失敗。若要避免這種情況、使用NVMe / IB時也必須定義下列項目：</block>
  <block id="c41782825542f82199bd141519f37211" category="list-text">BeeGFS和HA叢集服務需要多個防火牆連接埠才能進行通訊。除非您想要手動設定防火牆（不建議）、否則請指定下列項目、以建立必要的防火牆區域並自動開啟連接埠：</block>
  <block id="2514951e199c5ba1bae751dec2faccfa" category="list-text">目前不支援SELinux、建議將狀態設為停用、以避免衝突（尤其是使用RDMA時）。請設定下列項目、以確保SELinux已停用：</block>
  <block id="97a322f05bd6e92c24c84cd8a09de904" category="list-text">設定驗證、讓檔案節點能夠通訊、根據組織原則調整預設值：</block>
  <block id="d6521cd21608c38eda94ff4b2607ebac" category="list-text">視需要啟用電子郵件警示：</block>
  <block id="369512731d385e76ab6ae5702e43d88e" category="list-text">強烈建議啟用隔離功能、否則當主要節點故障時、服務可能無法在次要節點上啟動。</block>
  <block id="679f9b26ee84fb8a265eb6a80d1141b0" category="list-text">指定下列項目以全域啟用隔離：</block>
  <block id="2b86513417433b960c2a9628820cce70" category="inline-link-macro">叢集內容</block>
  <block id="a4a918a45181164207929d52aec36aec" category="inline-link-macro">預設值</block>
  <block id="8cb3e998c7b1e4cbe36289f2177363b5" category="list-text">接下來選取並設定隔離代理程式：</block>
  <block id="bc6b3ed04c45895c341d99b6765c1caa" category="list-text">選項1：若要使用APC電力分配單元（PDU）啟用隔離功能：</block>
  <block id="94ebb967d1a890978b9758e3f2aac3bb" category="list-text">選項2：若要使用Lenovo XCC（及其他BMC）提供的RedfISH API來啟用屏障：</block>
  <block id="1242eea64a7ebfd7464359e597a4ec62" category="inline-link-macro">效能調校參數</block>
  <block id="e535abe8b416a666cd34177ff6bbe395" category="list-text">為了確保BeeGFS服務所使用的浮動IP位址（有時稱為邏輯介面）可在檔案節點之間容錯移轉、所有網路介面必須一致命名。根據預設、網路介面名稱是由核心產生、因此無法保證產生一致的名稱、即使是安裝在相同PCIe插槽中的網路介面卡、也能在相同的伺服器機型上產生一致的名稱。在部署設備之前建立庫存並已知產生介面名稱時、這也很有用。根據伺服器或的區塊圖、確保裝置名稱一致<block ref="6efa276570b668a53eaf7bf29c69d544" prefix=" " category="inline-code"></block> 輸出時、請指定所需的PCIe位址對邏輯介面對應、如下所示：</block>
  <block id="b577b9bc7da15f148c6521018b1c26f7" category="list-text">對於InfiniBand（IPoIB）網路介面：</block>
  <block id="10b951f140b750e6d3b9a61a2aa51fc1" category="list-text">對於乙太網路介面：</block>
  <block id="e71729643558be7be36227d3edb537a5" category="admonition">為了避免在重新命名介面時發生衝突（避免重新命名）、您不應使用任何可能的預設名稱、例如eth0、ens9f0、ib0或ibs4f0。一般的命名慣例是使用「e」或「i」作為乙太網路或InfiniBand、接著是PCIe插槽編號、以及字母來表示連接埠。例如、安裝在插槽3的InfiniBand介面卡的第二個連接埠為：i3b。</block>
  <block id="62e75ccd7f725aa6905f33580950953f" category="admonition">如果您使用已驗證的檔案節點模型、請按一下 <block ref="3d76a23cff20eb55b7795ee99a64cc43" category="inline-link-macro-rx"></block> PCIe位址對邏輯連接埠對應範例。</block>
  <block id="1644ff30bfdd323dac0e52e1620614b2" category="list-text">BeeGFS管理服務：</block>
  <block id="c9c23b537bdcdcf7e82ad149d3e28ab1" category="list-text">BeeGFS中繼資料服務：</block>
  <block id="b292484ec320b2afcb3a63fdbff30bd3" category="list-text">BeeGFS儲存服務：</block>
  <block id="69e81fdce48c1bfa30329304eaa6d50d" category="inline-link-macro">連線驗證</block>
  <block id="d636cd57abce18fc564705e1931029aa" category="list-text">截至BeeGFS 7.2.7和7.3.1 <block ref="770c4b58b3b364c4ac52cf5cc555453f" category="inline-link-macro-rx"></block> 必須設定或明確停用。您可以使用以Ansible為基礎的部署來設定這項功能：</block>
  <block id="2beb66fd9b0c065cfc742ee53ee1055d" category="list-text">根據預設、部署會自動設定連線驗證、並產生<block ref="cd304377fdc20285a5aa94e55ae85aa7" prefix=" " category="inline-code"></block> 將會發佈至所有檔案節點、並搭配BeeGFS服務使用。此檔案也會放置/維護在的Ansible控制節點上<block ref="eee2923df30539b680421ca53d7c066b" prefix=" " category="inline-code"></block> 應將其維護（安全）以供需要存取此檔案系統的用戶端重複使用。</block>
  <block id="a6eacd255bbcfb7c0ed5589f3f4b3b80" category="list-text">產生新的金鑰指定<block ref="34efb4240137e7a93d7ad83bde309514" prefix=" " category="inline-code"></block> 執行Ansible教戰手冊時。請注意、如果是、則會忽略此項<block ref="8b76cf2fb65e09dad03ca686be5cd464" prefix=" " category="inline-code"></block> 已定義。</block>
  <block id="4d93b986f0992f2770f494a3ced4bd11" category="inline-link-macro">BeeGFS HA角色</block>
  <block id="ca03fa9d55c2bc9aa4bb21f10949f48a" category="list-text">您可以在中定義下列項目、以使用自訂密碼<block ref="3cd295e6aaa39e2510aff65b801cc5ab" prefix=" " category="inline-code"></block>：</block>
  <block id="00d80f50123e52756def9093de1ba2aa" category="list-text">連線驗證可完全停用（不建議）：</block>
  <block id="b8a5eb74062e4ce8ebe0914712be3ae2" category="paragraph">按一下 <block ref="632283d8f4d8d92337070d81c0b8ed5f" category="inline-link-macro-rx"></block> 例如、代表通用檔案節點組態的完整庫存檔案。</block>
  <block id="74acf7796c51f1f58661f8cf66f5b969" category="section-title">使用具有NetApp EF600區塊節點的HDR（200GB）InfiniBand：</block>
  <block id="9e152ebb462ebe95f96d2711a934ec01" category="paragraph">若要將HDR(200Gb) InfiniBand搭配EF600使用、子網路管理程式必須支援虛擬化。如果使用交換器連接檔案和區塊節點、則必須在整個Fabric的子網路管理程式上啟用此功能。</block>
  <block id="11f007a0a372dd0901653de91029d3d8" category="inline-link-macro">設定檔案節點儲存介面</block>
  <block id="b13b4c123d075f5df5e6f618489fde5f" category="inline-link-macro">技術需求</block>
  <block id="df1f716d0a26eb697eb7605722643850" category="list-text">低於<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> 定義下列組態：</block>
  <block id="c25698c0b0a8b21ec89a22a39d05b4e4" category="summary">使用主機變數（host_vars）指定個別區塊節點的組態。</block>
  <block id="007670379f88b0b437948cd7ffd18854" category="doc">設定個別區塊節點</block>
  <block id="c04b45b2e867c15ec034a753c3caad42" category="paragraph">本節將逐步介紹填入的內容<block ref="e401274046660da23cecf42c63b0dc71" prefix=" " category="inline-code"></block> 叢集中每個區塊節點的檔案。這些檔案應僅包含特定區塊節點專屬的組態。這通常包括：</block>
  <block id="718e1c8b260f855e4dfed258432c772c" category="list-text">系統名稱（如System Manager所示）。</block>
  <block id="d6535083366c5efbc468368177b26a11" category="list-text">其中一個控制器的HTTPS URL（用於使用REST API管理系統）。</block>
  <block id="d34a9e5f2aea0e08afe426c3db560f6f" category="list-text">用於連線至此區塊節點的儲存傳輸協定檔案節點。</block>
  <block id="ac7d8826ccdecec74ae70f73a19ab9d6" category="list-text">設定主機介面卡（HIC）連接埠、例如IP位址（如有需要）。</block>
  <block id="80eb8027c5428b5220f76ca5617cdbef" category="list-text">在頂端指定其中一個控制器的系統名稱和HTTPS URL：</block>
  <block id="81788ba0d7d02d81c063dbca621ba11b" category="inline-link-macro">傳輸協定</block>
  <block id="d1ac4a3f6cf15e4c501caf76560363b8" category="list-text">選取 <block ref="42254e7bd4c71b16c1c0d21e675ced23" category="inline-link-macro-rx"></block> 檔案節點將用於連線至此區塊節點：</block>
  <block id="c2e9d327966d74c358df1c68e849c85b" category="list-text">支援的傳輸協定：<block ref="9df22f196a33acd0b372fe502de51211" prefix=" " category="inline-code"></block>、<block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block>、<block ref="e05fe30750d3ea262a610d17ebc07019" prefix=" " category="inline-code"></block>、<block ref="a8a64cef262a04de4872b68b63ab7cd8" prefix=" " category="inline-code"></block>、<block ref="7aee267b2c70d17165e6fa56dc01795a" prefix=" " category="inline-code"></block>、<block ref="11104f7e32c1e7884522b538834ffd9a" prefix=" " category="inline-code"></block>、<block ref="0ab2fb14820281e536188e7478368635" prefix=" " category="inline-code"></block>、<block ref="99e6ba7d601220dd39e915ce4c6ff74c" prefix=" " category="inline-code"></block>、<block ref="384fddfa43cdca25e66ad1b9a278e6c7" prefix=" " category="inline-code"></block>。</block>
  <block id="0c5c276a533c6231e1004931dde34c40" category="list-text">視使用中的傳輸協定而定、HIC連接埠可能需要額外的組態。必要時、應定義HIC連接埠組態、使每個控制器組態的頂端項目對應於每個控制器上的實體最左側連接埠、而底部連接埠則對應最右側的連接埠。所有連接埠都需要有效的組態、即使目前未使用。</block>
  <block id="95e06a898133e12b42adf8c80aafb2f7" category="admonition">如果您使用的是具有EF600區塊節點的HDR（200GB）InfiniBand或200GB RoCE、請參閱以下章節。</block>
  <block id="2a6f3123e92916a549d4843b0432ee15" category="list-text">對於iSCSI：</block>
  <block id="b405e253b7123d507b950877cb495779" category="list-text">對於iSER：</block>
  <block id="3becb61841658038a043e3eca2dc705e" category="list-text">適用於NVMe/IB：</block>
  <block id="5f42fe6193c58ec9a447a090be2e17b8" category="list-text">適用於NVMe / RoCE：</block>
  <block id="4b9c9e1cc0a87604a342176becdb9d29" category="list-text">FC和SAS傳輸協定不需要額外的組態。不正確建議使用SRP。</block>
  <block id="55876228853abf632dec9346a4f372ec" category="inline-link-macro">文件</block>
  <block id="d487c72028a8f41291fa35df82cfe348" category="paragraph">如需設定HIC連接埠和主機傳輸協定的其他選項、包括設定iSCSI CHAP的能力、請參閱 <block ref="03b4e8c5a2a4120cb0ea20ad53010d79" category="inline-link-macro-rx"></block> 隨附SANtricity 於此系列產品。注意：部署BeeGFS時、儲存資源池、磁碟區組態及其他資源配置方面將會設定在其他位置、不應在此檔案中定義。</block>
  <block id="ca752ddde33be986f431e89edb589ac1" category="paragraph">按一下 <block ref="4b43b7669fad4b5b712c0fa73fdf7e2c" category="inline-link-macro-rx"></block> 例如、代表單一區塊節點的完整庫存檔案。</block>
  <block id="bb3b75abe4dc6581c40f5061474bb17f" category="section-title">在NetApp EF600區塊節點上使用HDR(200Gb) InfiniBand或200GB RoCE：</block>
  <block id="2636cdb2e4c8c163e637fb4b1be7ef57" category="summary">使用群組變數（群組_vars）指定通用區塊節點組態。</block>
  <block id="42379f3693325579ec45c17436f3fa30" category="doc">指定通用區塊節點組態</block>
  <block id="f3b82d936104a57a294cfa3abe47b556" category="paragraph">所有區塊節點的組態均定義於<block ref="7bc866ffde9914c7ef21768fcf6f0683" prefix=" " category="inline-code"></block>。通常包括：</block>
  <block id="8265488ffd9c98f3bf95687c608f6db9" category="list-text">有關Ansible控制節點應如何連線至用作區塊節點的E系列儲存系統的詳細資料。</block>
  <block id="e6a6b0e56e4888732076684459908257" category="list-text">節點應該執行哪些韌體、NVSRAM/磁碟機韌體版本。</block>
  <block id="432cd2d056edf811cddfd42fe9367df2" category="list-text">全域組態、包括快取設定、主機組態、以及應如何配置磁碟區的設定。</block>
  <block id="b34cde4ef9da9f08725d6c62977d706a" category="admonition">此檔案中設定的選項也可在個別區塊節點上定義、例如使用混合式硬體模型、或是每個節點的密碼不同。個別區塊節點的組態優先於此檔案中的組態。</block>
  <block id="6afa815954c372aee339049211ead69a" category="paragraph">建立檔案<block ref="7bc866ffde9914c7ef21768fcf6f0683" prefix=" " category="inline-code"></block> 並填入如下內容：</block>
  <block id="35604a35256cdb2079414a606f693bc3" category="list-text">Ansible不會使用SSH連線至區塊節點、而是使用REST API。為了達成此目標、我們必須設定：</block>
  <block id="c4cb5f6ece988910c4cb1a90025fb6fd" category="list-text">指定用於管理每個節點的使用者名稱和密碼。使用者名稱可以選擇性地省略（預設為admin）、否則您可以指定具有管理員權限的任何帳戶。同時指定是否應驗證或忽略SSL憑證：</block>
  <block id="4b47eaf1cc2e42fd7841edf5ee136cf9" category="admonition">不建議以純文字列出任何密碼。使用Ansible保存庫或提供<block ref="b59049923d63016545b743560345fa56" prefix=" " category="inline-code"></block> 使用-Extra vars執行Ansible時。</block>
  <block id="7a48384bf61ccc1cd67f79e20b2946b0" category="list-text">（可選）指定應在節點上安裝哪些控制器韌體、NVSRAM/磁碟機韌體。這些項目必須下載至<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> 執行Ansible之前的目錄。E系列控制器韌體和NVSRAM <block ref="66d434b6c80c5839cd158404e9040bf6" category="inline-link-macro-rx"></block> 和磁碟機韌體 <block ref="289e1473afcefdacfca9006e22cec3f7" category="inline-link-macro-rx"></block>：</block>
  <block id="9f068c46b4a825d808c2c9767e358bf4" category="admonition">如果指定此組態、Ansible將自動更新所有韌體、包括重新開機控制器（如有必要）、而不會出現其他提示。這對BeeGFS /主機I/O來說是不中斷營運的、但可能會導致效能暫時降低。</block>
  <block id="e34a3cd38452267edb183f6fec7d3128" category="list-text">調整全域系統組態預設值。此處列出的選項與值通常建議用於NetApp上的BeeGFS、但可視需要調整：</block>
  <block id="959afa15d8283f663da6fb31c0931335" category="list-text">設定全域Volume資源配置預設值。此處列出的選項與值通常建議用於NetApp上的BeeGFS、但可視需要調整：</block>
  <block id="36aa3776a01484babb7b935f0790e38d" category="list-text">如有需要、請依照下列最佳實務做法、調整Ansible選擇儲存資源池和磁碟區群組磁碟機的順序：</block>
  <block id="9ddcb68f677516aceffc3293429a25e8" category="list-text">請先列出應用於管理和（或）中繼資料磁碟區的任何（可能較小的）磁碟機、然後列出儲存磁碟區。</block>
  <block id="6857ed48db753853948c52afd2297877" category="list-text">根據磁碟櫃/磁碟機機箱機型、確保在可用磁碟機通道之間平衡磁碟機選擇順序。例如、在EF600不擴充的情況下、磁碟機0-11位於磁碟機通道1、而磁碟機12-23位於磁碟機通道。因此、平衡磁碟機選擇的策略是選擇<block ref="22527cd74d7cc7f48375817974dc1712" prefix=" " category="inline-code"></block> 99：0、99：23、99：1、99：22等如果有多個機箱、第一個數字代表磁碟機櫃ID。</block>
  <block id="1f28da07b9b1480e254e0e0fe280f3a2" category="paragraph">按一下 <block ref="85c5b5287ec04e7c836b5655b59fd26c" category="inline-link-macro-rx"></block> 例如、代表通用區塊節點組態的完整庫存檔案。</block>
  <block id="e20d89701cb46cf38953e6dc25a2dc3d" category="summary">使用inventory.yml檔案指定可以執行每個BeeGFS服務的檔案節點。</block>
  <block id="02e4c76e0e6e5414c70765451a79b37c" category="doc">將BeeGFS服務對應至檔案節點</block>
  <block id="3e99717578ba1478873bc5c3269e4086" category="paragraph">使用指定可以執行每個BeeGFS服務的檔案節點<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> 檔案：</block>
  <block id="24c07a5a77746e85d21882c88bdd5b03" category="paragraph">本節將逐步說明如何建立<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> 檔案：這包括列出所有區塊節點、並指定可執行每個BeeGFS服務的檔案節點。</block>
  <block id="5ee7bf1a42518812c2b87b463bf96a31" category="paragraph">建立檔案<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> 並填入如下內容：</block>
  <block id="7aec62cda467a76d024911e74e1fec38" category="list-text">從檔案頂端建立標準的可Ansible庫存結構：</block>
  <block id="5923f18af043b9957bf5541e595cc0f5" category="list-text">建立一個群組、其中包含參與此HA叢集的所有區塊節點：</block>
  <block id="b084d86d2b539345bcda62aaa5bceb0f" category="list-text">建立一個群組、其中包含叢集中的所有BeeGFS服務、以及執行這些服務的檔案節點：</block>
  <block id="eec391bff48a7ed3bbf30e3280fbe9e3" category="list-text">針對叢集中的每個BeeGFS服務、定義應該執行該服務的慣用和任何次要檔案節點：</block>
  <block id="e26a68a8ce5809998083f351bf56677e" category="paragraph">按一下 <block ref="00544a89e642f3f5a354362c58d52f2e" category="inline-link-macro-rx"></block> 以取得完整庫存檔案的範例。</block>
  <block id="9df40d55a663f7c179e328bf937587fe" category="summary">BeeGFS服務是使用群組變數（群組_vars）進行設定。</block>
  <block id="29ee3861e1e5ac6fa4281c3c3fddd958" category="doc">定義BeeGFS中繼資料服務</block>
  <block id="60513084f53d0d484c55e212d6a9248e" category="paragraph">本節將逐步說明如何定義BeeGFS中繼資料服務。對於特定檔案系統、HA叢集中至少應有一項此類型的服務。設定此服務包括定義：</block>
  <block id="ef1af77af85196869032232af1a07f87" category="list-text">服務類型（中繼資料）。</block>
  <block id="164d597920f7afac5bd1bc14b783ff41" category="list-text">定義任何僅應套用至此BeeGFS服務的組態。</block>
  <block id="9e4755a30f0ec19b232cf1ce068ab8d4" category="list-text">設定一個或多個可連線至此服務的浮動IP（邏輯介面）。</block>
  <block id="fc266b5cc64e2d259e49bb24b0c186d0" category="list-text">指定磁碟區儲存此服務資料的位置/方式（BeeGFS中繼資料目標）。</block>
  <block id="9cef1e732270bc660ef17d29df58c49c" category="list-text">指出此檔案代表BeeGFS中繼資料服務的組態：</block>
  <block id="d1bbe7b3631d4fdecc7637f7f28f2cd9" category="list-text">定義任何僅應套用至此BeeGFS服務的組態。您至少必須指定所需的TCP和udp連接埠、無論是否支援任何的組態參數<block ref="672e512128cc9536bcf9f16964b20c49" prefix=" " category="inline-code"></block> 也可隨附。請注意、下列參數會自動/在其他地方設定、不應在此處指定：<block ref="6ea5464abdaaa0243bf0db8481a9a52b" prefix=" " category="inline-code"></block>、<block ref="dbca95678907e2f2bf827d44042c16c5" prefix=" " category="inline-code"></block>、<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>、<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>、<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block>和<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block>。</block>
  <block id="71529044e633eb2a4b25c87eb3ea0358" category="list-text">設定其他服務和用戶端用來連線至此服務的一或多個浮動IP（這會自動設定BeeGFS）<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block> 選項）：</block>
  <block id="db6bbb0bcb13fc624704b26d5d879534" category="list-text">您也可以指定一或多個允許用於傳出通訊的IP子網路（這會自動設定BeeGFS）<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block> 選項）：</block>
  <block id="d3de182528701519a47cbe276590393a" category="list-text">指定BeeGFS中繼資料目標、此服務會根據下列準則來儲存資料（這也會自動設定<block ref="dbca95678907e2f2bf827d44042c16c5" prefix=" " category="inline-code"></block> 選項）：</block>
  <block id="e0f52cfdc30da3e272257c8783119a56" category="list-text">相同的儲存資源池或磁碟區群組名稱可用於多個BeeGFS服務/目標、只要確保使用相同名稱即可<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block>、<block ref="2d0e37110968341728e47095df64a19c" prefix=" " category="inline-code"></block>、<block ref="48658e2ad8eaaf7daff452601ea618db" prefix=" " category="inline-code"></block>和<block ref="e241a8daa5b8e1af3b82b1e1a8ec24a9" prefix=" " category="inline-code"></block> 每個服務的組態（每個服務所列的磁碟區應該不同）。</block>
  <block id="339c4b049c3a7e5cdf355daceda6f43a" category="list-text">按一下 <block ref="0a71609ed00bd9652e70cd5b106f9ae3" category="inline-link-macro-rx"></block> 以取得可用的完整組態選項清單<block ref="8ca968d07b3817015da8919c700152f5" prefix=" " category="inline-code"></block>。請注意一些選項、例如<block ref="9ed39e2ea931586b6a985a6942ef573e" prefix=" " category="inline-code"></block>、<block ref="67b3dba8bc6778101892eb77249db32e" prefix=" " category="inline-code"></block>、<block ref="99bd6603c88a46584bf9b94ffab3d6c9" prefix=" " category="inline-code"></block>、<block ref="db137bf87e9c1a766b82885236ac8b87" prefix=" " category="inline-code"></block>和<block ref="7951c85f8306dda4792beb0e6a356282" prefix=" " category="inline-code"></block> 而且磁碟區名稱會自動產生、不應在此處指定。</block>
  <block id="df5fc0ef6e9aaec0f45d18fdd7ee8f12" category="paragraph">按一下 <block ref="c59646481b474fffe5bc2a736ab8653d" category="inline-link-macro-rx"></block> 例如、代表BeeGFS中繼資料服務的完整庫存檔案。</block>
  <block id="0badcf73673abd8a3f15cc4e386caafa" category="doc">定義BeeGFS儲存服務</block>
  <block id="624bf455f36c44a126036391cd39a75c" category="paragraph">本節將逐步說明如何定義BeeGFS儲存服務。對於特定檔案系統、HA叢集中至少應有一項此類型的服務。設定此服務包括定義：</block>
  <block id="e03fff2a92d72a09b4f9f5d0e895d1fd" category="list-text">服務類型（儲存設備）。</block>
  <block id="e5e9883649f056a718503df3542a70d4" category="list-text">指定磁碟區應儲存此服務資料的位置/方式（BeeGFS儲存目標）。</block>
  <block id="204caa9915a25307074d637daed7faba" category="list-text">指出此檔案代表BeeGFS儲存服務的組態：</block>
  <block id="d03efed3ebed6860068fb8a5123ef4c6" category="list-text">定義任何僅應套用至此BeeGFS服務的組態。您至少必須指定所需的TCP和udp連接埠、無論是否支援任何的組態參數<block ref="8a87bdd1964512794d560f1af3699fa1" prefix=" " category="inline-code"></block> 也可隨附。請注意、下列參數會自動/在其他地方設定、不應在此處指定：<block ref="6ea5464abdaaa0243bf0db8481a9a52b" prefix=" " category="inline-code"></block>、<block ref="facec0675a87a8e14bef255e83e40f1e" prefix=" " category="inline-code"></block>、<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>、<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>、<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block>和<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block>。</block>
  <block id="b0e2ab52d86028182775498a8ba8dcc3" category="list-text">指定此服務將根據下列準則儲存資料的BeeGFS儲存目標（這也會自動設定）<block ref="facec0675a87a8e14bef255e83e40f1e" prefix=" " category="inline-code"></block> 選項）：</block>
  <block id="b18c6fe32d4f2f076f7c708ea5be89c1" category="paragraph">按一下 <block ref="7bc3fba5853c696254cf4264774b5d50" category="inline-link-macro-rx"></block> 例如、代表BeeGFS儲存服務的完整庫存檔案。</block>
  <block id="973cf6ca298b6ecfb5f2f3290ca4cd2f" category="doc">定義BeeGFS管理服務</block>
  <block id="a461b810f49c26d9dc6d92a1e3a344bc" category="paragraph">本節將逐步說明如何定義BeeGFS管理服務。對於特定檔案系統、HA叢集中只應有一項此類型的服務。設定此服務包括定義：</block>
  <block id="a9da9d90de8c8b13991c884b03f76658" category="list-text">服務類型（管理）。</block>
  <block id="b966cc65076783762d4b37aff48e5a1f" category="list-text">指定磁碟區儲存此服務資料的位置/方式（BeeGFS管理目標）。</block>
  <block id="66969fa0d9af9f38ebaa31ea1c4b7051" category="list-text">指出此檔案代表BeeGFS管理服務的組態：</block>
  <block id="968fc19eb9be6283a0d5f79c8536f855" category="list-text">定義任何僅應套用至此BeeGFS服務的組態。除非您需要啟用配額、否則管理服務通常不需要此項功能、無論是否支援任何的組態參數<block ref="025b9ec9690bfeefef6aedbac6e66c87" prefix=" " category="inline-code"></block> 可隨附。請注意、下列參數會自動/在其他地方設定、不應在此處指定：<block ref="02a09b36e77ebbfe1d499e597daef0d5" prefix=" " category="inline-code"></block>、<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>、<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>、<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block>和<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block>。</block>
  <block id="8e19ae7e081dee60d1c86f207028684b" category="list-text">指定BeeGFS管理目標、此服務將根據下列準則儲存資料：</block>
  <block id="1511cb861f1160e48d8e9c07e416cd1a" category="paragraph">按一下 <block ref="ffb907e2c03168946e1e4d8df77e6e36" category="inline-link-macro-rx"></block> 例如、代表BeeGFS管理服務的完整庫存檔案。</block>
  <block id="234c05131256028f5ab7ea9b87261ff3" category="summary">Ansible清單是一組組組態檔、可定義所需的BeeGFS HA叢集。</block>
  <block id="e520383c76f5e72226ebb572b987380c" category="doc">Ansible Inventory Overview</block>
  <block id="7a1eabc3deb7fd02ceb1e16eafc41073" category="inline-link-macro">庫存</block>
  <block id="283c77f47e33325beac16dfcff1fbdc4" category="inline-link-macro">子目錄/檔案</block>
  <block id="3a6e55a49a2cdf7c86076b810d565fc2" category="paragraph">建議您遵循標準的可管理實務做法來組織您的 <block ref="6c37acba8ff27fe32f3259d928e2df83" category="inline-link-macro-rx"></block>、包括的使用 <block ref="0b746a370389b97701184b02d91b44b0" category="inline-link-macro-rx"></block> 而非將整個庫存儲存在單一檔案中。</block>
  <block id="21c8e198e85188d23c3e8ec1332bc84c" category="paragraph">單一BeeGFS HA叢集的「可安全庫存」如下所示：</block>
  <block id="8c57469570cfaa1ea4910df225230163" category="admonition">由於單一BeeGFS檔案系統可橫跨多個HA叢集、因此大型安裝可能會有多個Ansible庫存。一般而言、不建議嘗試將多個HA叢集定義為單一的可Ansible庫存、以避免發生問題。</block>
  <block id="1b1ad4049313d49cd09961eea7b62a6f" category="list-text">在「Ansible」控制節點上、建立一個空白目錄、其中包含您要部署之BeeGFS叢集的「Ansible」清單。</block>
  <block id="697c53131c77d1cf7ff864d4f02aca2d" category="list-text">如果您的檔案系統最終會包含多個HA叢集、建議您先為檔案系統建立目錄、然後為代表每個HA叢集的詳細目錄建立子目錄。例如：</block>
  <block id="aa4b0754e84122851b5c983186feaa49" category="list-text">在包含您要部署之HA叢集庫存的目錄中、建立兩個目錄<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> 和<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> 和兩個檔案<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> 和<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block>。</block>
  <block id="20034aab6a0bc59dc9804ff9d5960982" category="paragraph">以下各節將逐步說明這些檔案的內容定義。</block>
  <block id="cd3a8919c565c37be6e50322a583eac4" category="summary">在建置Ansible庫存之前、請先規劃檔案系統部署。</block>
  <block id="6ec9184bd478b3b836d1c92fa51f1baa" category="paragraph">在部署檔案系統之前、您應該先定義叢集中執行的所有檔案節點、區塊節點和BeeGFS服務需要哪些IP位址、連接埠和其他組態。雖然確切的組態會因叢集的架構而有所不同、但本節定義了一般適用的最佳實務做法和步驟。</block>
  <block id="229ad1ff2fa862e1fa317520fe78ad42" category="list-text">如果您使用IP型儲存傳輸協定（例如iSER、iSCSI、NVMe/IB或NVMe/RoCE）來將檔案節點連接至區塊節點、請填寫每個建置區塊的下列工作表。單一建置區塊中的每個直接連線都應該有唯一的子網路、而且不應與用於用戶端伺服器連線的子網路重疊。</block>
  <block id="0611f793ccd40e910f3d7f82c1bb6d66" category="cell">虛擬IP（僅適用於配備HDRIB的EF600）</block>
  <block id="6d68d27a364d17c3c6b36281d161a34e" category="cell">&lt;HOSTNAME&gt;</block>
  <block id="2feb1f8d58fa960c8d2635cb910ad7ec" category="cell">&lt;PORT&gt;</block>
  <block id="a87d961719c43a8065ad6f09b292f547" category="cell">&lt;IP/SUBNET&gt;</block>
  <block id="5d52f332806d779c548497e97b6050ed" category="admonition">如果每個建置區塊中的檔案和區塊節點是直接連線的、您通常可以針對多個建置區塊重複使用相同的IP/配置。</block>
  <block id="0eca8abaad32a83698b54d0fcea93ad3" category="list-text">無論您是使用InfiniBand或RDMA over Converged Ethernet（RoCE）進行儲存網路、請填寫下列工作表、以判斷將用於HA叢集服務、BeeGFS檔案服務和用戶端進行通訊的IP範圍：</block>
  <block id="0c2bd0118b2766abe77c40b1bd393b44" category="cell">BeeGFS叢集IP</block>
  <block id="c4aa072ba75aa28cd14308257fee1a08" category="cell">&lt;INTERFACE(s)&gt;</block>
  <block id="65b5aefed3041b5dccc318ffe87431b7" category="cell">&lt;RANGE&gt;</block>
  <block id="1ec0a19ea7a783b022b53265dd90c383" category="cell">&lt;IP(s)&gt;</block>
  <block id="0353e2599d6ca03a78f42855abe0a6f4" category="list-text">如果您使用單一IP子網路、則只需要一張工作表、否則請填寫第二個子網路的工作表。</block>
  <block id="c19e3d6f1cb2b9ed96d0553ef0363080" category="list-text">根據上述資訊、針對叢集中的每個建置區塊、填寫下列工作表、以定義BeeGFS將執行哪些服務。針對每項服務、指定偏好的/次要檔案節點、網路連接埠、浮動IP、NUMA區域指派（若有需要）、以及將用於其目標的區塊節點。填寫工作表時、請參閱下列準則：</block>
  <block id="501d4d9b0f3910c0d30a4a828247f2b0" category="list-text">也請將BeeGFS服務指定為兩者<block ref="5670713387ceeca6a99ea4c5d6381de9" prefix=" " category="inline-code"></block>、<block ref="adc521b987f8d17684929a7814fb39a6" prefix=" " category="inline-code"></block>或<block ref="13e9e938499f52dc5dd76a5f625aef19" prefix=" " category="inline-code"></block> 其中ID代表此檔案系統中該類型所有BeeGFS服務的唯一編號。此慣例將簡化後續各節中的工作表參照、同時建立檔案以設定每項服務。</block>
  <block id="d5164729d98e85db7b7cb0282c74163d" category="list-text">BeeGFS服務的連接埠只需在特定的建置區塊中具有唯一性。請確保具有相同連接埠號碼的服務無法在同一個檔案節點上執行、以避免連接埠衝突。</block>
  <block id="8a18a5a52ba3b55c805c94f8ac3889c9" category="list-text">必要時、服務可以使用來自多個區塊節點和（或）儲存資源池的磁碟區（並非所有磁碟區都必須由同一個控制器擁有）。多個服務也可以共用相同的區塊節點和/或儲存資源池組態（個別磁碟區將在稍後的章節中定義）。</block>
  <block id="80a7df0cf1674016cc4cc2588c911429" category="cell">BeeGFS服務（檔案名稱）</block>
  <block id="5515295c9721b17faa0365ab7a888791" category="cell">檔案節點</block>
  <block id="7428caa4314139d517357edc7bd85e13" category="cell">_setx.yml &lt;ID&gt; &lt;SERVICE TYPE&gt;</block>
  <block id="05dbd6a9ac1e738536c568b9c76b6d9f" category="cell">&lt;PREFERRED FILE NODE&gt; &lt;SECONDARY FILE NODE(s)&gt;</block>
  <block id="ce434f7769160d97da3ed0d746a4d983" category="cell">部分：功能&lt;IP/SUBNET&gt; &lt;IP/SUBNET&gt; &lt;INTERFACE&gt; &lt;INTERFACE&gt;</block>
  <block id="0f9b262f92ad6ba4a547abbe4c98c80b" category="cell">&lt;NUMA NODE/ZONE&gt;</block>
  <block id="9746b3183301bae601d6d3e7479f01f9" category="cell">&lt;BLOCK NODE&gt;</block>
  <block id="b95d182f851d32de39590b07917d6dc2" category="cell">&lt;STORAGE POOL/VOLUME GROUP&gt;</block>
  <block id="fe1341a187350b5203bdf2c08baa2ac8" category="cell">&lt;A OR B&gt;</block>
  <block id="78ff65afbf92a15cd30dea91aefc1e9b" category="inline-link-macro">最佳實務做法</block>
  <block id="b7121c47f4a8776d685a934610733179" category="inline-link-macro">定義BeeGFS建置區塊</block>
  <block id="0d4f2647b7895adb046a3392c35f6828" category="summary">在NetApp上安裝和連接硬體以執行BeeGFS所需的步驟。</block>
  <block id="7cb1df0e9acb4e346f49d40865ebd99f" category="doc">安裝及纜線硬體</block>
  <block id="d0dde32750edec525fffdeacdfe54a80" category="section-title">規劃安裝</block>
  <block id="694daa4aca75c61a285846a5ec0b4b0c" category="paragraph">每個BeeGFS檔案系統都會包含一些使用某些區塊節點所提供的後端儲存設備執行BeeGFS服務的檔案節點。檔案節點已設定為一個或多個高可用度叢集、以提供BeeGFS服務的容錯能力。每個區塊節點都已是作用中/作用中的HA配對。每個HA叢集中支援的檔案節點數目下限為三個、每個叢集中支援的檔案節點數目上限為十個。BeeGFS檔案系統可透過部署多個獨立的HA叢集來搭配運作、以提供單一檔案系統命名空間、擴充至超過十個節點。</block>
  <block id="bb4d2a6e482d18af607ee0f07c23d049" category="paragraph">一般而言、每個HA叢集都會部署為一系列的「建置區塊」、其中有一些檔案節點（x86伺服器）會直接連線至某些數量的區塊節點（通常是E系列儲存系統）。此組態會建立非對稱叢集、BeeGFS服務只能在存取BeeGFS目標所用後端區塊儲存設備的特定檔案節點上執行。每個建置區塊中的檔案對區塊節點、以及直接連線所使用的儲存傳輸協定之間的平衡、取決於特定安裝的需求。</block>
  <block id="f1fafc095d6233cf2f9c8d299f6427bb" category="paragraph">替代的HA叢集架構會在檔案和區塊節點之間使用儲存網路（也稱為儲存區域網路或SAN）來建立對稱叢集。這可讓BeeGFS服務在特定HA叢集中的任何檔案節點上執行。由於對稱叢集的成本效益通常不如額外的SAN硬體、因此本文件假設使用非對稱叢集部署為一系列一或多個建置區塊。</block>
  <block id="edda5f6836a1cf72ee14894e512b7707" category="admonition">在繼續安裝之前、請先確認您已充分瞭解特定BeeGFS部署所需的檔案系統架構。</block>
  <block id="767202c8efedcb9c8edf20f9fce9818d" category="section-title">機架硬體</block>
  <block id="14511f2f5564650d129ca7cabc333278" category="inline-link-macro">區塊</block>
  <block id="d5e81e99079cfbb27d893365b01c6733" category="paragraph">規劃安裝時、每個建置區塊中的所有設備都必須安裝在鄰近的機架單元中。最佳實務做法是將檔案節點直接機架在每個建置區塊的區塊節點上方。遵循檔案和模型的文件說明文件 <block ref="3876eb55ee0ffaac1627ebbb7ea8fad8" category="inline-link-macro-rx"></block> 將滑軌和硬體安裝到機架時所使用的節點。</block>
  <block id="39979c4d8cb83fc0443baa4ff7f48f07" category="paragraph">單一建置區塊範例：</block>
  <block id="98ac29120ce31a8b9f17cc6bcad239b1" category="paragraph">大型BeeGFS安裝範例、其中每個HA叢集有多個建置區塊、以及檔案系統中的多個HA叢集：</block>
  <block id="bdc136e73217b9254f82f3e521e32772" category="section-title">纜線檔案和區塊節點</block>
  <block id="f6f19d063d8a1cc74be9ed77236d08df" category="inline-link-macro">以NetApp認證架構上的第二代BeeGFS為基礎</block>
  <block id="40bc85e53495ab0b176af4ef17ea6072" category="section-title">將檔案節點纜線連接至用戶端網路</block>
  <block id="1899ae951504892f3420f88e3162b84d" category="paragraph">每個檔案節點都會有一些InfiniBand或乙太網路連接埠、指定用於BeeGFS用戶端流量。視架構而定、每個檔案節點都會有一或多個高效能用戶端/儲存網路連線、可能會連到多個交換器以提供備援和增加頻寬。以下是使用備援網路交換器進行用戶端佈線的範例、其中以深綠色和淺綠色強調顯示的連接埠連接至不同的交換器：</block>
  <block id="90a31af51bc017a18f8f032fa49cf901" category="section-title">連線管理網路與電源</block>
  <block id="b213f1ea719142ad3112dd64e712e06a" category="paragraph">建立頻內和頻外網路所需的任何網路連線。</block>
  <block id="2f967ed85c3e532e8aee39997f97a27c" category="paragraph">連接所有電源供應器、確保每個檔案和區塊節點都能連線至多個電力分配單元、以提供備援（若有）。</block>
  <block id="90791b7e8bfac5f0631992c1a7269f5e" category="summary">設定Ansible控制節點以部署及管理檔案系統。</block>
  <block id="9cdd817721bc924d0da9d43995b6cf7d" category="doc">設定Ansible Control Node</block>
  <block id="31996051b4f5b99834fd90885ae099c1" category="paragraph">Ansible控制節點是用於管理叢集的實體或虛擬Linux機器。它必須符合下列要求：</block>
  <block id="b4851e92b19af0c5c82447fc0937709d" category="inline-link-macro">需求</block>
  <block id="5f4740da5b8ab13112ebf332f879cc6e" category="list-text">與官員會面 <block ref="37e11d19f014e84f10fff4770a09b235" category="inline-link-macro-rx"></block> 包括作業系統版本。</block>
  <block id="2bce5080fcc3d6b8a54a49745dd28d52" category="list-text">可存取所有檔案和區塊節點的SSH和HTTPS。</block>
  <block id="9635e0061cd355a35e70799e909727af" category="summary">在執行Ansible之前、手動設定檔案和區塊節點所需的步驟。</block>
  <block id="f5878e619c266b2ac6254dd1e4d95bfb" category="doc">設定檔案和區塊節點</block>
  <block id="d3f9f418681aaa08eb617366f4e167e0" category="section-title">設定基礎板管理控制器（BMC）</block>
  <block id="d387b972fad59cf81f9a534bd8f6c654" category="paragraph">底板管理控制器（BMC）有時稱為服務處理器、是內建於各種伺服器平台的頻外管理功能的一般名稱、即使作業系統未安裝或無法存取、也能提供遠端存取。廠商通常會以自己的品牌行銷這項功能。例如、在Lenovo SR665上、BMC稱為Lenovo XClarity Controller（XCC）。</block>
  <block id="9f9fca437c1db2135d8b5e17bdc36ff6" category="paragraph">請遵循伺服器廠商的文件、啟用存取此功能所需的任何授權、並確保BMC已連線至網路、並適當設定以供遠端存取。</block>
  <block id="d4519b3f996eace0908217fda1966da8" category="admonition">如果需要使用RedfISH的BMC型屏障、請確認已啟用RedfISH、而且可從安裝在檔案節點上的作業系統存取BMC介面。如果BMC和營運部門共用相同的實體網路介面、則網路交換器可能需要特殊組態。</block>
  <block id="f9fa015b01242f44a7319213f0a01ff2" category="section-title">調校系統設定</block>
  <block id="93f3e5d94e30643aac7f8755a6dcfeb4" category="inline-link-macro">已驗證檔案節點機型</block>
  <block id="b9a7b8c50025e62b9e91f9baf3ba2304" category="section-title">安裝作業系統</block>
  <block id="9a7877d2d6f43233661b52c31362cb32" category="paragraph">啟用包含高可用度所需套件的Red Hat儲存庫：</block>
  <block id="5ea84babe2cd259121a70aff2652769b" category="section-title">設定管理網路</block>
  <block id="45f7cb03ff15b64d9405b68be6bdcc97" category="paragraph">設定所需的任何網路介面、以允許在頻內管理作業系統。具體步驟取決於所使用的特定Linux發佈版本。</block>
  <block id="6c2e3de482271e18e34375218bcbbfcd" category="admonition">確保SSH已啟用、且所有管理介面都可從Ansible控制節點存取。</block>
  <block id="ab2b3440ca9e61bb50d98cdd593fea31" category="section-title">更新HCA和HBA韌體</block>
  <block id="48206a73aaea76911a94b52a97986f4a" category="section-title">區塊節點</block>
  <block id="76752be68c87426437dc7d4a501b481c" category="inline-link-macro">使用E系列開始運作</block>
  <block id="871d3d62a8d11ed96c7c911ca5961c83" category="paragraph">請依照下列步驟執行 <block ref="4525dc880e156901740411dc7fd56b26" category="inline-link-macro-rx"></block> 可在每個區塊節點控制器上設定管理連接埠、並可選擇設定每個系統的儲存陣列名稱。</block>
  <block id="20c7fe47a0acb373f79e663a36dd1e25" category="admonition">除了確保所有區塊節點都可從可存取控制節點之外、沒有其他組態需要。其餘的系統組態將使用Ansible來套用/維護。</block>
  <block id="40df644de3579bec4038eafb77eb26fe" category="summary">（可選）Ansible可用於配置BeeGFS客戶端並掛載文件系統。</block>
  <block id="107dafc3c3dfc88c15a7700fd40a35dc" category="doc">部署BeeGFS用戶端</block>
  <block id="fc9048a17c6ddc968465bcc02c0ea486" category="inline-link-macro">Ansible角色</block>
  <block id="dcce328dbfa187984479bbc5ace17bf2" category="paragraph">存取BeeGFS檔案系統時、必須在需要掛載檔案系統的每個節點上安裝及設定BeeGFS用戶端。本節說明如何使用可用的執行這些工作 <block ref="0ceebef54e9df7cedfb22dd6dcf5ed37" category="inline-link-macro-rx"></block>。</block>
  <block id="2106244b87f596d4fefd89f77dae13da" category="section-title">建立用戶端庫存檔案</block>
  <block id="7dc2ac40c1549980b4ac09d940856f47" category="list-text">低於<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>、為每個BeeGFS用戶端建立一個名為的檔案<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> 在下列內容中、以適合您環境的正確資訊填寫預留位置文字：</block>
  <block id="689b0940ce8c21b1ecd3dafd9cc19d56" category="list-text">如果您想要使用NetApp E系列主機集合的角色來設定InfiniBand或乙太網路介面、以便用戶端連線至BeeGFS檔案節點、也可以選擇加入下列其中一項：</block>
  <block id="825f3be2c17c36c0e4901143db982773" category="list-text">建立新檔案<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> 並指定Ansible使用者應使用連線至每個用戶端、而Ansible密碼應用於權限提升（這需要<block ref="f2bf771afbc16045e1951ded58c56f98" prefix=" " category="inline-code"></block> 為root、或具有Sudo權限）：</block>
  <block id="c5a4ae1aa23001e8780b413f175b50b3" category="admonition">請勿以純文字儲存密碼。請改用Ansible Vault（請參閱 <block ref="f2e33a881c3eb75b68333af99119c0b8" category="inline-link-macro-rx"></block> 使用Ansible Vault加密內容）或使用<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> 執行教戰手冊時的選項。</block>
  <block id="848f64fc57104cb2b416f6102d34e699" category="list-text">在中<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> 檔案中、列出應在中設定為BeeGFS用戶端的所有主機<block ref="fc2e11772a55c48ed2b4ec7bc5d94664" prefix=" " category="inline-code"></block> 然後參閱內嵌註解、取消註釋在系統上建置BeeGFS用戶端核心模組所需的任何其他組態：</block>
  <block id="c378775497a55638adcb42719d8daddb" category="list-text">在中<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> 檔案中、列出您要掛載於任何先前定義下的BeeGFS檔案系統<block ref="b63119da730344b345cdc8f62a4711e9" prefix=" " category="inline-code"></block>：</block>
  <block id="508ccac845ca75d6cdda20dfa455a2bd" category="inline-link-macro">通用檔案節點組態</block>
  <block id="a7d7def0ef1d6627e10199d423565e7e" category="list-text">依預設、HA叢集部署會自動設定連線驗證、並產生<block ref="cd304377fdc20285a5aa94e55ae85aa7" prefix=" " category="inline-code"></block> 將放置/維護在的Ansible控制節點上<block ref="eee2923df30539b680421ca53d7c066b" prefix=" " category="inline-code"></block>。根據預設、BeeGFS用戶端角色會設定為將此檔案讀取/散佈到中定義的用戶端<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block>、而且不需要採取其他行動。</block>
  <block id="2c96dc448de9d0218bb361afae4689c8" category="inline-link-macro">BeeGFS用戶端角色</block>
  <block id="cb7223c9ecb20da5826418267937cb4b" category="list-text">如需進階選項、請參閱隨附的完整預設清單 <block ref="1507a901cf67edf9930d46c852b1993d" category="inline-link-macro-rx"></block>。</block>
  <block id="f4c29fbb6bcbcc6c55ae76c0a5254687" category="list-text">如果您選擇使用來指定自訂密碼<block ref="8b76cf2fb65e09dad03ca686be5cd464" prefix=" " category="inline-code"></block> 在中指定<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> 檔案也包括：</block>
  <block id="2f01d79351dcc30d05b4a5a46dee42df" category="list-text">如果您選擇完全停用以連線為基礎的驗證<block ref="6c8dd8672ca377e74101ad236282225a" prefix=" " category="inline-code"></block>、在中指定<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> 檔案也包括：</block>
  <block id="4debabcfd87e8aaf710a4ef0b5fc0fbc" category="inline-link-macro">完整的BeeGFS用戶端文件</block>
  <block id="be564dd8130b7faafb95d140037162bb" category="paragraph">如需支援參數的完整清單及其他詳細資料、請參閱 <block ref="28ce7a1eece2b507c973d3cca2a82121" category="inline-link-macro-rx"></block>。如需用戶端庫存的完整範例、請按一下 <block ref="b0d51f66522ad4d9697fdf435a95c97a" category="inline-link-macro-rx"></block>。</block>
  <block id="da7e04a55b40629ae3a62baa9635b36d" category="section-title">建立BeeGFS用戶端教戰手冊檔案</block>
  <block id="964a26fa475bbef370601a9a9fb613cb" category="list-text">建立新檔案<block ref="34bd6e27c43e6508a64d0a1bf093c7d2" prefix=" " category="inline-code"></block></block>
  <block id="ac25f4ce0e4e52459d58c2db4ebda280" category="list-text">選用：如果您想要使用NetApp E系列主機集合的角色來設定介面、讓用戶端連線至BeeGFS檔案系統、請匯入與您所設定介面類型對應的角色：</block>
  <block id="9f7ee0cead06efb0babbaca7b021e3ed" category="list-text">如果您使用的是InfiniBand（IPoIB）：</block>
  <block id="54b431528476178eb45a6c2570eff415" category="list-text">如果您使用的是透過整合式乙太網路（RoCE）的RDMA：</block>
  <block id="ea7cb942473ffddb52c2661da2f3b951" category="list-text">如果您使用的是乙太網路（僅TCP、無RDMA）：</block>
  <block id="975fc05779caaf583c3a8ab6b5c5adf1" category="list-text">最後匯入BeeGFS用戶端角色、以安裝用戶端軟體並設定檔案系統掛載：</block>
  <block id="02870b17064b23fcbf2e080b9624fd6d" category="paragraph">如需用戶端方針的完整範例、請按一下 <block ref="dee50bfc7f141fd7ad52d525c94ac7f5" category="inline-link-macro-rx"></block>。</block>
  <block id="354895762186e608f5675b1498c26501" category="section-title">執行BeeGFS用戶端教戰手冊</block>
  <block id="831a82eacd2203b1049bc6c01826fbef" category="paragraph">若要安裝/建置用戶端及Mount BeeGFS、請執行下列命令：</block>
  <block id="31a21a1e42c30056168ee5a4cca695a9" category="summary">使用方針來指定部署BeeGFS HA叢集時應執行哪些工作。</block>
  <block id="aca5a5a6b413ed0913ad90f87766df63" category="paragraph">本節說明如何組裝標準方針、以在NetApp上部署/管理BeeGFS。</block>
  <block id="b3254ab5c14c4bb06dbb987f8ee20900" category="section-title">建立可執行的教戰手冊</block>
  <block id="dc1e1a7b77e4fce07756f071e5ec7d8b" category="paragraph">建立檔案<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block> 並填入如下內容：</block>
  <block id="a3b34c0871dc2fd51eec5559b68f709d" category="inline-link-macro">玩遊戲</block>
  <block id="3b4e65c5ca327e9a010b0e69fb90e476" category="list-text">首先定義一組工作（通常稱為 <block ref="6d76655a02e5cb4ca885a92d78a5ab31" category="inline-link-macro-rx"></block>）、只能在NetApp E系列區塊節點上執行。我們會使用暫停工作在執行安裝之前先行提示（以避免意外執行教戰手冊）、然後匯入<block ref="504ead1cde99fc3bc223588114102919" prefix=" " category="inline-code"></block> 角色：此角色負責套用中定義的任何一般系統組態<block ref="7bc866ffde9914c7ef21768fcf6f0683" prefix=" " category="inline-code"></block> 或個人<block ref="7011fddbea4410953d6718ccf9ef966a" prefix=" " category="inline-code"></block> 檔案：</block>
  <block id="19c06a0dc65b61c783f73d77e193957e" category="list-text">定義要在所有檔案和區塊節點上執行的播放：</block>
  <block id="25296aae8975fe74b18a42af79a293d3" category="list-text">在這場活動中、我們可以選擇定義一組「預先工作」、在部署HA叢集之前應先執行。這對於驗證/安裝任何先決條件（如Python）來說都很有用。我們也可以進行任何飛行前檢查、例如驗證是否支援提供的Ansible標記：</block>
  <block id="adcd434b091e5725531891ba91d50193" category="list-text">最後、這場活動會將BeeGFS HA角色匯入您要部署的BeeGFS版本：</block>
  <block id="d1b15e5b42308e0128908c431c40f477" category="inline-link-macro">升級指南</block>
  <block id="cf0e39575a3cd74789827d1f8d28bcb0" category="list-text">選用：如果您想要定義其他工作、請記住是否應將工作導向<block ref="a181a603769c1f98ad927e7367c7aa51" prefix=" " category="inline-code"></block> 主機（包括E系列儲存系統）或僅檔案節點。如有需要、請使用定義專為檔案節點而設計的新遊戲<block ref="0c748da7ba6880eb7537e471415afd58" prefix=" " category="inline-code"></block>。</block>
  <block id="abd8b7e36cb7499818727f42837b0025" category="paragraph">按一下 <block ref="01ba4d718d4b882a06a17b3dab000fe7" category="inline-link-macro-rx"></block> 例如完整的教戰手冊檔案。</block>
  <block id="c6def9892d45d8f594a1141d759cff35" category="section-title">安裝NetApp Ansible Collection</block>
  <block id="f996e211f2d82b62da74abbaa175d7bc" category="paragraph">BeeGFS的Ansible及所有相依項目集合均保留在上 <block ref="d8617fd1dfbd628e2360b843d6070e54" category="inline-link-macro-rx"></block>。在Ansible控制節點上執行下列命令、以安裝最新版本：</block>
  <block id="9a603171be277ec1f9319dc83b272723" category="paragraph">雖然通常不建議使用、但也可以安裝特定版本的集合：</block>
  <block id="cb5da77fc5fc3c2fdb8aeff46789a9ca" category="section-title">執行教戰手冊</block>
  <block id="440d2c1c46f7c70d35f630781d07e912" category="paragraph">從包含的Ansible控制節點上的目錄<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> 和<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block> 檔案、請依照下列步驟執行方針：</block>
  <block id="b7a14d8dfd866e91a40ba8804324679a" category="paragraph">根據叢集的大小、初始部署可能需要20分鐘以上的時間。如果部署因任何原因而失敗、只要修正任何問題（例如：錯誤佈線、節點未啟動等）、然後重新啟動可執行的方針即可。</block>
  <block id="86cd3363bcd965ea6807e544cdb56311" category="summary">將系統投入正式作業之前、請先確認檔案系統部署。</block>
  <block id="0c947320dda2aecdd9ad8baca329d8a9" category="doc">驗證BeeGFS部署</block>
  <block id="9f4d5d32220ec3141c624637c9a8b89f" category="paragraph">將BeeGFS檔案系統置於正式作業環境之前、請先執行幾項驗證檢查。</block>
  <block id="09b37befd9a82a1583041aaff8b9a03a" category="list-text">登入任何用戶端並執行下列作業、以確保所有預期節點都存在/可連線、而且不會報告不一致或其他問題：</block>
  <block id="a1729ed32ceab91f7ef692e7af48a6b8" category="list-text">關閉整個叢集、然後重新啟動。從任何檔案節點執行下列作業：</block>
  <block id="989e28705c44d76a13ea323790377850" category="list-text">將每個節點置於待命狀態、並確認BeeGFS服務能夠容錯移轉至次要節點。若要登入任何檔案節點、並執行下列步驟：</block>
  <block id="ba2b2e2a9229fbcedccdb09d825096ee" category="inline-link-macro">設計驗證</block>
  <block id="fdb55059a4337ca76c138af7ad303efa" category="paragraph">應根據針對特定站台/安裝所定義的驗收條件來執行其他測試。</block>
  <block id="71a6b27b610785178635f3c7fea0dc9c" category="summary">使用Ansible部署及管理BeeGFS HA叢集。</block>
  <block id="03d8a35d2c337d83e9a0c791c0bde873" category="doc">Ansible教戰手冊總覽</block>
  <block id="dd3429f2a44e55e208032b591c258877" category="paragraph">前幾節將逐步說明如何建立代表BeeGFS HA叢集的Ansible庫存。本節將介紹NetApp開發的Ansible自動化功能、以部署及管理叢集。</block>
  <block id="531369b10b19be4aa811f6b1b1abfc32" category="section-title">Ansible：重要概念</block>
  <block id="c4c6df2bdb8451df5f63cc2602cd3266" category="paragraph">在繼續之前、熟悉幾個重要的可執行概念是很有幫助的：</block>
  <block id="0a4d7a775f170dc43fae102dc8eed0f1" category="list-text">根據可執行的庫存執行的工作是在稱為*教戰手冊*的內容中定義。</block>
  <block id="503c50788505311e2737ca28bcfc6d1b" category="list-text">Ansible中的大多數工作都是*冪等*的、這表示可以執行多次、以驗證所需的組態/狀態是否仍在套用、而不會造成任何中斷或進行不必要的更新。</block>
  <block id="fb3edd793b0a4233a87fc2742a893d8d" category="list-text">Ansible中最小的執行單位是*模組*。</block>
  <block id="d30cef0e8eb4eaf16c7181329c0d06bd" category="list-text">典型的教戰手冊使用多個模組。</block>
  <block id="424107bb38bc62e70c34a281a355ca1d" category="list-text">範例：下載套件、更新組態檔、啟動/啟用服務。</block>
  <block id="b34cf1156d6d4fc5d2020447509756c9" category="list-text">NetApp發佈模組以自動化NetApp E系列系統。</block>
  <block id="a5a68481f09270734c66ad9ff1dcd0af" category="list-text">複雜的自動化功能更適合當作角色來進行套裝。</block>
  <block id="4eac750d0b9763378029ed193c50648c" category="list-text">基本上是一種標準格式、可用來發佈可重複使用的教戰手冊。</block>
  <block id="caa4d8cd3e05670bd54bb0281f679498" category="list-text">NetApp負責分配Linux主機和BeeGFS檔案系統的角色。</block>
  <block id="1aa532e3c0c6ac72094492dd5d4ad8fa" category="section-title">BeeGFS HA Ansible角色：重要概念</block>
  <block id="8313d0dcd5307c834d7d37f194d4ea32" category="inline-link-macro">NetApp E系列BeeGFS適用的Ansible收藏</block>
  <block id="8694b9bbf06f92b8fb6a129f90967b56" category="paragraph">在NetApp上部署及管理每個版本BeeGFS所需的所有自動化作業、均以Ansible角色進行封裝、並隨附於一起散佈 <block ref="0d95f34d028d609c5e44d4c47f78ca03" category="inline-link-macro-rx"></block>：</block>
  <block id="e14542ae9d29391a92cc14f6b44e67fd" category="list-text">此角色可視為BeeGFS *安裝程式*與現代*部署/管理*引擎之間的某個位置。</block>
  <block id="3bcab18a67a5ea90f159f8f472ab0f9d" category="list-text">將現代化的基礎架構套用為程式碼實務做法和理念、以簡化任何規模的儲存基礎架構管理。</block>
  <block id="82877b38f579bedd3acfc034e6aa2a8e" category="inline-link-macro">Kubespray</block>
  <block id="34681b6b5fc6e725199f30a154956754" category="list-text">此角色是*軟體定義*格式的NetApp用於在NetApp解決方案上封裝、發佈及維護BeeGFS。</block>
  <block id="3c359db1a2bcb271a8a28e3381057655" category="list-text">努力創造「類似應用裝置」的體驗、而不需要散佈整個Linux發行版本或大型映像。</block>
  <block id="ebc3365fe74d7c659b1f0298995f6d39" category="list-text">包括NetApp著作的開放式叢集架構（OCF）相容叢集資源代理程式、可用於自訂BeeGFS目標、IP位址及監控、以提供智慧型起搏器/ BeeGFS整合功能。</block>
  <block id="8af5165ce6aabae36357e63702ba3fbf" category="list-text">此角色不只是部署「自動化」、旨在管理整個檔案系統生命週期、包括：</block>
  <block id="444e2df3560fe0281204fd385d895403" category="list-text">套用個別服務或整個叢集的組態變更與更新。</block>
  <block id="61ef90c42824e8e8c92d69c04046a94b" category="list-text">在硬體問題解決後、將叢集修復與還原自動化。</block>
  <block id="bb8450666975061db9804d65dbb5afbf" category="list-text">利用BeeGFS與NetApp磁碟區的廣泛測試、設定預設值、簡化效能調校。</block>
  <block id="fded9f625af9335e3b78e65d6fd6abac" category="list-text">驗證及修正組態飄移。</block>
  <block id="16a4e0aca277107b3401d2d33d4e5c00" category="inline-link-macro">BeeGFS用戶端</block>
  <block id="1c82d73e983ef595a7c60ff4647716a7" category="paragraph">NetApp也為提供Ansible角色 <block ref="b6cde77df9fbd5f549a35216e2ea351f" category="inline-link-macro-rx"></block>（可選）用於安裝BeeGFS並將文件系統掛載到compute（計算）/GPU/Login（計算/ GPU /登錄）節點。</block>
  <block id="55f7d3580cdac035324d4348b9dac05b" category="inline-link-macro">管理BeeGFS叢集</block>
  <block id="3e3cee1fd1e1de5762df25400f62794a" category="paragraph">HPC叢集中執行需要使用檔案系統之應用程式的節點。有時也稱為運算或GPU節點。</block>
  <block id="67d6c06d21e47a4c86e1be15e327370e" category="paragraph">儲存網路/用戶端網路</block>
  <block id="7829f14ded222e6be0bb1a1d28e8f977" category="paragraph">用於用戶端與BeeGFS檔案系統通訊的網路。這通常是用於HPC叢集節點之間平行訊息傳遞介面（MPI）和其他應用程式通訊的相同網路。</block>
  <block id="d02afad2b9d23614832a35187b8296bf" category="summary">本網站說明如何在NetApp上部署及管理BeeGFS。</block>
  <block id="f3ea919081d7ce9021ea4cd631632407" category="paragraph">本網站說明如何使用NetApp認證架構（NVA）和自訂架構、在NetApp上部署及管理BeeGFS。NVA設計經過徹底測試、並提供客戶參考組態與規模調整指引、以將部署風險降至最低、並加速上市時間。NetApp也支援在NetApp硬體上執行自訂BeeGFS架構、讓客戶與合作夥伴能夠靈活設計檔案系統、以滿足各種需求。這兩種方法都運用Ansible進行部署、提供類似應用裝置的方法、在靈活的硬體範圍內、以任何規模管理BeeGFS。</block>
  <block id="2146c9256a2a3883605731032b6b8015" category="sidebar">使用通過驗證的架構</block>
  <block id="2c9d17683bf440abca82add607aa6a61" category="sidebar">初始設定</block>
  <block id="2186112c2fe23afc42ab96c76b10633c" category="sidebar">安裝和連接硬體</block>
  <block id="d2c71dbf224d233986fd9fee484a1bff" category="sidebar">定義BeeGFS檔案系統</block>
  <block id="d2b9bae490422ee64c78a0825f1c1d47" category="sidebar">定義檔案和區塊節點</block>
  <block id="e0f1083c7a219d40d5f2cce31e733837" category="sidebar">設定個別檔案節點</block>
  <block id="aaadb61f664f163c98ebee0c9c962dda" category="sidebar">設定個別區塊節點</block>
  <block id="2c6acfbd0549df84a730e9135dfa642a" category="sidebar">指定通用檔案節點組態</block>
  <block id="de1a5ef51d1a1d949b60789be3110709" category="sidebar">指定通用區塊節點組態</block>
  <block id="8283d5b2387e743d14bda00c2176d402" category="sidebar">定義BeeGFS服務</block>
  <block id="4ea9c51458de5a50fcfc6ed1d6731376" category="sidebar">BeeGFS管理服務</block>
  <block id="fc0c3d42b552d41c96b314b10a5d8322" category="sidebar">BeeGFS中繼資料服務</block>
  <block id="941fb85375314e8f03181252062f8321" category="sidebar">BeeGFS儲存服務</block>
  <block id="67f0f9eb53d18fde2907a79ffc52ab62" category="sidebar">部署BeeGFS檔案系統</block>
  <block id="7d980eb0cd911c4219870701e3c4ffce" category="sidebar">管理BeeGFS叢集</block>
  <block id="58f82a4575a638ca0eba992df08c4d2b" category="sidebar">使用Ansible與PCS的時機</block>
  <block id="bbfb06821b506d64fdaee613711657d4" category="sidebar">服務與維護</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="e8afe31a21b6aae9717484d865743dae" category="sidebar">NetApp 上的 BeeGFS 搭配 E 系列儲存設備、是備受肯定的整合式解決方案、提供簡單、可靠、可擴充且具成本效益的高效能運算基礎架構、能跟上您最極端的工作負載。</block>
  <block id="3a9aabbbb8c331319a41788bf5d1786a" category="paragraph">實際組裝及建立Ansible庫存檔案時、請遵循下列標準慣例（如需詳細資訊、請參閱） <block ref="dbbcb9482f49ee969cddb7f10864cbd0" category="inline-link-macro-rx"></block>）。</block>
  <block id="a743f5810f84b94eef8da441707ef9cb" category="paragraph">若要將HDR（200GB）InfiniBand搭配EF600使用、必須為每個實體連接埠設定第二個「虛擬」IP。以下是正確設定配備雙埠 InfiniBand HDR HIC 的 EF600 的範例：</block>
  <block id="ba83328d8d0f6845114641c46fd328ed" category="paragraph">在此例中、BeeGFS服務meta_08因為某些原因而停止。若要繼續疑難排解、我們應該開機 beegfs_02 、並檢閱服務的記錄、網址為：<block ref="45434eee994714888e9eafad4993b0d3" prefix=" " category="inline-code"></block>。例如、BeeGFS服務可能因為內部問題或節點問題而發生應用程式錯誤。</block>
  <block id="12edeb5890095749089987982a1404ce" category="cell">7.4.1..</block>
  <block id="edd2140e3bcb557a4bc234fc76e2dfb3" category="cell">使用beegfs集合v3.2.0升級</block>
  <block id="fb6df547cfb7d95cb9b49b8301cad3ab" category="cell">7.4.2..</block>
  <block id="549cabdee707d530b4b718071c2b04e9" category="paragraph">如果您要在主要或次要版本之間移動、請在<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block> 用於部署和維護叢集的檔案中、更新角色名稱<block ref="66b5cc4f55c22b7b05dfd4be1be47aab" prefix=" " category="inline-code"></block> 以反映所需的版本。例如，如果您想部署 BeeGFS 7.4 ，這將是<block ref="bf8d782a5f25b975eee48d224688885f" prefix=" " category="inline-code"></block>：</block>
  <block id="e8c7ab07a88c53743d909983583625f9" category="paragraph">例如、在此範例檔案中<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> 、 beegfs_01 是執行 BeeGFS 管理服務的慣用檔案節點：</block>
  <block id="cb7c9e260fba17d2ffcc93361a0eab2e" category="paragraph">反轉訂單會使beegfs_02上的管理服務更受歡迎：</block>
  <block id="958b8a27f957bef8700299f8cafb9b9a" category="admonition">請勿指定個別資源或資源群組。請務必指定您要重新部署BeeGFS服務的監視器名稱。例如，要將 BeeGFS 管理服務移至 beegfs_02 ，請執行<block ref="ad6bdcc4dd95b7dbe9e00b9894a08e42" prefix=" " category="inline-code"></block>：。您可以重複此程序、將一或多個服務移出偏好的節點。確認<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> 新節點上的服務已重新定位 / 啟動。</block>
  <block id="aaf17f2a8cba647c8702de94c1bef112" category="list-text">附註如有需要、也可在此處指定任何支援 <block ref="f4efc844d4401fa0cd59f82e6a720d5a" category="inline-link-macro-rx"></block> 的項目。由於 BeeGFS HA 角色隨附許多經過測試的功能，因此通常不需要調整這些 <block ref="62cb44c0555eaba8953c22f475d751a4" category="inline-link-macro-rx"></block>功能。</block>
  <block id="b611c6838bc0b80a5b542ae4d720301f" category="list-text">BeeGFS HA角色可套用許多不同的調校參數、以協助進一步最佳化效能。其中包括最佳化核心記憶體使用率和區塊裝置I/O、以及其他參數。根據 NetApp E-Series 區塊節點的測試、角色隨附一組合理的 <block ref="e3e5af180e2cd561ad9b935d8101ce4e" category="inline-link-macro-rx"></block> 、但預設不會套用這些功能、除非您指定：</block>
  <block id="7353e78ee2c3bb2136aa1b29915ccf4b" category="list-text">如有需要、也可在此處指定預設效能調校的任何變更。如需其他詳細資料、請參閱完整 <block ref="df0e33f301a426939663a0f2db36079c" category="inline-link-macro-rx"></block> 文件。</block>
  <block id="37fa384fbce35691f87f5108b23924df" category="list-text">（可選）指定應套用至叢集中所有BeeGFS服務的組態。可以找到預設組態值 <block ref="cb8aac20b4c821ca121d5c55cc4298ed" category="inline-link-macro-rx"></block>、並在其他地方指定個別服務組態：</block>
  <block id="61eef27bde9b61db5c00501b13e855d5" category="list-text">如需進階選項，請參閱隨附的完整預設清單 <block ref="cf22ff8e76067e7f0eed610c434ec47d" category="inline-link-macro-rx"></block>。</block>
  <block id="5452bc376e228dbfc0b465054f2483c7" category="paragraph">目前支援的 Linux 套裝作業系統隨附的收件匣版本<block ref="d21519b2c7af8ce90e382199384a8c06" prefix=" " category="inline-code"></block> 不支援虛擬化。而是必須從 NVIDIA OpenFabrics Enterprise Distribution （ OFED ）安裝和設定的版本<block ref="d21519b2c7af8ce90e382199384a8c06" prefix=" " category="inline-code"></block> 。雖然仍支援使用Ansible進行部署、但仍需執行幾個額外步驟：</block>
  <block id="a7d969bead9b9df7cbb19855a88e29f0" category="list-text">任何用於叢集通訊的網路效能、對檔案系統效能並不重要。使用預設叢集組態時、通常至少有 1 Gb/s 網路可為叢集作業提供足夠的效能、例如同步節點狀態和協調叢集資源狀態變更。緩慢/忙碌的網路可能會導致資源狀態變更的時間比平常長、而且在極端的情況下、如果無法在合理的時間範圍內傳送訊號、則可能會導致節點從叢集中被逐出。</block>
  <block id="b1c24e06350be92498850e67cc8d9f5b" category="inline-link-macro">NVIDIA Firmare 工具（ MFT ）</block>
  <block id="042d56fca47b68c93d438d4b1275b212" category="paragraph">NVIDIA ConnectX-Virtual Protocol Interconnect（VPI）介面卡支援InfiniBand和乙太網路作為傳輸層。在模式之間切換不會自動協商，而且必須使用中隨附的工具進行設定<block ref="366fe119442ebda85ac564541700d0b5" prefix=" " category="inline-code"></block><block ref="a55706c70f646ff289a7f6fb8ddc1353" prefix=" " category="inline-code"></block>，這是屬於的開放原始碼套件 <block ref="feedb9cf3a554ef170c48364196566a1" category="inline-link-macro-rx"></block>。只需變更一次介面卡模式即可。這可以手動完成、也可以納入 Ansible 庫存、做為任何使用庫存區段設定的介面一部分<block ref="d6ca1855b29b160948694322764a86cb" prefix=" " category="inline-code"></block> 、以自動檢查 / 套用。</block>
  <block id="815feebb5e4cc6a260b0689a8647ef51" category="admonition">使用 NVIDIA OFED 驅動程式時、請確定 beegfs_client_of_ofed_include_path 指向 Linux 安裝的正確「 header include path 」。如需詳細資訊，請參閱的 BeeGFS 文件 <block ref="a36a0245ff208157cbdf93cd51fc1311" category="inline-link-macro-rx"></block>。</block>
  <block id="fbe2ee36e5e515b0ea11d513d4edd60d" category="paragraph">NetApp 解決方案上的 BeeGFS 已驗證下列節點。</block>
  <block id="6c3a6944a808a7c0bbb6788dbec54a9f" category="cell">節點</block>
  <block id="3c02a379965ab0dfcd77b1c484450433" category="cell">硬體</block>
  <block id="e1e4c8c9ccd9fc39c391da4bcd093fb2" category="cell">區塊</block>
  <block id="11eae0b95e61cd22a675ac3a648e9f79" category="cell">NetApp EF600 儲存系統</block>
  <block id="318d8d02c042e4aa8cd7ae129f0a339b" category="cell">專為嚴苛工作負載所設計的高效能全 NVMe 2U 儲存陣列。</block>
  <block id="0b27918290ff5323bea1e3b78a9cf04e" category="cell">檔案</block>
  <block id="8c9b1d5381233aa78ea770058e6742e6" category="cell">Lenovo ThinkSystem SR665 V3 伺服器</block>
  <block id="2a3586b2a3c3de10623ad3288a90f6dd" category="cell">雙插槽 2U 伺服器、採用 PCIe 5.0 、雙 AMD EPYC 9124 處理器。如需 Lenovo SR665 V3 的詳細資訊、請參閱<block ref="7f25034611c942664d16f6d0ddb47fad" category="inline-link-rx"></block>。</block>
  <block id="ae1c04d15a9494b2729aa9280c0120fa" category="cell">Lenovo ThinkSystem SR665 伺服器</block>
  <block id="d1c6fb9a2f602020b776764cc928e4c4" category="cell">雙插槽 2U 伺服器、採用 PCIe 4.0 、雙 AMD EPYC 7003 處理器。如需 Lenovo SR665 的詳細資訊、請參閱<block ref="65dfa08d35b276d60d397ded9080ccd5" category="inline-link-rx"></block>。</block>
  <block id="62ecfeab471e0776b331e56e58d79d41" category="paragraph">此解決方案的建置區塊（如下圖所示）使用通過驗證的檔案節點伺服器作為 BeeGFS 檔案層、並使用兩個 EF600 儲存系統做為區塊層。</block>
  <block id="f220d8966f97bec043102cd415b93605" category="paragraph">NetApp上的BeeGFS解決方案可在部署中的所有建置區塊上執行。部署的第一個建置區塊必須執行 BeeGFS 管理、中繼資料和儲存服務（稱為基礎建置區塊）。所有後續的建置區塊均可透過軟體進行設定、以擴充中繼資料和儲存服務、或是僅提供儲存服務。這種模組化方法可根據工作負載的需求擴充檔案系統、同時使用相同的基礎硬體平台和建置區塊設計。</block>
  <block id="2cad05d70c2bc093824c9105ad50dc45" category="paragraph">最多可部署五個建置區塊、形成獨立式 Linux HA 叢集。如此可利用 Pacemaker 最佳化資源管理、並與電暈器同步保持高效率同步。這些獨立式 BeeGFS HA 叢集中有一或多個是結合在一起的、可建立 BeeGFS 檔案系統、讓用戶端以單一儲存命名空間的形式存取。在硬體方面、單一 42U 機架最多可容納五個建置區塊、以及兩個用於儲存 / 資料網路的 1U InfiniBand 交換器。請參閱下圖以取得視覺呈現。</block>
  <block id="a4186acf84c4a49d9d83b2b83544a1c8" category="admonition">在容錯移轉叢集中建立仲裁所需的建置區塊至少有兩個。雙節點叢集具有可能會阻止容錯移轉成功的限制。您可以將第三個裝置整合為 tiebreaker 來設定雙節點叢集、但本文件並未說明該設計。</block>
  <block id="7531d1760bee1e64b20f1f8975ccfc87" category="paragraph">例如，命名慣例<block ref="6171c77957e7dd932771522d0f5313aa" prefix=" " category="inline-code"></block> 如下所示：<block ref="201b23a54c1ff68053f15f81feb28cbb" prefix=" " category="inline-code"></block>。</block>
  <block id="db94a118f0347e2dbe0ef8f3c0674d1f" category="paragraph">例如，通常名稱為的區塊節點<block ref="ca9fd584227ff345bca2ef90d5c56e63" prefix=" " category="inline-code"></block> 可以為每個控制器設定主機名稱，例如<block ref="86ee3de8557579a76634023aa5ccc100" prefix=" " category="inline-code"></block> 和<block ref="32665fb108839c23a5db4a463e74176e" prefix=" " category="inline-code"></block>，但在 Ansible 清單中則稱為<block ref="3d1a3866e5aadfdac8b0e07e6740b0fe" prefix=" " category="inline-code"></block>。</block>
  <block id="a0e2a91b693d9eb92fb3153f61dfe4fa" category="section-title">BeeGFS 用戶端伺服器 IPoIB 定址方案</block>
  <block id="7f5258ce731ddb14570317599b9962d9" category="list-text">BeeGFS 儲存服務永遠位於<block ref="7bda92dd6fa15b04835e990fcef5c6f7" prefix=" " category="inline-code"></block> 或<block ref="0dc2ee6e17afcd7bafe09a4e99667f35" prefix=" " category="inline-code"></block>。</block>
  <block id="888c436af0d0f519ac3018d0df7868cd" category="section-title">IPoIB 單一子網路定址方案</block>
  <block id="c9923a234c7bd25e331582479a38a503" category="inline-link-macro">軟體架構</block>
  <block id="9159781ab55be88f1f26fb2b8e4e7420" category="paragraph">根據中列出的優點，本部署指南將使用單一子網路架構 <block ref="2504f4d58c8f68628557b72cf70af5b4" category="inline-link-macro-rx"></block>。</block>
  <block id="8474461676c84fa210da74bbd55e916d" category="paragraph-title">子網路： 100.127.0.0/16</block>
  <block id="e7e7c18d006d81c97d299954457c88f1" category="paragraph">下表提供單一子網路的範圍： 100.127.0.0.0/16 。</block>
  <block id="039d7982c08566a6ae03eaa24cb6c670" category="cell">i1b 或 i4b</block>
  <block id="56fd2b46f686fb44565e25ca28a93fc0" category="cell">100.127.102.0</block>
  <block id="437dac4e62a043183f68652e142fc4a3" category="cell">100.127.102.1 - 100.127.102.255</block>
  <block id="031082c8b0090f55cf416fb5aa46e723" category="cell">100.127.104.1-100.127.104.255</block>
  <block id="2cc4767a51c5d45fecfa3be2bb68037c" category="section-title">IPoIB 兩個子網路定址方案</block>
  <block id="e1c71427409ff54c1742cb28f621dcd5" category="paragraph">不再建議使用兩個子網路定址方案、但仍可實作。如需建議的兩個子網路配置、請參閱下表。</block>
  <block id="29ebd98b5bc8daaac03bfdeefabf090e" category="admonition">如果使用兩個子網路定址方案進行部署、則必須在每個用戶端上設定兩個 InfiniBand 介面、每個都在兩個儲存 IPoIB 子網路中設定一個。如果針對此處列出的每項 BeeGFS 服務使用範例子網路和建議範圍、則用戶端應在「至」範圍內設定一個介面、而在「至」中設定另一個介面<block ref="0c41ff65aa6ae425a8c58863fcb3cef5" prefix=" " category="inline-code"></block><block ref="b4e6b2ab9469bd0c90a8b83c8ebc175f" prefix=" " category="inline-code"></block><block ref="ee8ceb74abe0adf268a6f4a36c7735d9" prefix=" " category="inline-code"></block><block ref="4a52c6bf091e6a4cd2fd08fa070352e3" prefix=" " category="inline-code"></block>。</block>
  <block id="6dc47c91cdf35bbb7cac1fd9e1ff29d7" category="admonition">使用 NVIDIA OFED 驅動程式時、請<block ref="f24d21b8b47b3902162911c8595514e9" prefix=" " category="inline-code"></block> 務必針對您的 Linux 安裝指向正確的「標頭包含路徑」。如需詳細資訊，請參閱的 BeeGFS 文件<block ref="ad551773fffeead9219b565416da2397" category="inline-link-rx"></block>。</block>
  <block id="ba9cd5a8827de277f30213c3a9f74d65" category="list-text">為您的部署選擇子網路定址方案。由於中列出的優點 <block ref="2504f4d58c8f68628557b72cf70af5b4" category="inline-link-macro-rx"></block>、建議您使用單一子網路定址方案。</block>
  <block id="c9e946c487cb8ab99c1f1b0c16839f91" category="list-text">設定隔離代理程式。（如需詳細資訊、請參閱<block ref="36285c27b4e0cfacce4f264137f7dfc3" category="inline-link-rx"></block>。）下列輸出顯示設定一般隔離代理程式的範例。請選擇下列其中一個選項。</block>
  <block id="90fd7614ddbcf02d5873d67a7e08983a" category="paragraph">如需您可以調整的可用調校參數完整清單，請參閱中 BeeGFS HA 角色的效能調校預設值一節<block ref="88ca1124cd8a9bf4401c9daba82c5025" category="inline-link-rx"></block>。 此檔案中叢集中的所有節點或個別節點的檔案都可以覆寫預設值<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> 。</block>
  <block id="75d34bd8c0a1081d52b926e7b1b60689" category="inline-link-macro">檔案節點需求</block>
  <block id="3762dd806b1df772618c9caeb19d9d43" category="list-text">若要在區塊和檔案節點之間提供完整的 200GB/HDR 連線能力、請使用 NVIDIA 開放式 Fabric 企業配送（ MLNX_OFED ）中的開放式子網路管理員（ OpenSM ）套件。所列的 MLNx_OFED 版本 <block ref="1dfb967627cb2f0e7f82d8713fd73b4c" category="inline-link-macro-rx"></block> 隨附於建議的 OpenSM 套件。雖然支援使用 Ansible 進行部署、但您必須先在所有檔案節點上安裝 MLNX_OFED 驅動程式。</block>
  <block id="c113a52851d26cf252ec05ac9628162e" category="list-text">從下載並安裝適用於區塊節點中安裝之磁碟機的最新磁碟機韌體<block ref="df4241174f74102a38fc34a378114b68" category="inline-link-rx"></block>。您可以手動升級它們、或將它們納入<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> Ansible 控制節點的目錄、然後在中填入下列參數<block ref="79d2514d0f856ef18e58ebf8b9716d05" prefix=" " category="inline-code"></block> 、以使用 Ansible 進行升級：</block>
  <block id="a94e8f341d41dc36ead41bc0876ad6b6" category="cell">i1b ： 100.127.101.1/16 i2b ： 100.127.102.1/16</block>
  <block id="3d1a3866e5aadfdac8b0e07e6740b0fe" category="cell">netapp_01</block>
  <block id="ceff1390fad555137a9e76549f5c5c35" category="cell">i2b ： 100.127.102.2/16 i1b ： 100.127.101.2/16</block>
  <block id="4261093cdb58c46bcef081c2a8d50a22" category="cell">i3b ： 100.127.101.3/16 i4b ： 100.127.102.3/16</block>
  <block id="ae9471dd5ddb2f7bbf73f8df6d11ea8d" category="cell">netapp_02</block>
  <block id="6a4b726f26d557d3d41580df69e5f52c" category="cell">i4b ： 100.127.102.4/16 i3b ： 100.127.101.4/16</block>
  <block id="3468e3b520debc18497bb043da48a402" category="cell">i1b ： 100.127.101.5/16 i2b ： 100.127.102.5/16</block>
  <block id="661d119659a3196ad4ea3cd776db51f9" category="cell">i2b ： 100.127.102.6/16 i1b ： 100.127.101.6/16</block>
  <block id="5e4915a0b5172fe24086c6612e459a18" category="cell">i3b ： 100.127.101.7/16 i4b ： 100.127.102.7/16</block>
  <block id="d4255115c2508bc18adb598c6fb0b827" category="cell">i4b ： 100.127.102.8/16 i3b ： 100.127.101.8/16</block>
  <block id="8d05d453ff97ca9e3418e1655244d8d5" category="cell">i1b ： 100.127.103.1/16 i2b ： 100.127.104.1/16</block>
  <block id="f012b1a2bc162eecafcb880e45d300b3" category="cell">i2b ： 100.127.104.2/16 i1b ： 100.127.103.2/16</block>
  <block id="92947a5a536c1c49f8a56988362e49f9" category="cell">i3b ： 100.127.103.3/16 i4b ： 100.127.104.3/16</block>
  <block id="0b566e0d0703bad78bbac23313f53279" category="cell">i4b ： 100.127.104.4/16 i3b ： 100.127.103.4/16</block>
  <block id="d424257a0c5e62d3b63dc54431955dbb" category="cell">i1b ： 100.127.103.5/16 i2b ： 100.127.104.5/16</block>
  <block id="261805237e27c4db09ed2709c5b4ee1d" category="cell">i2b ： 100.127.104.6/16 i1b ： 100.127.103.6/16</block>
  <block id="85dab52b55c7182f1c63b93086d2f9ba" category="cell">i3b ： 100.127.103.7/16 i4b ： 100.127.104.7/16</block>
  <block id="4c348e39f74a16c489df29edbf00971e" category="cell">i4b ： 100.127.104.8/16 i3b ： 100.127.103.8/16</block>
  <block id="aaaaf06756bef5b0c236a0c7e8a41d11" category="cell">i1b ： 100.127.101.9/16 i2b ： 100.127.102.9/16</block>
  <block id="017d565d10fb6b2886e9ca05b035e9a9" category="cell">netapp_03</block>
  <block id="39496d413f74d010a0d1b0c2e9ccce4e" category="cell">i2b:100.127.102.10/16 i1b:100.127.101.10/16</block>
  <block id="6a413ad3d1000df8b4efef19a8814dce" category="cell">i3b ： 100.127.101.11/16 i4b ： 100.127.102.11/16</block>
  <block id="c5c0f84cd4efb77f7e5e98b314d5b73f" category="cell">netapp_04</block>
  <block id="e9be3165e6fc46ba149605e78b46fa81" category="cell">i4b ： 100.127.102.12/16 i3b ： 100.127.101.12/16</block>
  <block id="f3f421c2e886c62a1aec7be061c685b2" category="cell">i1b ： 100 、 127.101.3/16 i2b ： 100 、 127.102.3/16</block>
  <block id="ed8c3ab02a44fc84902022ddcb5fabe8" category="cell">i2b:100.127.102.14/16 i1b:100.127.101.14/16</block>
  <block id="1920edec824c590f137b449a0443311a" category="cell">i3b ： 100.127.101.15/16 i4b ： 100.127.102.15/16</block>
  <block id="73a812d8e4ab9aeff521f90df25f5e23" category="cell">i4b ： 100.127.102.16/16 i3b ： 100.127.101.16/16</block>
  <block id="d3ff883be9e23adf4e03697eb2b136f5" category="cell">i1b ： 100.127.103.9/16 i2b ： 100.127.104.9/16</block>
  <block id="6db8aa9802df58c38910ed6abe1ba11e" category="cell">i2b:100.127.104.10/16 i1b:100.127.103.10/16</block>
  <block id="0e507490f78723195265893fc3dd4a5b" category="cell">i3b ： 100.127.103.11/16 i4b ： 100.127.104.11/16</block>
  <block id="32ac4e07dd77b430c6297e3e8799efd2" category="cell">i4b ： 100.127.104.12/16 i3b ： 100.127.103.12/16</block>
  <block id="f82dba07589e57dfcaf71442a7d0cd71" category="cell">i1b ： 100.127.103.13/16 i2b ： 100.127.104.13/16</block>
  <block id="39c7f24708288668c898771cebf44864" category="cell">i2b:100.127.104.14/16 i1b:100.127.103.14/16</block>
  <block id="28800e3773b860f61c7a9b36b316ed98" category="cell">i3b ： 100.127.103.15/16 i4b ： 100.127.104.15/16</block>
  <block id="ce02872e166a5cf80f50cd4385d0d192" category="cell">i4b ： 100.127.104.16/16 i3b ： 100.127.103.16/16</block>
  <block id="e8ed9c2d9c49ed0524af7cf1d12ba639" category="cell">i1b ： 100.127.103.17/16 i2b ： 100.127.104.17/16</block>
  <block id="63e36b5f8b91c5859b9a169198da7feb" category="cell">netapp_05</block>
  <block id="caf800dba53971258bebfcd9348ac486" category="cell">i2b:100.127.104.18/16 i1b:100.127.103.18/16</block>
  <block id="7b25c9239b1b161705c2cb1b81a33c4a" category="cell">i3b ： 100.127.103.19/16 i4b ： 100.127.104.19/16</block>
  <block id="b9fc71cc5ff86544747cf2b210fbab78" category="cell">netapp_06</block>
  <block id="41510e449bb0d73d0aa0a826b53e7866" category="cell">i4b ： 100 、 127.104.20/16 i3b ： 100 、 127.103.20/16</block>
  <block id="0b2d0578110fe19b63e28d0502beb0c8" category="cell">i1b ： 100.127.103.21/16 i2b ： 100.127.104.21/16</block>
  <block id="30b35cb26fde8fb49ebb562dd442913e" category="cell">i2b:100.127.104.22/16 i1b:100.127.103.22/16</block>
  <block id="864d7d5e08731a767f391f837e7ef23e" category="cell">i3b ： 100.127.103.23/16 i4b ： 100.127.104.23/16</block>
  <block id="2c1d9121314a70e0d2a2ba89aec6fc0e" category="cell">i4b ： 100.127.104.24/16 i3b ： 100.127.103.24/16</block>
  <block id="254542384d1213a7d51adea301584149" category="paragraph">P-State</block>
  <block id="50d1288a06e5d81d403b256e91757cd8" category="paragraph">下列步驟對於叢集中的每個建置區塊都是相同的、無論是用於執行 BeeGFS 中繼資料和儲存服務、還是僅用於儲存服務、除非另有說明。</block>
  <block id="2420c82686a86123afa7fb56270ebdba" category="list-text">使用中指定的模型，設定每個 BeeGFS 檔案節點與四個主機通道介面卡 (HCAs) <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>。根據下列規格、將 HCA 插入檔案節點的 PCIe 插槽：</block>
  <block id="655bb8c05d377bb94fdb062b9b431c69" category="list-text">* Lenovo ThinkSystem SR665 V3 伺服器： * 使用 PCIe 插槽 1 、 2 、 4 和 5 。</block>
  <block id="79d10643d6c05fba16a1207303e6a6c0" category="list-text">* Lenovo ThinkSystem SR665 伺服器： * 使用 PCIe 插槽 2 、 3 、 5 和 6 。</block>
  <block id="32bf9d61588971ac8df90b5b33ea1a67" category="paragraph">將建置區塊架起、使兩個BeeGFS檔案節點在BeeGFS區塊節點上方。下圖顯示 BeeGFS 建置區塊的正確硬體組態、使用 Lenovo ThinkSystem SR665 V3 伺服器做為檔案節點（後視圖）。</block>
  <block id="43c3123c89f5e279387f5f5375ace233" category="inline-link-macro">1M InfiniBand HDR 200GB 直接連接銅線</block>
  <block id="3c75c93f121f7b2c649fd946b1a935cf" category="list-text">使用連接區塊和檔案節點 <block ref="c748126fd5b6f4c3728762b1ce9f2698" category="inline-link-macro-rx"></block>、使它們符合下圖所示的拓撲。</block>
  <block id="be01bbade44d01019fcef77af9fc26e5" category="inline-link-macro">2 公尺 InfiniBand 纜線</block>
  <block id="df8ecd3c13ed9e59d88fa90e10bcc47f" category="list-text">使用特定於 InfiniBand 儲存交換器的、將檔案節點上的其餘 InfiniBand 連接埠連接至儲存網路的 InfiniBand 交換 <block ref="661a89e8980e34439324f4cc2c4b1743" category="inline-link-macro-rx"></block> 器。</block>
  <block id="8e4e4dc9d710c035afcec16817c6b5a3" category="paragraph">當使用分離器纜線將儲存交換器連接至檔案節點時、一條纜線應從交換器分支出來、並連接至淡綠色的連接埠。另一條分離器纜線應從交換器分支出來、並連接至暗綠色的連接埠。</block>
  <block id="5059e1c6d859e6d2e881b28d0a939639" category="paragraph">此外、對於具有備援交換器的儲存網路、淡綠色的連接埠應連接至一台交換器、而深綠色的連接埠則應連接至另一台交換器。</block>
  <block id="0f7c31137702c2d677a474d55058637d" category="paragraph">若要瞭解如何為已驗證的 Lenovo SR665 V3 檔案節點設定網路、請參閱<block ref="05277b4b7d004e546ac1f238e66dd4bf" category="inline-link-rx"></block>。</block>
  <block id="b52d8b061d9ea3d197fbe8093a3eec3f" category="admonition">當使用分離器纜線將儲存交換器連接至檔案節點時、一條纜線應分出並連接至淡綠色的連接埠。另一條纜線應分出並連接至暗綠色的連接埠。此外、對於具有備援交換器的儲存網路、淡綠色的連接埠應連接至一台交換器、而深綠色的連接埠則應連接至另一台交換器。</block>
  <block id="dcc608d1c76fed74a96f75915bc6561f" category="paragraph">若要充分運用PCIe雙向頻寬、請確定每個InfiniBand介面卡上的一個連接埠連接至儲存架構、另一個連接埠則連接至區塊節點。</block>
  <block id="0a31efbdaa47f7da5564c0e43b03e7ea" category="paragraph">您可以視需要覆寫組態參數的預設設定。如需可針對特定工作負載或使用案例進行調整的參數，請參閱<block ref="986eca0f3f99dd3e8d8640fddbc137d2" category="inline-link-rx"></block>。</block>
  <block id="11a09874ac1f09275ccc827cbc44353e" category="paragraph">如需可針對特定工作負載或使用案例進行調整的參數，請參閱<block ref="0ea07919cef6ebe8518c59fc238308fd" category="inline-link-rx"></block>。</block>
  <block id="4d8ee2002969aa8084ace10838f40531" category="list-text">* 安裝在檔案節點上的 Linux 作業系統中的系統設定。 *當您在的步驟 4 中建立 Ansible 庫存時、您可以覆寫預設的 Linux 作業系統設定 <block ref="dbbcb9482f49ee969cddb7f10864cbd0" category="inline-link-macro-rx"></block>。</block>
  <block id="f9a2fc1e1676d37df014ebfbdfa9a90d" category="paragraph">您可以增加 NVIDIA HCA 的讀取要求大小上限。</block>
  <block id="163d5c0f8034e540888104ef4ded6727" category="list-text">BeeGFS 用戶端多軌組態 * _Multi-rail 是指應用程式使用多個不同網路連線（或「 rail 」）來提高效能的能力。</block>
  <block id="8d2644ad58bcbab1442816a77a82fefb" category="paragraph">BeeGFS 實作多軌支援、可在單一 IPoIB 子網路中使用多個 IB 介面。此功能可在 RDMA NIC 之間啟用動態負載平衡等功能、以最佳化網路資源的使用。它也與 NVIDIA GPUDirect 儲存設備（ GDS ）整合、可提供更高的系統頻寬、並減少用戶端 CPU 的延遲和使用率。</block>
  <block id="992c3cb2d0c5be332151afe6ab4d5005" category="paragraph">本文件提供單一 IPoIB 子網路組態的說明。支援雙 IPoIB 子網路組態、但並未提供與單一子網路組態相同的優勢。</block>
  <block id="2d861baf986f6a35c479d15a72c8284c" category="paragraph">HA叢集設計是以兩個廣泛使用的Linux HA專案為基礎：叢集成員資格的電暈器同步、以及叢集資源管理的起搏器。如需更多資訊、請參閱<block ref="0a03558b42ce04f55d37553193f6d76f" category="inline-link-rx"></block>。</block>
  <block id="9d550842e04b4f253a1d3e7bb3297890" category="paragraph">建置區塊連接至兩台 NVIDIA Quantum InfiniBand （ MQM8700 ）交換器。十個BeeGFS用戶端也連接到InfiniBand交換器、用來執行綜合基準測試公用程式。</block>
  <block id="16e30c156c86a2bc6240a20ed7b6fdc4" category="section-title">NVIDIA DGX SuperPOD 和 BasePOD 驗證</block>
  <block id="40fa362dda8b4d271b61c38987bd5131" category="paragraph">NetApp已使用類似的BeeGFS檔案系統（由三個建置區塊組成、並套用中繼資料加上儲存組態設定檔）、驗證NVIDIAs DGX A100 SupermPOD的儲存解決方案。此NVA所描述的解決方案、需要測試資格、測試20部DGX A100 GPU伺服器、執行各種儲存設備、機器學習和深度學習基準測試。以 NVIDIA DGX A100 SuperPOD 所建立的驗證為基礎、 NetApp 上的 BeeGFS 解決方案已獲得 DGX SuperPOD H100 、 H200 及 B200 系統的核准。這項延伸是根據 NVIDIA DGX A100 所驗證的先前基準測試和系統需求而定。</block>
  <block id="aef5a6ba281c6919d0a3e3ff7d8feaf3" category="section-title">設計總覽</block>
  <block id="a1d7af56cbcfca285cd257ae3430a2d3" category="inline-link-macro">架構總覽</block>
  <block id="61dd8d13bec6e1ac3455eb2e13d61261" category="paragraph">NetApp 上的 BeeGFS 解決方案是一種可擴充的建置區塊架構、可針對各種嚴苛的工作負載進行設定。無論是處理許多小型檔案、管理大量檔案作業、或是混合式工作負載、都能自訂檔案系統以滿足這些需求。高可用度的設計採用兩層硬體結構、可在多個硬體層進行自動容錯移轉、確保效能一致、即使在部分系統降級期間也是如此。BeeGFS 檔案系統可在不同的 Linux 套裝作業系統中提供高效能且可擴充的環境、並為用戶端提供單一易存取的儲存命名空間。如需詳細資訊，請參閱 <block ref="45037eea1e64b480408f051dfe424a3c" category="inline-link-macro-rx"></block>。</block>
  <block id="bcaa6be52b9fd12687892056d441d7e4" category="paragraph">若要在 NetApp 上實作 BeeGFS 解決方案、請確保您的環境符合本文件所述的技術需求。</block>
  <block id="7bf6b11b50ef88e180323b13813659d7" category="paragraph">開始之前、請先確認您的硬體符合下列規格、以便在 NetApp 解決方案上進行 BeeGFS 的單一第二代建置區塊設計。特定部署的確切元件可能會因客戶需求而異。</block>
  <block id="694e8d1f2ee056f98ee488bdc4982d73" category="cell">數量</block>
  <block id="d065c203a4b9103e8896c456d35cceea" category="paragraph">每個檔案節點都應符合或超過建議檔案節點的規格、以達到預期的效能。</block>
  <block id="fbb1fad3a6f7d3538a8a1f8e9b6f1f08" category="paragraph">* 建議的檔案節點選項： *</block>
  <block id="5be994ecb912a7fb7448cc05f90afcf7" category="list-text">* Lenovo ThinkSystem SR665 V*</block>
  <block id="c0c1df1f325217c6fa04ce4c03ba875a" category="list-text">* 處理器： * 2 個 AMD EPYC 9124 16C 3.0 GHz （設定為兩個 NUMA 區域）。</block>
  <block id="e679361e60a219fe470d3ddb1f34a7d7" category="list-text">* 記憶體： * 256GB （ 16x 16GB TruDDR5 4800MHz RDIMM ）</block>
  <block id="9946d99f0bd7932556af9646233dd2e8" category="list-text">* PCIe 擴充： * 四個 PCIe Gen5 x16 插槽（每個 NUMA 區域兩個）</block>
  <block id="accd99f82c9ad3f026edd29ae4aaa9d8" category="list-text">適用於作業系統的 RAID 1 中有兩個磁碟機（ 1TB 7.2K SATA 或更高）</block>
  <block id="c618fd1e9213f6ba6e4961e3d1165110" category="list-text">1GbE 連接埠、用於頻內 OS 管理</block>
  <block id="db812d54d604d8c71ffd5e4be563e3e5" category="list-text">1GbE BMC 搭配 Redfish API 、用於頻外伺服器管理</block>
  <block id="15cf8b6d2674b1d9c9b0383ecfee8929" category="list-text">雙熱交換電源供應器和效能風扇</block>
  <block id="22d9c94f9f4ead6ee028aeb105c59845" category="list-text">* Lenovo ThinkSystem SR665 V3 伺服器： *</block>
  <block id="6ea32d47808c9a0a8b4ad8ce7c3d46a8" category="list-text">MCX755106AS-Heat ConnectX-7 、 NDR200 、 QSFP112 、 2 埠、 PCIe Gen5 x16 、 InfiniBand 介面卡</block>
  <block id="b74051cf2ad1a189f8a05453712ca47a" category="cell">儲存網路交換器</block>
  <block id="abf33d394022ed774955ca8b4e892340" category="paragraph">儲存網路交換器的 InfiniBand 速度必須達到 200Gb/s 。建議的交換器機型包括：</block>
  <block id="d7405c22a666ad0d0cb249c209ed8a2a" category="list-text">* NVIDIA QM9700 Quantum 2 NDR InfiniBand 交換器 *</block>
  <block id="8371ac7bb43cddb78635bb02c4ecf477" category="list-text">* NVIDIA MQM8700 Quantum HDR InfiniBand 交換器 *</block>
  <block id="118d935cca54466f59122caecfde09ad" category="section-title">纜線需求</block>
  <block id="1fe3c9d0657c143dd35fa09974da425b" category="cell">產品編號</block>
  <block id="ba2a9c6c8c77e03f83ef8bf543612275" category="cell">長度</block>
  <block id="c3fc989bc0ee89bd4f833252b93ae9fc" category="cell">MCP1650-H001E30 （ NVIDIA 被動銅線、 QSFP56 、 200Gb/s ）</block>
  <block id="9859011cc78b3687689e719ce0d111a5" category="cell">1M</block>
  <block id="e71a6bc9da9d285c521501e596936972" category="cell">交換器模式</block>
  <block id="6fd115591b61cfe21f37443a0afb71e0" category="cell">纜線類型</block>
  <block id="0f0a45940e8946022b971d4ccdf6154e" category="cell">NVIDIA QM9700</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="cell">4</block>
  <block id="979ceabbdb73904b7beec8a0d58c32b8" category="cell">主動式光纖</block>
  <block id="f629de18a131cfa25b9f36ef4690fc92" category="cell">被動銅</block>
  <block id="f3b15dfb9c8e8d6298034f5cc32a59cd" category="cell">NVIDIA MQM8700</block>
  <block id="30657be0f3a2fdc8c171bce10af72efc" category="cell">MFS1S00-H003E （ NVIDIA 主動式光纖纜線、 InfiniBand 200Gb/s 、 QSFP56 ）</block>
  <block id="c1850fdcdcbbaf2fb48f3055382d5a41" category="cell">MCP1650-H002E26 （ NVIDIA 被動式銅線、 InfiniBand 200Gb/s 、 QSFP56 ）</block>
  <block id="8c21a74db8c25bd18866fe78a889642f" category="paragraph">HCA 韌體</block>
  <block id="1f6e93b1ea11aa12e871822a2cabfc76" category="cell">密碼編譯 -43.0.0 、 netaddr-1.3.0 、 ipaddr-2.2.0</block>
  <block id="7af6b9890b6c8ce699616c59f48b5248" category="cell">NetApp E-Series BeeGFS Ansible Collection</block>
  <block id="070afde0274dc6039a8a8949d12a15cd" category="cell">3.2.0</block>
  <block id="ddc7c5e85c28111eae39eef12269daf4" category="inline-link-macro">使用自訂架構</block>
  <block id="a33f0af0b0b4566b693084a9b90c220b" category="paragraph">將建置區塊新增至叢集時、您需要<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>為每個新的檔案節點和區塊節點（ E-Series 陣列）建立檔案。這些主機的名稱需要新增至庫存、以及要建立的新資源。<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block>需要為每個新資源建立對應的檔案。如<block ref="46924488f50abe82484adb9bfcdcde3b" category="inline-link-macro-rx"></block>需詳細資訊、請參閱一節。</block>
  <block id="a9e2fb24cfaef729e583ffb43f910760" category="paragraph">如果某個節點發生硬體或其他故障、HA叢集應自動回應並將其服務移至正常節點、讓系統管理員有時間採取修正行動。在繼續之前、<block ref="9f376b3ee66d4a4a484e850809b96601" category="inline-link-macro-rx"></block>請先參閱一節、以判斷容錯移轉的原因、並解決任何未解決的問題。節點重新開機且正常運作後、您就可以繼續進行容錯回復。</block>
  <block id="d97281ea1240a72da4b3d700493296c1" category="paragraph">雖然在主<block ref="aeb2367c8b6e8485692304c0f57562a5" category="inline-link-macro-rx"></block>頁上介紹了其中一些概念、但在 BeeGFS HA 叢集的背景下重新介紹這些概念是很有幫助的：</block>
  <block id="9faa71c9a363d883afdd567d859ce5b2" category="paragraph">** 維護模式： ** 停用所有資源監控<block ref="bcf91b88f4600ab15eefb2c3b749ba9b" category="inline-link-macro-rx"></block>功能、並防止 Pacemaker 移動或以其他方式管理叢集中的資源（請同時參閱上的一節）。</block>
  <block id="9ce95feb3853f5a2e43ca0d15f2341bd" category="paragraph">一般而言、只要更新 Ansible 清查並重新執行<block ref="6afa1ad605a4192ba2e50e8be9966e68" prefix=" " category="inline-code"></block>命令、即可重新設定 BeeGFS HA 叢集的任何層面。這包括更新警示、變更永久隔離組態或調整BeeGFS服務組態。您<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block>可以使用檔案來調整這些選項、並在<block ref="dc7fd2b3ea1b2b4a060b953a1b281371" category="inline-link-macro-rx"></block>一節中找到完整的選項清單。</block>
  <block id="1b8fa8fe7d656db42e80d5a6ce645ec8" category="paragraph">您也可以在個別節點上停止叢集（這會自動將服務容錯移轉至另一個節點）、不過建議您先將節點置於待命狀態（請參閱<block ref="a588c352114ff4abc3bdc2aa2fbe7c6e" category="inline-link-macro-rx"></block>一節）：</block>
  <block id="5b359307b8bd7b288c8e5b703cdf97d4" category="paragraph">如果執行BeeGFS服務所需的資源失敗、BeeGFS監視器會觸發容錯移轉。如果發生這種情況，則可能在底部沒有列出“故障資源操作”<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>，您應該參考有關如何操作的步驟<block ref="0a749dc3cd00487c17b8cc6492fb44ee" category="inline-link-macro-rx"></block>。</block>
  <block id="3a06f222be74df90b61af2d3590f53fb" category="doc">更新 BeeGFS 版本</block>
  <block id="fb7db280dc24f798821f72f3a6314baa" category="paragraph">請依照下列步驟、使用 Ansible 更新 HA 叢集的 BeeGFS 版本。</block>
  <block id="de08fe25e6d2fa4fb114dee71c6d1955" category="paragraph">BeeGFS 遵循<block ref="95d209426d2bead51bc37b6066b6ee21" prefix=" " category="inline-code"></block>版本管理方案。BeeGFS HA Ansible 角色適用於每個支援的<block ref="708997fbc70843c52165e3f6faed4fa8" prefix=" " category="inline-code"></block>版本（例如、<block ref="4111d90a1d8089aa9621c399414fd198" prefix=" " category="inline-code"></block>和<block ref="7bfdf60ffcc8e818739972660aeebf71" prefix=" " category="inline-code"></block>）。每個 HA 角色都固定在 Ansible 集合發行時可用的最新 BeeGFS 修補程式版本上。</block>
  <block id="901381f9137ae0a8db99e41924ff8ef1" category="section-title">已測試的升級途徑</block>
  <block id="ee70a4cf48b74ec6f64d87c6e1480515" category="section-title">BeeGFS 升級步驟</block>
  <block id="079cd431e62fc3a22940a2261f836245" category="paragraph">下列各節提供更新 BeeGFS Ansible 系列和 BeeGFS 本身的步驟。請特別注意任何額外步驟、以更新BeeGFS主要或次要版本。</block>
  <block id="2cdd3511031afa1a313d8e79d7d576b1" category="section-title">步驟 1 ：升級 BeeGFS 系列</block>
  <block id="f6abfd633f96f44e32dca944a1a80e9c" category="section-title">步驟 2 ：更新 Ansible 庫存</block>
  <block id="95172f30ff12c9cb640f1c8398d0b04a" category="paragraph">對叢集的Ansible庫存檔案進行必要或想要的更新。如<block ref="2e381baad9ceebe6c5aa505098cb18a1" category="inline-link-macro-rx"></block>需您特定升級需求的詳細資訊、請參閱以下章節。<block ref="f7bda10e421919e9d8ced89dacaba34f" category="inline-link-macro-rx"></block>如需設定 BeeGFS HA 清查的一般資訊、請參閱一節。</block>
  <block id="de129d7813d91b8a2df6987dc1e993c1" category="section-title">步驟 3 ：更新 Ansible 教戰手冊（僅更新主要或次要版本時）</block>
  <block id="ee7f4ebf4b84c588316192566a0cb8cd" category="paragraph">如需此教戰手冊檔案內容的詳細資訊<block ref="e4439ff10fb632bb30fbb98653fb7d05" category="inline-link-macro-rx"></block>、請參閱一節。</block>
  <block id="21c4f9c8b31954d3a790c8c8be86b9c8" category="section-title">步驟 4 ：執行 BeeGFS 升級</block>
  <block id="9c8627d3001e5a503b31e4dcd6ecfd87" category="section-title">版本升級注意事項</block>
  <block id="909565cc470ef2ebeaadbdc37ace1c46" category="section-title">連線型驗證變更</block>
  <block id="cd35a558180e5a60f1da5ebd80b06ed2" category="paragraph">如需其他詳細資料和其他組態選項<block ref="dc7fd2b3ea1b2b4a060b953a1b281371" category="inline-link-macro-rx"></block>、請參閱一節中的設定連線驗證步驟。</block>
  <block id="8d4ce44e7e1f685f22f0480066f6dadc" category="summary">升級 HA 叢集 E-Series 儲存陣列的步驟。</block>
  <block id="fecb4be6b37a9fda6b207eaf97363fed" category="doc">升級 E-Series 儲存陣列</block>
  <block id="40039e282631364c07ceaedf99c2cf6c" category="admonition">雖然儲存陣列可以在 HA 叢集上線時進行升級、但建議您將叢集置於維護模式、以便進行所有升級。</block>
  <block id="e23311179b5a9fe1039e35e28290b482" category="section-title">區塊節點升級步驟</block>
  <block id="4a77379e9fcc01e35b7933a91b02a2bb" category="inline-link-macro">升級考量</block>
  <block id="46b8f258a80b91c5c4fffd3d5ece01a4" category="paragraph">下列步驟概述如何使用<block ref="e49e2f9371e7bc22ee200e5f75b6602c" prefix=" " category="inline-code"></block> Ansible 集合更新儲存陣列的韌體。在繼續之前、請檢閱<block ref="6c9178c1392ea3672f35be0055264c17" category="inline-link-macro-rx"></block>以更新 E-Series 系統。</block>
  <block id="bdee1b73e1febbf048ec6a5f2831e85b" category="admonition">只能從 11.70.5P1 升級至 SANtricity OS 11.80 或更新版本。在套用進一步升級之前、必須先將儲存陣列升級至 11.70.5P1 。</block>
  <block id="d71cc28583686cddef55d03b0274281d" category="list-text">驗證您的 Ansible 控制節點是否使用最新的 SANtricity Ansible Collection 。</block>
  <block id="958b4e178dbb15f4d101c7af076a86e0" category="list-text">若要進行離線升級<block ref="32839d1e65aead10794a1c6916b9ba54" category="inline-link-macro-rx"></block>、請從下載集合 tarball 、將其傳輸至您的控制節點、然後執行：</block>
  <block id="b7c167ccf3ed53b1f6e48097aeff0a80" category="list-text">取得儲存陣列和磁碟機的最新韌體。</block>
  <block id="b48447584775163c7687f535f818de69" category="list-text">下載韌體檔案。</block>
  <block id="9c093f14319e8253b8c9b37290597239" category="inline-link-macro">NetApp 支援網站</block>
  <block id="8730ba85a04b4b9309e2eb5e8255e024" category="list-text">* SANtricity OS 和 NVSRAS:* 瀏覽至<block ref="a9f7476d3f84cd9adf0af429b2aa178f" category="inline-link-macro-rx"></block>、並下載適用於您儲存陣列機型的最新版 SANtricity OS 和 NVSRAS* 。</block>
  <block id="482a1edf3e9cd198f6ee458a1cea1af9" category="inline-link-macro">E-Series 磁碟韌體站台</block>
  <block id="bad7f30f1449c1f5ab5e97ce89aee762" category="list-text">* 磁碟機韌體： * 瀏覽<block ref="dc6c914f008159d5969a25304ddfb479" category="inline-link-macro-rx"></block>並下載每個儲存陣列磁碟機機型的最新韌體。</block>
  <block id="c26b41b932786e55f3bf481a6938083e" category="list-text">將 SANtricity OS 、 NVSRAM 和磁碟機韌體檔案儲存在 Ansible 控制節點的<block ref="971398284b1e828e40efc6b6630f0369" prefix=" " category="inline-code"></block>目錄中。</block>
  <block id="09a777fce4515aa1a8dcd86346441924" category="list-text">如有必要、請更新叢集的 Ansible 庫存檔案、以納入所有需要更新的儲存陣列（區塊節點）。如需指引、請參閱<block ref="f7bda10e421919e9d8ced89dacaba34f" category="inline-link-macro-rx"></block>一節。</block>
  <block id="f525483091b48c05e08ecf537a6c9e5a" category="list-text">按照中的說明將叢集置於維護模式<block ref="4b8504199df3a0ade85c92603634e18f" category="inline-link-macro-rx"></block>。</block>
  <block id="390c5fa21f5dea398732a7b3b4024304" category="list-text">建立名為的新 Ansible 教<block ref="bdc450c9ffd9674cb7c88bcb24bfedb8" prefix=" " category="inline-code"></block>戰手冊。請將下列內容填入教戰手冊、將 SANtricity OS 、 NVSRAM 和磁碟機韌體版本取代為您想要的升級路徑：</block>
  <block id="13ec6a1291f9e3d303bbc7f6bece60a3" category="list-text">若要啟動更新、請從 Ansible 控制節點執行下列命令：</block>
  <block id="2268e1bfefae0c28c267b29923d65e0c" category="list-text">完成教戰手冊後、請確認每個儲存陣列都處於最佳狀態。</block>
  <block id="c1fdae9b6a94c3924447ee6c483855cb" category="list-text">將叢集移出維護模式、並驗證叢集處於最佳狀態、每項 BeeGFS 服務都位於其偏好的節點上。</block>
  <block id="3ad9625708cd0c96f347ec4ce5d874d3" category="list-text"><block ref="770c4b58b3b364c4ac52cf5cc555453f" category="inline-link-macro-rx"></block>必須設定或明確停用 BeeGFS 7.2.7 和 7.3.1 。根據您在指定時選擇如何設定連線型驗證<block ref="8920d94093ad4ef03a0a5d6b5041695b" category="inline-link-macro-rx"></block>、您可能需要調整用戶端組態：</block>
  <block id="98ef1fa853194aa97ce7e1d48795cef5" category="admonition">每個支援的主要.次要 版本BeeGFS均維持BeeGFS HA角色。這可讓使用者選擇何時升級主要/次要版本。目前<block ref="b8974e83e3e52aff89dd9fef2fd40433" prefix="(" category="inline-code"></block><block ref="a89433e176d102073aaa272a94fc99a0" prefix="(" category="inline-code"></block>支援 BeeGFS 7.3.x 或 BeeGFS 7.2.x ）。根據預設、兩個角色都會在發行時部署最新的BeeGFS修補程式版本、不過使用者可以選擇覆寫此版本、並視需要部署最新的修補程式。如<block ref="ea68a501eb5a456f305896d5a2358bdb" category="inline-link-macro-rx"></block>需詳細資訊、請參閱最新資訊。</block>
  <block id="3a08f340332ef25464a2e7b7cfe7f232" category="paragraph">指定<block ref="8920d94093ad4ef03a0a5d6b5041695b" category="inline-link-macro-rx"></block>時，如果您選擇預設選項讓 Ansible 自動管理連線型驗證，則<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>可在<block ref="8e9df790452dc085676f10b7754aa94b" prefix=" " category="inline-code"></block>（預設）找到用作共用密碼的。任何需要存取檔案系統的用戶端都必須使用此共用密碼。如果使用設定用戶端，則會自動處理此<block ref="a5e865a21fc7e89f99d76e47a99103f5" category="inline-link-macro-rx"></block>問題。</block>
  <block id="7e96a3522e757b7c2f84f96e80a5204a" category="list-text">類似<block ref="4b612fd25b54d8125236d973922744dd" category="inline-link-macro-rx"></block>專案如何讓使用者部署 / 維護整個 Kubernetes 發佈、以進行橫向擴充運算基礎架構。</block>
  <block id="8de8ee53c552f1f6dd7babfe6c53c01d" category="list-text">使用IOR和MDTest等效能基準測試工具來驗證檔案系統效能是否符合預期。在 <block ref="a0a81c919707a85f36fb8f6f519c1f93" category="inline-link-macro-rx"></block>NetApp 驗證架構的 BeeGFS 一節中、可以找到 BeeGFS 使用的一般測試和參數範例。</block>
  <block id="d27d0d9d916f3c0f77ce2785848cb725" category="paragraph">建立新檔案<block ref="096c36ebf1ab8bf90e099d6808eb57d0" prefix=" " category="inline-code"></block>、並參照<block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block>區段、填入內容如下：</block>
  <block id="245b1bd598314a0a050725e4c5d97c78" category="list-text">磁碟區大小應指定為儲存資源池/磁碟區群組的百分比、且使用特定儲存資源池/磁碟區群組的所有服務/磁碟區的總容量不得超過100。注意使用 SSD 時、建議您在 Volume 群組中保留一些可用空間、以最大化 SSD 效能和使用壽命（按一下<block ref="16def06e05414fadffd7f5aab36ffa19" category="inline-link-macro-rx"></block>以取得詳細資料）。</block>
  <block id="884a1a74c4254f0e663282849a218050" category="paragraph">參照<block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block>區段、<block ref="3ffe66d0860049a5a100c385493d4997" prefix=" " category="inline-code"></block>為叢集中的每個中繼資料服務建立位於的檔案、並填入這些檔案、如下所示：</block>
  <block id="bbadc58dfee849a3a02be97243b97990" category="paragraph">請參考本<block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block>節、<block ref="a16ac980b359b788a73d8add9202cc6f" prefix=" " category="inline-code"></block>為叢集中的每個儲存服務建立位於的檔案、並依照下列步驟填入：</block>
  <block id="3061d639cb074dd9a1f3c7d24d061d94" category="list-text">根據<block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block>指定此檔案系統的 BeeGFS 管理 IP 一節：</block>
  <block id="5a89b4f80128d0b3669b1564943cd510" category="paragraph">如果使用 InfiniBand 直接連接區塊和檔案節點、<block ref="d21519b2c7af8ce90e382199384a8c06" prefix=" " category="inline-code"></block>則必須在每個檔案節點上為直接連接至區塊節點的每個介面設定執行個體。這是透過指定<block ref="a983fd54df8f83bdfdc5756fe288aa56" prefix=" " category="inline-code"></block>時間來完成<block ref="9a73a9f8352cf6494b7d5bc6c3eb6d0a" category="inline-link-macro-rx"></block>的。</block>
  <block id="5c823b437a4fc165b3349c1455412d2b" category="list-text">使用 Curl 或您想要的工具、將 NVIDIA 網站一節中所列 OpenSM 版本的套件下載 <block ref="178d97073525b373723b8dda031e8548" category="inline-link-macro-rx"></block> 到<block ref="4d67f7bc650c0237a4f14903bb4e32de" prefix=" " category="inline-code"></block> 目錄中。例如：</block>
  <block id="fa90fb024c68aeaa307b3486cdb0811c" category="paragraph"><block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block>針對叢集中的每個區塊節點、參考一節中定義的 IP 定址方案<block ref="9a669560bf11c3e8770f91d615f47c78" prefix=" " category="inline-code"></block>、建立檔案並填入如下內容：</block>
  <block id="54e21e619ebcd2038cbf6ad99bac975f" category="paragraph"><block ref="d83d5464c6c0dbe0203869281fc21d2b" category="inline-link-macro-rx"></block>針對叢集中的每個檔案節點、參考一節中定義的 IP 定址方案會建立檔案<block ref="29c5616b1b8c32726b3152860a451439" prefix=" " category="inline-code"></block>、並填入檔案、如下所示：</block>
  <block id="3c51eceddcbfbb08a09bb39a9f19e117" category="paragraph"><block ref="3c51eceddcbfbb08a09bb39a9f19e117" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ea6cc14c3361efc3a01a352f7d8b097" category="admonition">本節中使用的術語定義可在<block ref="aeb2367c8b6e8485692304c0f57562a5" category="inline-link-macro-rx"></block>頁面中找到。</block>
  <block id="7a5c5ebabde54389985d3b9fadd7b425" category="paragraph">雖然<block ref="4d27806b9f70cbf03b3483248ec7d7bc" category="inline-link-macro-rx"></block>提供預先定義的參考組態和規模指南、但有些客戶和合作夥伴可能偏好設計更適合特定需求或硬體偏好的自訂架構。在NetApp上選擇BeeGFS的主要優點之一、就是能夠使用Ansible部署BeeGFS共享磁碟HA叢集、藉由NetApp著作的HA元件來簡化叢集管理並提升可靠性。在NetApp上部署客製化BeeGFS架構仍是使用Ansible、在靈活的硬體範圍內維持類似應用裝置的方法。</block>
  <block id="ab2a4abcb79fad270532717ca3427f92" category="paragraph">本節概述在NetApp硬體上部署BeeGFS檔案系統、以及使用Ansible來設定BeeGFS檔案系統所需的一般步驟。如需有關 BeeGFS 檔案系統設計的最佳實務、以及最佳化範例的詳細資訊<block ref="4d27806b9f70cbf03b3483248ec7d7bc" category="inline-link-macro-rx"></block>、請參閱一節。</block>
  <block id="30de48a7127295863f5f215fde6c08ca" category="paragraph">如需標準慣例、最佳實務做法及填寫範例工作表的詳細資訊<block ref="28bbc43b20c819953a71af93d1c4e109" category="inline-link-macro-rx"></block><block ref="4d6b3e482c415f3bd4b50893909bd85e" category="inline-link-macro-rx"></block>、請參閱 NetApp 驗證架構上的 BeeGFS 和章節。</block>
  <block id="09b6dc0fcffa0dde65b5a3c6c13023a3" category="list-text">歡迎參加 <block ref="a141ba9ea027408279c2684d8c781c5d" category="inline-link-macro-rx"></block>BeeGFS HA 角色、包括 Ansible 、 Python 的安裝版本、以及任何其他 Python 套件。</block>
  <block id="7007891572e5a419add36531fb5f1be8" category="paragraph">可以找到詳細的安裝步驟<block ref="29286ffa550e08bdb3d9fa0a0be38f68" category="inline-link-macro-rx"></block>。</block>
  <block id="2acc893838b1eb90d1c84b809a236835" category="inline-image-macro">建置區塊範例</block>
  <block id="0cf0e609964c9930dfcd66ad6ffe8361" category="paragraph"><block ref="0cf0e609964c9930dfcd66ad6ffe8361" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea853e91a86a86cbc9cea1e039d6ec17" category="inline-image-macro">BeeGFS 部署範例</block>
  <block id="92bf56a169d86e418f4a78aaaf5a3153" category="paragraph"><block ref="92bf56a169d86e418f4a78aaaf5a3153" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2701ff78b7eb357effebb637477114b8" category="paragraph">一般而言、您會將E系列區塊節點的HIC連接埠直接連接至檔案節點的指定主機通道介面卡（適用於InfiniBand傳輸協定）或主機匯流排介面卡（適用於光纖通道和其他傳輸協定）連接埠。建立這些連線的確切方法取決於所需的檔案系統架構、以下是範例<block ref="48bff068417bb27c10f3ddce61de14e9" category="inline-link-macro-rx"></block>：</block>
  <block id="d280e44616dd9cb363292987ea8c1939" category="inline-image-macro">BeeGFS 檔案範例、用於封鎖節點纜線</block>
  <block id="c2ad0d9a44428ac4772ec872090c3da7" category="paragraph"><block ref="c2ad0d9a44428ac4772ec872090c3da7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="85180c66af01717bf125dc82f4f1ed53" category="inline-image-macro">BeeGFS 用戶端纜線範例</block>
  <block id="4864e5d5de47684fb9038e0ef5afff80" category="paragraph"><block ref="4864e5d5de47684fb9038e0ef5afff80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ccb84ec92fe82c0d6ab0a55f23e3eb17" category="paragraph">使用系統設定程式（BIOS / UEFI）介面、確定設定為最大化效能。確切的設定和最佳值會因使用中的伺服器機型而有所不同。提供的指南適用於<block ref="5f1c2d149eae40e1322e9fafa3998295" category="inline-link-macro-rx"></block>、否則請參閱伺服器廠商的文件、以及根據您的模式所提供的最佳實務做法。</block>
  <block id="db2fad664adc100829ebfbffc137527d" category="paragraph">根據列出的文件節點要求安裝支持的操作系統<block ref="9e16c2314a033d11f0704d539a894ebf" category="inline-link-macro-rx"></block>。請根據您的Linux套裝作業系統、參閱下列任何其他步驟。</block>
  <block id="f2cf78e0d1f7ad85dcd842faf7ac4515" category="paragraph">確保所有 HBA 和 HCA 均執行中列出的支援韌體版本<block ref="8b59326e9a63a3b8d68c843e238b964b" category="inline-link-macro-rx"></block>、並視需要進行升級。有關 NVIDIA ConnectX 適配器的其他建議<block ref="9e16c2314a033d11f0704d539a894ebf" category="inline-link-macro-rx"></block>，請參見。</block>
  <block id="8a537f7e0401508a2313fc508d89890f" category="admonition">如<block ref="4aaa57a471c2a91096648d10c36a27be" category="inline-link-macro-rx"></block>需與 BeeGFS 高可用度（ HA ）叢集互動的專屬詞彙與概念、請參閱一節。</block>
  <block id="ea56ba40e3c5a9cd92e8f51ccb6c3ae4" category="inline-image-macro">BeeGFS 元件</block>
  <block id="6097578a9c3bfa602c1e755a66ade1ab" category="paragraph"><block ref="6097578a9c3bfa602c1e755a66ade1ab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09642005b99405e19fa67b3689b21ee7" category="inline-image-macro">HA 架構比較</block>
  <block id="ea01fc482ace12597c68d8d51d799253" category="paragraph"><block ref="ea01fc482ace12597c68d8d51d799253" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdd0fa6524b4c92bc95af5176461013e" category="inline-image-macro">建置區塊</block>
  <block id="2282ea06676d9a4cf9ddadaa654d14b1" category="paragraph"><block ref="2282ea06676d9a4cf9ddadaa654d14b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5523e74e8cf94c323e9b7dc4c2bb722b" category="inline-image-macro">BeeGFS HA 叢集擴充</block>
  <block id="d52adc3743c104eeb589c42277ff0c59" category="paragraph"><block ref="d52adc3743c104eeb589c42277ff0c59" category="inline-image-macro-rx" type="image"></block></block>
  <block id="83b5e8063fa9a23613c6fe11336c236a" category="paragraph"><block ref="83b5e8063fa9a23613c6fe11336c236a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="32105fac7897c11e56236a163fa6d971" category="inline-image-macro">EF600 磁碟機插槽</block>
  <block id="a2df183adc09aa68cc267d7f30848e40" category="paragraph"><block ref="a2df183adc09aa68cc267d7f30848e40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9c5c72057491d0a5ae89a71dfa3f18ec" category="inline-image-macro">SR665V3 直接連接纜線</block>
  <block id="91b0007e09ff2fa20716b9ee1e611eb4" category="paragraph"><block ref="91b0007e09ff2fa20716b9ee1e611eb4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e501a80fb52b2df8a7a16f92da9b76b2" category="inline-image-macro">儲存網路纜線</block>
  <block id="3f713ba1926971f2cec8152bf5b64825" category="paragraph"><block ref="3f713ba1926971f2cec8152bf5b64825" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3e555d7998b255ac574c6430c2d9eaf6" category="inline-image-macro">大容量機架圖</block>
  <block id="5c4a48e1bba2d7e97a5afb3329da8750" category="paragraph"><block ref="5c4a48e1bba2d7e97a5afb3329da8750" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ab0440e4421843b823481ec8c40114fa" category="inline-image-macro">大容量磁碟機插槽圖</block>
  <block id="d471943365921fcc3ec56d2cb62b204d" category="paragraph"><block ref="d471943365921fcc3ec56d2cb62b204d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce0bc242efa1f7752857cac8fae4d239" category="admonition">特別是對於較大型的部署、<block ref="448725115a83c589b33de77889e1e2f3" prefix=" " category="inline-code"></block>建議使用參數覆寫預設的叉具（ 5 ）、以增加 Ansible 平行設定的主機數量。（如需詳細資訊<block ref="2f92d47aead0a3ef15304d32faf6a032" category="inline-link-rx"></block>、請參閱。）最大值設定取決於 Ansible 控制節點上可用的處理能力。上述20個範例是在具有4個CPU（Intel（R）Xeon（R）Gold 6146 CPU @ 3.20GHz）的虛擬Ansible控制節點上執行。</block>
  <block id="e5e317ea18fb59bd91370981078a2eb6" category="inline-image-macro">NUMA 組態</block>
  <block id="b69049bad10aec8bac8579c94488a401" category="paragraph"><block ref="b69049bad10aec8bac8579c94488a401" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12316ea7d4573c51756ec0fb8fe2d354" category="inline-image-macro">網路纜線</block>
  <block id="f8e0ca3438f30328dc02a59212533e4b" category="paragraph"><block ref="f8e0ca3438f30328dc02a59212533e4b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfc8d818052af4f5e6b27ab14809f648" category="inline-image-macro">HCA 雙向頻寬</block>
  <block id="109f376ab71650e10de73ac118faa1cf" category="paragraph"><block ref="109f376ab71650e10de73ac118faa1cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4761409fb0a2290e1a6a09381da73347" category="inline-image-macro">介面流量平衡</block>
  <block id="04e97962e6bb1a104f48fbc1086830e4" category="paragraph"><block ref="04e97962e6bb1a104f48fbc1086830e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26b17225b626fb9238849fd60eabdf60" category="paragraph">+</block>
  <block id="bbd50c1c67920eb714a77de6085a1da7" category="inline-image-macro">EF600 陣列</block>
  <block id="77ab09336108b97d55d660c37ecfa138" category="paragraph"><block ref="77ab09336108b97d55d660c37ecfa138" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa24db2ee9f316acbbbfcc348aff2139" category="inline-image-macro">BeeGFS 服務 Volume 擁有權</block>
  <block id="81722745ad5693a2c53cb7fd80ef42cd" category="paragraph"><block ref="81722745ad5693a2c53cb7fd80ef42cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0db15ba7734a2f0bd68d8f7ec6da53b" category="inline-image-macro">Pacemaker 控制器服務</block>
  <block id="633cadaf9644bd4072214489980f4de0" category="paragraph"><block ref="633cadaf9644bd4072214489980f4de0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08193bfb92c50dc5860e0ae7ab70b8de" category="inline-image-macro">BeeGFS 驗證組態</block>
  <block id="d4d7c2778d639ee21874e3a533b4cb45" category="paragraph"><block ref="d4d7c2778d639ee21874e3a533b4cb45" category="inline-image-macro-rx" type="image"></block></block>
  <block id="25362da3867ffd1fb6b8e5946bb60770" category="inline-image-macro">單一 BeeGFS 基礎建置區塊 IOR 結果</block>
  <block id="815be59c5f2e9977f869e63692f4c698" category="paragraph"><block ref="815be59c5f2e9977f869e63692f4c698" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5ceb441734022db46316b9560c287a7f" category="inline-image-macro">單一 BeeGFS 中繼資料和儲存建置會區塊 IOR 結果</block>
  <block id="2fd2e54693b2c76f97569df889a592fd" category="paragraph"><block ref="2fd2e54693b2c76f97569df889a592fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bc75db64efedca0861be31efc710d385" category="inline-image-macro">單一 BeeGFS 儲存 IOR 結果</block>
  <block id="7f73d3737f911cd518afbf2c214c0c64" category="paragraph"><block ref="7f73d3737f911cd518afbf2c214c0c64" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d63d6ac704b4d61d17ece2c0612e08f5" category="inline-image-macro">三個 BeeGFS 建置區塊的 IOR 結果</block>
  <block id="9c28704420f2090ce57c2e671f191dc0" category="paragraph"><block ref="9c28704420f2090ce57c2e671f191dc0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5910bdf77b7103e1d2c0a93d4c49fc8" category="inline-image-macro">三個 BeeGFS 建置區塊、搭配單一用戶端 IOR 結果</block>
  <block id="f496e88262c7c32001b4a84ce3febf98" category="paragraph"><block ref="f496e88262c7c32001b4a84ce3febf98" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09033d0c41b9b8aab0f364b81b9c69b3" category="inline-image-macro">單一 BeeGFS 中繼資料和儲存建置會區塊 MDTest 結果</block>
  <block id="9a0ca14324a0c9493b33cc5efdcf3460" category="paragraph"><block ref="9a0ca14324a0c9493b33cc5efdcf3460" category="inline-image-macro-rx" type="image"></block></block>
  <block id="362973e7a4fa534a7db69e8dfa0877a8" category="inline-image-macro">兩個 BeeGFS 中繼資料和儲存建置區塊 MDTest 結果</block>
  <block id="070cfbe37786e49518755132f73ded2c" category="paragraph"><block ref="070cfbe37786e49518755132f73ded2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e40e4e443af5090e1039aebba0a6cd24" category="paragraph">BeeGFS 檔案節點</block>
  <block id="05323ece1df24d4488db57fd326597c0" category="cell">E-Series 區塊節點（ EF600 陣列）</block>
  <block id="06fc3bd2748fbbf8f16ce893ede22214" category="paragraph">* 記憶體： * 256GB （每個控制器 128GB ）。* 介面卡： * 2 埠 200GB/HDR （ NVMe / IB ）。* 磁碟機： * 設定為符合所需的中繼資料和儲存容量。</block>
  <block id="1e3cea12222d4b63badbe998ef00b55d" category="cell">InfiniBand 主機卡介面卡（適用於檔案節點）。</block>
  <block id="0594ef398f6882c7d1d98994e3906850" category="paragraph">* 從區塊節點直接連線至檔案節點。 *</block>
  <block id="b38917fef1efbb1471841f7a026c98c3" category="paragraph">* 從檔案節點到儲存網路交換器的連線。 *根據您的 InfiniBand 儲存交換器、從下表中選取適當的纜線選項。+ 建議的纜線長度為 2 公尺；不過、這可能會因客戶的環境而異。</block>
  <block id="a00d274d551f6b74718d44ea2bb6e6c3" category="sidebar">更新 HA 叢集元件</block>
  <block id="67f62a9c37bde591abc850b5a2b22b02" category="list-text">建立叢集密碼的子目錄，並使用 Ansible Vault 加密檔案以保護檔案安全（請參閱<block ref="69d38d4b5deda302461f6461c5317006" category="inline-link-rx"></block>）：</block>
  <block id="8e7f7bdc10cb596910cce6b79c2e2ed6" category="list-text">創建子目錄<block ref="fc7cb0a7b647c6ff35b553a10d616c4b" prefix=" " category="inline-code"></block>。</block>
  <block id="166355001b2692bdc29d698719b5f702" category="list-text">在<block ref="fc7cb0a7b647c6ff35b553a10d616c4b" prefix=" " category="inline-code"></block>目錄中，建立一個標示為的密碼檔案<block ref="97a67fc90fe6d13cef22fa951de48f8d" prefix=" " category="inline-code"></block>。</block>
  <block id="da8d8318ceb4254068ec25272c92bc85" category="list-text">使用下列項目填入<block ref="b8d32e4c2d78b6e404b69e5c1fbf3118" prefix=" " category="inline-code"></block>，根據您的組態取代所有的使用者名稱和密碼參數：</block>
  <block id="7e60d329db54d74d692f53620b366281" category="list-text">在出現提示時執行<block ref="150063209c60b18e2173569bd82ec639" prefix=" " category="inline-code"></block>並設定資料保險箱密碼。</block>
  <block id="1d2459ca9cef1e38badde9d192eff628" category="admonition">如果<block ref="f2bf771afbc16045e1951ded58c56f98" prefix=" " category="inline-code"></block>已經<block ref="63a9f0ea7bb98050796b649e85481845" prefix=" " category="inline-code"></block>是，則您可以選擇性地省略，<block ref="424240cd4e5c359372b7f199431603d5" prefix=" " category="inline-code"></block>並在執行教戰手冊時指定<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block>選項。</block>
  <block id="7da4cabbb2f4c4e53ccb9660355b7dd1" category="list-text">NVIDIA DGX SuperPOD 系統採用 DGX ，搭配 A100 ， H100 ， H200 和 B200 GPU 。</block>
  <block id="e02a1b9bf28135b2931b63ac814ff7ac" category="sidebar">NVA-1174 - BeeGFS on NetApp EF 系列搭配 NVIDIA DGX SuperPOD 系統</block>
  <block id="049125cf8ec62098912c4f2c8db9f61b" category="paragraph"><block ref="e6211db0073064ade016ad4558767968" prefix=" " category="inline-code"></block>如果叢集正常運作，則不會顯示內容。如果叢集目前處於維護模式，則內容會報告為<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block>。若要啟用維護模式執行：</block>
  <block id="ae7cd547e02c1f67adce822f49e1815f" category="admonition">視叢集大小而定，整個叢集可能需要幾秒鐘或幾分鐘的時間才能停止，或顯示為「已啟動<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>」。如果當機超過五分鐘，則<block ref="88f9ea6da6d01a3e529f8aa41e0e4643" prefix=" " category="inline-code"></block>在執行「 Ctrl+C 」取消命令之前，請先登入叢集的每個節點，然後使用<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>查看叢集服務（電暈器同步 / 節律器）是否仍在該節點上執行。從叢集仍在作用中的任何節點、您都可以檢查封鎖叢集的資源為何。手動解決此問題、命令應已完成或可重新執行、以停止任何剩餘的服務。</block>
  <block id="5dfbb07786784ecd0c0829f3624766bf" category="summary">在 HA 叢集中升級節律器和電暈器同步套件的步驟。</block>
  <block id="256ad8b6e95e34f8784f6b80bcf07e62" category="doc">升級 HA 叢集中的 Pacemaker 和 corosync 套件</block>
  <block id="f9b43d72a27351762f4809a45ab3809e" category="paragraph">請依照下列步驟升級 HA 叢集中的節律器和電暈器同步套件。</block>
  <block id="93bcc5a6e49472d3ee328b74217072a4" category="paragraph">升級 Pacemaker 和 corosync 可確保叢集從新功能，安全修補程式和效能改善中獲益。</block>
  <block id="d5870f2e8bb30d5fd8dba0f3bcba2ff2" category="section-title">升級方法</block>
  <block id="3910bde80db45114f03b57a1cea719d7" category="inline-link-macro">升級 Pacemaker 叢集</block>
  <block id="fbe527032decd848e5233378716880ef" category="paragraph">升級叢集有兩種建議方法：滾動升級或完全關閉叢集。每種方法都有自己的優缺點。您的升級程序可能會因心律調整器版本而異。請參閱 ClusterLabs 的<block ref="f46eb388ba6d1748ea24c2340bf59c47" category="inline-link-macro-rx"></block>說明文件，以判斷要使用哪種方法。在遵循升級方法之前，請確認：</block>
  <block id="3875a0129b5e7200d99ab95798b4ca49" category="list-text">NetApp BeeGFS 解決方案支援全新的節律器和電暈器同步套件。</block>
  <block id="14bc480662de00a882a587d6c753c533" category="list-text">BeeGFS 檔案系統和 Pacemaker 叢集組態有有效的備份。</block>
  <block id="efd7093d185f1f3506d2f99fa2406088" category="list-text">叢集處於正常狀態。</block>
  <block id="22e44c8383bdd51e7823eed40de12db4" category="section-title">循環升級</block>
  <block id="49939651104a8f4bf473311d280796b9" category="paragraph">此方法涉及從叢集中移除每個節點，將其升級，然後將其重新引入叢集，直到所有節點都執行新版本為止。這種方法可讓叢集持續運作，這是較大型 HA 叢集的理想選擇，但在處理過程中會有執行混合版本的風險。在雙節點叢集中，應避免使用此方法。</block>
  <block id="4fe0553e4bb27a05a3680575a66540a7" category="list-text">確認叢集處於最佳狀態，且每個 BeeGFS 服務都在其偏好的節點上執行。如 <block ref="1d1f85855f64d7b14ac7c0ae29a52511" category="inline-link-macro-rx"></block> 需詳細資訊、請參閱。</block>
  <block id="afcf7685b4b8a18d898e6c84f2b84166" category="list-text">若要升級節點，請將其置入待命模式，以耗盡（或移動）所有 BeeGFS 服務：</block>
  <block id="36b48c4e047e7d7107eaa995708914b1" category="list-text">執行下列步驟，確認節點的服務已耗盡：</block>
  <block id="9c1adfab509ac587de61a03c43cda767" category="paragraph">請確定未將任何服務回報為待命節點上的服務<block ref="8428552d86c0d262a542a528af490afa" prefix=" " category="inline-code"></block>。</block>
  <block id="2b26b4d53851d442c712564adfb4b445" category="admonition">視叢集大小而定，服務可能需要幾秒鐘或幾分鐘才能移至姊妹節點。如果 BeeGFS 服務無法在姊妹節點上啟動<block ref="c31c76dcbaad8e2836998d58888cb639" category="inline-link-macro-rx"></block>，請參閱。</block>
  <block id="e2939fee46b1883f2b4fb3fec03f83fb" category="list-text">關閉節點上的叢集：</block>
  <block id="7a3db5a8197b212244d160de60f682da" category="list-text">升級節點上的 Pacemaker ， corossync 和 PCS 套件：</block>
  <block id="054ce71db50c3d6b29d6ddfda5264cc9" category="admonition">套件管理員命令會因作業系統而異。下列命令適用於執行 RHEL 8 及後續版本的系統。</block>
  <block id="0a761ff507fc5bb4859d6d425b2b120a" category="list-text">在節點上啟動 Pacemaker 叢集服務：</block>
  <block id="7a98d33ee2035dc15b33a6ccaea4753b" category="list-text">如果<block ref="3ecf2642759a04bd3616642bd56bed59" prefix=" " category="inline-code"></block>套件已更新，請使用叢集重新驗證節點：</block>
  <block id="039f324455c000e0dad7b93f641cd7bf" category="list-text">確認此工具的節律器組態仍然有效<block ref="419527551374e0fe5024d6bb1f3f2814" prefix=" " category="inline-code"></block>。</block>
  <block id="51c1fa488cc911104720c97dad8ec5eb" category="admonition">只需在叢集升級期間驗證一次即可。</block>
  <block id="265a35348bf91dcba3e55e3454e3c155" category="list-text">將節點從待機狀態移出：</block>
  <block id="ea285586c4e419f14cfb8b432dd0d4b6" category="list-text">將所有 BeeGFS 服務重新部署回其偏好的節點：</block>
  <block id="1fa806fcbe49745af0c2b70e8779b73d" category="list-text">針對叢集中的每個節點重複上述步驟，直到所有節點都執行所需的節律器，電暈器同步和 PCS 版本為止。</block>
  <block id="d90c1dfacfcfe6034c62dbbf554aa336" category="list-text">最後，請執行<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>並確認叢集狀況良好，並<block ref="60c21e5e7bb2f6f1f478a497d52448f3" prefix=" " category="inline-code"></block>回報所需的節律器版本。</block>
  <block id="894166f580af39476db30ddf0b39e93c" category="admonition">如果<block ref="60c21e5e7bb2f6f1f478a497d52448f3" prefix=" " category="inline-code"></block>報告為「 ixed 版本」，則叢集中的某個節點仍在使用舊版 Pacemaker 執行，需要升級。如果任何升級的節點無法重新加入叢集，或資源無法啟動，請查看叢集記錄，並參閱 Pacemaker 版本說明或使用者指南，以瞭解已知的升級問題。</block>
  <block id="2360c7132bb0f703a6af1f784e30721f" category="section-title">完成叢集關機</block>
  <block id="c56b96ad19ba7ad1a0a28a5dd92fccd7" category="paragraph">在此方法中，所有叢集節點和資源都會關閉，節點會升級，然後重新啟動叢集。如果節律器和電暈器同步版本不支援混合版本的組態，則必須使用此方法。</block>
  <block id="ada4df9ccfff1547c1f09456386caf07" category="list-text">關閉所有節點上的叢集軟體（ Pacemaker 和 corosync ）。</block>
  <block id="ec37f5378eeba13984a263685014a655" category="admonition">視叢集大小而定，整個叢集可能需要幾秒鐘或幾分鐘才能停止。</block>
  <block id="26dce8ee8153faa4816d7468ec720330" category="list-text">當所有節點上的叢集服務都關閉之後，請根據您的需求，升級每個節點上的 Pacemaker ， corosync 和 PCS 套件。</block>
  <block id="142f756ea3d035f02b974a98db74916c" category="list-text">升級所有節點之後，請在所有節點上啟動叢集軟體：</block>
  <block id="492e09d8d491f90ea20fad54f615816a" category="list-text">如果<block ref="3ecf2642759a04bd3616642bd56bed59" prefix=" " category="inline-code"></block>套件已更新，請重新驗證叢集中的每個節點：</block>
  <block id="fe0b373cea492c0574adf218141f90b9" category="list-text">最後，請執行<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>並確認叢集狀況良好，並<block ref="60c21e5e7bb2f6f1f478a497d52448f3" prefix=" " category="inline-code"></block>報告正確的節律器版本。</block>
  <block id="c07d2f5207c17b96abd3e5c6aa314715" category="admonition">如果<block ref="60c21e5e7bb2f6f1f478a497d52448f3" prefix=" " category="inline-code"></block>報告為「 ixed 版本」，則叢集中的某個節點仍在使用舊版 Pacemaker 執行，需要升級。</block>
  <block id="6b923a0944f4926d7adb6a03c07c9a69" category="summary">更新檔案節點 ConnectX-7 介面卡韌體的步驟。</block>
  <block id="8fce27499bf82a3c6907d5382138d466" category="doc">更新檔案節點介面卡韌體</block>
  <block id="c344aab4fba3911c1af618a881763c15" category="paragraph">請依照下列步驟，將檔案節點的 ConnectX-7 介面卡更新為最新的韌體。</block>
  <block id="89cdf8293572c88c65745474062df951" category="paragraph">可能需要更新 ConnectX-7 介面卡韌體，才能支援新的 MLNX_OFED 驅動程式，啟用新功能或修正錯誤。本指南將使用 NVIDIA 的<block ref="073f22c545d6312ca19220ec3d6d9547" prefix=" " category="inline-code"></block>公用程式進行介面卡更新，因為它易於使用且效率高。</block>
  <block id="d41774d5dcaa69f5393d8da7101754ec" category="paragraph">本指南涵蓋兩種更新 ConnectX-7 介面卡韌體的方法：滾動更新和雙節點叢集更新。根據叢集的大小，選擇適當的更新方法。執行韌體更新之前，請確認：</block>
  <block id="1d79fc0255b694c56bd5dea749c741cd" category="list-text">已安裝支援的 MLNX_OFED 驅動程式，請參閱<block ref="178d97073525b373723b8dda031e8548" category="inline-link-macro-rx"></block>。</block>
  <block id="e9b1ac80ddb831f90b95b913fae55a9f" category="section-title">韌體更新準備</block>
  <block id="6b9b7c71638c919ff18548623403c799" category="inline-link-macro">NVIDIA 的支援網站</block>
  <block id="28adaa75c816b77283bde4522b8cc249" category="paragraph">建議您使用 NVIDIA<block ref="073f22c545d6312ca19220ec3d6d9547" prefix=" " category="inline-code"></block> 公用程式來更新節點的介面卡韌體，此韌體與 NVIDIA 的 MLNx_OFED 驅動程式一起提供。開始更新之前，請先從下載介面卡的韌體映像<block ref="1a2b49373c8b50530166a64f6ed91a90" category="inline-link-macro-rx"></block>，並將其儲存在每個檔案節點上。</block>
  <block id="415a4f653138a852500ffee84bf5c1b4" category="inline-link-macro">OEM 韌體</block>
  <block id="4f4c0bb368cf9ad01cdc3ff868ebf17c" category="admonition">對於 Lenovo ConnectX-7 介面卡，請使用<block ref="afeb1af9ee3dad5422ab912ec5ed916d" prefix=" " category="inline-code"></block> NVIDIA 頁面上的工具<block ref="01d7d47a93ae1e4d58f3e91b6cd1d0c0" category="inline-link-macro-rx"></block>。</block>
  <block id="da3485dbd4b4e5883fb3b1f4e9556949" category="section-title">滾動更新方法</block>
  <block id="1f97f3d9707d91def548aa8a2e62b91d" category="paragraph">建議任何具有兩個以上節點的 HA 叢集使用此方法。這種方法涉及一次在一個檔案節點上更新介面卡韌體，讓 HA 叢集能夠保留服務要求，不過建議您在此期間避免服務 I/O 。</block>
  <block id="a6e5bc149cec5a68a62c041d3c6a0b33" category="list-text">選擇要更新的檔案節點，並將其置於待命模式，以從該節點移除（或移動）所有 BeeGFS 服務：</block>
  <block id="a6f5d5c821201989f4f5f4b1434bbab2" category="list-text">執行下列步驟，確認節點的服務已耗盡：</block>
  <block id="879176c1b609d9d4155509330b98a7dc" category="paragraph">驗證沒有任何服務報告為待命節點上的服務<block ref="8428552d86c0d262a542a528af490afa" prefix=" " category="inline-code"></block>。</block>
  <block id="9d2557a9c1e296e086e87e0ea139e32b" category="admonition">視叢集大小而定， BeeGFS 服務可能需要幾秒鐘或幾分鐘才能移至姊妹節點。如果 BeeGFS 服務無法在姊妹節點上啟動<block ref="c31c76dcbaad8e2836998d58888cb639" category="inline-link-macro-rx"></block>，請參閱。</block>
  <block id="d15de38a9cc8343b26b76e04866effdf" category="list-text">使用更新介面卡韌體<block ref="073f22c545d6312ca19220ec3d6d9547" prefix=" " category="inline-code"></block>。</block>
  <block id="4d87c4ea16f4cf2adbeefb288c4840e6" category="paragraph">記下<block ref="0e4a508dbc00c0684c2ed58952be4420" prefix=" " category="inline-code"></block>接收韌體更新的每個介面卡的。</block>
  <block id="69b31d926cd00aa9de80cf7b14eab218" category="list-text">使用公用程式重設每個介面卡<block ref="45e6a20266bfc1fa2c25471ddf52308b" prefix=" " category="inline-code"></block>以套用新韌體。</block>
  <block id="25eb42c85a64acec04cf19a3ad2b7395" category="inline-link-macro">NVIDIA 的 mlxfwreset 限制</block>
  <block id="435a7ccec9f9ff6251954e95de4d0077" category="admonition">某些韌體更新可能需要重新開機才能套用更新。請參閱<block ref="ebfc57e157ebe1ff1768e220a8dc329c" category="inline-link-macro-rx"></block>以取得指引。如果需要重新開機，請執行重新開機，而非重設介面卡。</block>
  <block id="d974fd8f7ae3828a4b95f6e90d4c579a" category="list-text">停止 opensm 服務：</block>
  <block id="6a878a1cd043169c82c66374f6fec2a5" category="list-text">針對先前註明的每個項目執行下列命令<block ref="0e4a508dbc00c0684c2ed58952be4420" prefix=" " category="inline-code"></block>。</block>
  <block id="bd1516e27db5d9760920cc6ac65637f7" category="list-text">啟動 opensm 服務：</block>
  <block id="e8dd47a8d6e5d7d4ce23864009576781" category="list-text">執行<block ref="64284c8d228536994c2b22912d2dfd88" prefix=" " category="inline-code"></block>並驗證所有介面卡是否以所需的韌體版本執行：</block>
  <block id="afdebfdd553f315294b6e2613a68bac2" category="paragraph">對叢集中的每個檔案節點重複這些步驟，直到所有介面卡都已更新為止。</block>
  <block id="2e24e5f97c6ecd461030eb1eb884379b" category="section-title">雙節點叢集更新方法</block>
  <block id="305a0f364da0ff85c6c92c4680866c24" category="paragraph">建議只有兩個節點的 HA 叢集採用此方法。這種方法類似於滾動更新，但包含其他步驟，可在某個節點的叢集服務停止時，避免服務停機。</block>
  <block id="8daaa6355694edbaba2cb5a9b13ce781" category="list-text">選擇要更新的檔案節點，並將節點置於待命模式，以從該節點移除（或移動）所有 BeeGFS 服務：</block>
  <block id="370d6736b9730ee3ed471c975dca3040" category="list-text">執行以下步驟，確認節點的資源已耗盡：</block>
  <block id="04adfc113361937ceba2fcd8d61b3c92" category="admonition">視叢集大小而定， BeeGFS 服務可能需要幾秒鐘或幾分鐘的時間，才能在姊妹節點上報告為<block ref="8428552d86c0d262a542a528af490afa" prefix=" " category="inline-code"></block>。如果 BeeGFS 服務無法啟動，請<block ref="c31c76dcbaad8e2836998d58888cb639" category="inline-link-macro-rx"></block>參閱。</block>
  <block id="322895ffeb919484b312ccccded9b8ac" category="list-text">將叢集置於維護模式。</block>
  <block id="936f1016c7b40dcadce05d9585e03c4c" category="list-text">將叢集移出維護模式。</block>
  <block id="7190ac3ac7ea745d4c9a31ade586f240" category="paragraph">請依照下列步驟升級 HA 叢集的 E 系列儲存陣列元件。</block>
  <block id="91ba484bdb8dfae4fcf9b5f1cb4c9407" category="paragraph">使用最新的韌體、讓 HA 叢集的 NetApp E-Series 儲存陣列保持在最新狀態、以確保最佳效能和更高的安全性。儲存陣列的韌體更新是透過 SANtricity OS ， NVSRAM 和磁碟機韌體檔案來套用。</block>
  <block id="f04c5fdc9e10396af2f82ce9565f65a5" category="list-text">確保叢集處於最佳狀態，且其慣用節點上的每個 BeeGFS 服務都處於最佳狀態。如 <block ref="1d1f85855f64d7b14ac7c0ae29a52511" category="inline-link-macro-rx"></block> 需詳細資訊、請參閱。</block>
  <block id="d5c73bafdf627c28554a39d3e655f1bf" category="cell">主動式光纖（包括收發器）</block>
  <block id="c44b2ed9fc36044ebe1e8b9057c4a281" category="cell">MMA4Z00-NS （多重模式， IB/ETH ， 800Gb/s 2x400Gb/s 雙埠 OFP ）</block>
  <block id="53fff94cbca4161cd31d168451033f2e" category="cell">MFP7E20-Nxxx （多重模式， 4 通道對兩條 2 通道分離器光纖纜線）</block>
  <block id="804e83e6974e7f6076f940326b985a83" category="cell">MMA1Z00-NS400 （多重模式， IB/ETH ， 400GB / 秒單埠 QSFP-112 ）</block>
  <block id="b2f1f9abf8117b3cde0475d1adf7a64f" category="cell">MCP7Y40-N002 （ NVIDIA 被動銅線分離器纜線， InfiniBand 800Gb/s 至 4x 200Gb/s ， OSFP 至 4x QSFP112 ）</block>
  <block id="6c3a5f2fbe0e1eb20af96ccd813c89b0" category="cell">N6000-890834-D02.dp</block>
  <block id="088914339db9effda3ac57ec2e9439b6" category="cell">圍欄代理（紅魚 / APC ）</block>
  <block id="f8b6aa2ae96c25a05a0cc6e26a9236d7" category="sidebar">升級 Pacemaker 和電暈器同步套件</block>
  <block id="5a2c09ccb6952069726dcfb2e92a5573" category="paragraph">用於執行 Ansible CLI 的實體或虛擬機器。</block>
  <block id="91587c91e5cdb42cedda71e8eeb8c25b" category="paragraph">區塊節點</block>
  <block id="795e5fe3e5c761c4087c78270457d3cf" category="paragraph">E 系列儲存系統。</block>
  <block id="0f558243fbf45f1cd840fff01957f57b" category="paragraph">用戶端</block>
  <block id="21c9dff2dfe238c697e5559025dfda6b" category="paragraph">在開始部署之前，請先熟悉 Ansible 的設定方式，以及如何在 NetApp 解決方案上部署 BeeGFS 。</block>
  <block id="f2b1ea87b49c6968457bc3b3b6f33a2c" category="paragraph">Ansible 清單是一個目錄結構，列出要跨部署 BeeGFS 檔案系統的檔案和區塊節點。其中包含主機，群組和變數，說明所需的 BeeGFS 檔案系統。Ansible 庫存必須儲存在 Ansible 控制節點上，而 Ansible 控制節點是可存取檔案的任何機器，以及用來執行 Ansible 教戰手冊的區塊節點。您可以從下載範例庫存<block ref="5f5a4f2bb780d1d47d6a1c5865c757e8" category="inline-link-rx"></block>。</block>
  <block id="acb5132e1a51a9d194c229e67932a12d" category="paragraph">若要套用 Ansible 庫存所述的組態，請使用 NetApp E 系列 Ansible 集合（可從取得）中提供的各種 Ansible 模組和角色<block ref="e65da35b507a01fbe5db4a35e8ffaf77" category="inline-link-rx"></block>，以部署端點對端點解決方案。</block>
  <block id="cc6125df0f9b7b5b37d4ffff33715e71" category="paragraph">使用 Ansible 庫存結構定義 BeeGFS HA 叢集。</block>
  <block id="33aca05a2f51216eef0b90c05b6567b8" category="paragraph">任何具有前一次 Ansible 體驗的人都應該知道 BeeGFS HA 角色會實作自訂方法，以探索哪些變數（或事實）適用於每個主機。這項設計簡化了 Ansible 庫存的結構，以描述可在多部伺服器上執行的資源。</block>
  <block id="b6e73e778c564bae063904fe87b3b01e" category="paragraph">Ansible 庫存通常包含和<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block>中的檔案<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block>，以及<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block>將主機指派給特定群組的檔案（以及可能群組至其他群組的檔案）。</block>
  <block id="b9758d9ee0685ff02f04a117857ffdda" category="paragraph">此配置可讓每個資源的BeeGFS服務、網路和儲存組態在單一位置定義。在幕後、BeeGFS角色會根據此庫存結構、針對每個檔案和區塊節點集合必要的組態。</block>
  <block id="fe99ab31f2d1e99fadb6702978dadabc" category="paragraph">NetApp 上的 BeeGFS 可部署至已驗證的檔案和區塊節點，使用 Ansible 搭配 NetApp 的 BeeGFS 建置區塊設計。</block>
  <block id="0a3636ada6bc6afc16847b56ea2270c1" category="paragraph">NetApp 上的 BeeGFS 解決方案是使用 Ansible 部署， Ansible 是一款可自動化應用程式部署的熱門 IT 自動化引擎。Ansible 使用一系列的檔案，統稱為庫存，用來建立您要部署的 BeeGFS 檔案系統的模型。</block>
  <block id="34d48088e2054cea7cef0c603ff25c57" category="paragraph">Ansible 允許 NetApp 等公司使用 Ansible Galaxy 上的可用集合來擴充內建功能（請參閱<block ref="09c3689692686597c3ced866c6122b6c" category="inline-link-rx"></block>）。集合包括執行特定功能或工作（例如建立 E 系列 Volume ）的模組，以及可呼叫多個模組和其他角色的角色。此自動化方法可縮短部署BeeGFS檔案系統和基礎HA叢集所需的時間。此外，它也簡化了叢集和 BeeGFS 檔案系統的維護與擴充。</block>
  <block id="219dedb226654f3cbb1fcae9a1dbf6f0" category="paragraph">這些設定檔說明NetApp BeeGFS建置區塊的完整建議組態設定檔。對於每個部署，中繼資料和儲存建置區塊或僅儲存服務的建置區塊數量可能會因容量和效能需求而異。</block>
  <block id="6d8fa04177add6fae81330f784f2ec28" category="paragraph">若要設定 Ansible 控制節點，您必須指定可透過網路存取的虛擬或實體機器，以存取 NetApp 解決方案上 BeeGFS 部署的所有檔案和區塊節點。</block>
  <block id="95b6926dc09df085df3f516ff202c9b3" category="paragraph">請檢閱<block ref="1048598744d9ad3deb64b0d833d9a48d" category="inline-link-macro-rx"></block>以取得建議套件版本的清單。下列步驟已在 Ubuntu 22.04 上測試。有關首選 Linux 發行套件的特定步驟，請參閱<block ref="34c856f227a1cab1577af9d235784d24" category="inline-link-rx"></block>。</block>
  <block id="ac80ffa19a9be958e8c0594639394b8a" category="list-text">從 Ansible 控制節點安裝下列 Python 和 Python Virtual Environment 套件。</block>
  <block id="44bf2f842c54b0fad1167e3efd65cf55" category="list-text">啟動虛擬環境。</block>
  <block id="3f6f2236da97e94c248453e2c9ca404a" category="list-text">在啟動的虛擬環境中安裝所需的 Python 套件。</block>
  <block id="f866bd2f581df9353b6db613e08d0aaf" category="list-text">使用 Ansible Galaxy 安裝 BeeGFS 集合。</block>
  <block id="c6222175d36e533518dc3135dd2f14f8" category="list-text">驗證 Ansible ， Python 和 BeeGFS 集合的安裝版本是否與匹配<block ref="1048598744d9ad3deb64b0d833d9a48d" category="inline-link-macro-rx"></block>。</block>
  <block id="daa4277dc829ecd5acb1f7d3acbfb93e" category="list-text">設定無密碼 SSH ，允許 Ansible 從 Ansible 控制節點存取遠端 BeeGFS 檔案節點。</block>
  <block id="438d1f86821733d8903d370ff77ab533" category="list-text">如果需要，在 Ansible 控制節點上產生一對公開金鑰。</block>
  <block id="80bc73f6477a99e95ffb1ccead55050a" category="list-text">為每個檔案節點設定無密碼 SSH 。</block>
  <block id="e1024b07dc0ac4ec1b8c15255d2b7975" category="list-text">將所有 HCA 韌體更新至使用<block ref="d69ec72bf0ba3250c61993db3810f97e" category="inline-link-macro-rx"></block>指南中建議的版本<block ref="27ecbcefd12957257b84a6d4c5608591" category="inline-link-macro-rx"></block>。</block>
  <block id="848b1c364446f81000a150ab3996f166" category="paragraph">有關配置端口的說明，請轉至<block ref="98ec84f5a45223dfc7ed1f4ec5ef436f" category="inline-link-rx"></block>。</block>
  <block id="4e667bcd22eef3e9620c534781a563ea" category="paragraph">設定名稱可讓您更容易在後續章節中參考每個系統。有關設置陣列名稱的說明，請轉至<block ref="2617f8aa7c55cffc3912e0de8d2af7d2" category="inline-link-rx"></block>。</block>
  <block id="3c5c0f41bab0c547cd353ca56b505d33" category="section-title">軟體與韌體需求</block>
  <block id="d72c6977d4f8f0d9276e0483c1e643ab" category="paragraph">為了確保可預測的效能和可靠性， NetApp 解決方案上的 BeeGFS 版本會使用特定版本的軟體和韌體元件進行測試。實作解決方案需要這些版本。</block>
  <block id="6b5b0d6dfb6af2b4c98938bb01cbeea1" category="cell">10.x</block>
  <block id="f82f58377452476d1d96442db364a64d" category="cell">Ansible 核心</block>
  <block id="f850f5faa66f6a7ca2ac7f33f7eba944" category="cell">&gt;= 2.13.0</block>
  <block id="bd03200a597eed96961a6907dc36cfbd" category="cell">3.10</block>
  <block id="48858ce4570016a1f8e1d1a8b871d328" category="admonition">下次執行 Ansible 劇本時，此設定將被覆蓋。</block>
  <block id="49b54ab3b1445f79ca94c7085cad41ef" category="list-text">重新啟動<block ref="00e28a828e75d362a33f4cdabec833b1" prefix=" " category="inline-code"></block> 。</block>
  <block id="08386a651a8ef93e4bc0df7cf35d9b70" category="list-text">驗證 E 系列儲存陣列的磁碟區是否存在。</block>
  <block id="5f6ac3389caa4915b5df5ea4e23cdf3b" category="inline-link-macro">Red Hat 文檔</block>
  <block id="e23b89b2436ee8628b20e83d26aee328" category="list-text">如需設定其他隔離代理程式的詳細資訊，請參閱 <block ref="b5a65513b4cf0cb857e9a978ad85d6c7" category="inline-link-macro-rx"></block>。</block>
  <block id="12480c55a74bca08cc08d5569c8ad1f6" category="paragraph">BeeGFS本身的版本是根據&lt;major&gt; 一份《Section.Section.》&lt;minor&gt; 版本管理方案進行版本管理&lt;patch&gt; 、而該集合則負責維護&lt;major&gt; 每個支援的BeeGFS版本（&lt;minor&gt; 例如BeeGFS 7.2或BeeGFS 7.3）的角色。隨著集合更新發行、每個角色的修補程式版本將會更新、以指出該版本分支的最新可用BeeGFS版本（例如：7.2.8）。該集合的每個版本也都經過測試並支援特定的 Linux 發行版和版本，目前檔案節點使用 Red Hat，客戶端使用 Red Hat 和 Ubuntu。不支援執行其他發佈版本、不建議執行其他版本（尤其是其他主要版本）。</block>
  <block id="e94491cd11fe554e65f37c3f4814481e" category="paragraph">檔案節點必須執行 Red Hat Enterprise Linux (RHEL) 9.4，並有權存取包含所需軟體包（pacemaker、corosync、fence-agents-all、resource-agents）的 HA 儲存庫。例如，可以執行下列命令在 RHEL 9 上啟用對應的儲存庫：</block>
  <block id="5bf759a5edebb5bbc68e8d351c1c554b" category="paragraph">BeeGFS用戶端Ansible角色可用於安裝BeeGFS用戶端套件、以及管理BeeGFS掛載。此角色已使用 RHEL 9.4 和 Ubuntu 22.04 進行測試。</block>
  <block id="1d9fc183665bd1e195391190be506894" category="section-title">Red Hat</block>
  <block id="855d885c7444df898005dfe2db0e40e1" category="paragraph">使用 Red Hat Subscription Manager 註冊並訂閱系統，以允許從官方 Red Hat 儲存庫安裝所需的軟體包，並將更新限制在支援的 Red Hat 版本上： <block ref="77a4421cc9f01b777ceaeda595865c3c" prefix=" " category="inline-code"></block> 。有關說明，請參閱<block ref="2e2e1be81972e19947d90393d5319b6e" category="inline-link-rx"></block>和<block ref="bbd834e2960f33a50fb102fd4d31a6d9" category="inline-link-rx"></block> 。</block>
  <block id="1ae0775acb1129f4f759e0e1e7b114a1" category="admonition">要了解正確的尺寸，請參閱<block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block> ..</block>
  <block id="cd4dceecb80c781af21386aee259b338" category="admonition">要了解正確的尺寸，請參閱<block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block> 。</block>
  <block id="6020c636b1383570fbebcb5aab51f557" category="paragraph">Lenovo SR665 V3 伺服器的系統韌體包含許多可透過 UEFI 介面設定的調整參數。這些調校參數可能會影響伺服器運作方式的所有層面、以及伺服器的效能表現。</block>
  <block id="5b8e3679ad73d51db58f86f62a85eb54" category="admonition">雖然部署步驟會嘗試提供足夠的詳細資料、以確保事先使用Ansible的經驗並非先決條件、但您應該對Ansible及相關術語有一定的瞭解。</block>
  <block id="7ca16c43fa8e0a0d0effb1d7cbf40f48" category="paragraph">部署程序包括幾個需要將文字複製到檔案的範例。密切注意任何以“#”或“//”字元表示的內聯註釋，其中的內容應該或可以針對特定部署進行修改。例如：</block>
  <block id="1151df05b81541e1eed601453364e0b7" category="list-text">建立 Python 虛擬環境。</block>
  <block id="dc234f020e97683d09b699c70e009f30" category="paragraph">若要了解如何配置已驗證的 Lenovo SR665 V3 檔案節點的系統設置，請參閱<block ref="dbe1843153b6696d3dd846d3a25ea7b2" category="inline-link-macro-rx"></block> 。</block>
  <block id="fc891ddcf642031b14500d5761030e91" category="list-text">安裝 Red Hat Enterprise Linux (RHEL) 9.4 並設定用於管理作業系統的主機名稱和網路端口，包括來自 Ansible 控制節點的 SSH 連線。</block>
  <block id="a0db142b527f78501de6b4acdba9d576" category="list-text">使用 Red Hat Subscription Manager 註冊並訂閱系統，以允許從官方 Red Hat 儲存庫安裝所需的軟體包，並將更新限制在支援的 Red Hat 版本上： <block ref="cb1f5d026a59f18bc71d16899248bf06" prefix=" " category="inline-code"></block> 。有關說明，請參閱<block ref="2e2e1be81972e19947d90393d5319b6e" category="inline-link-rx"></block> 和 <block ref="bbd834e2960f33a50fb102fd4d31a6d9" category="inline-link-rx"></block>。</block>
  <block id="7efcb442cda3c6a9d2e39278301df6f2" category="paragraph">系統設定會因您用來做為檔案節點的伺服器機型而有所不同。這些設定必須根據使用中的伺服器機型手動設定。若要了解如何配置已驗證的 Lenovo SR665 V3 檔案節點的系統設置，請參閱<block ref="891cfd1f8dbb99c09432be0144a5be81" category="inline-link-macro-rx"></block> 。</block>
  <block id="8e22d5f83cc5d97bd5e5cfcebeca5f15" category="paragraph">主機卡適配器可能會根據檔案節點的伺服器型號而有所不同。驗證檔案節點的建議包括：</block>
  <block id="eb13ea1edb52f2f7cdf4b15544892c06" category="cell">Red Hat Enterprise Linux（RHEL）</block>
  <block id="33b7125f0da71f5f4c0d1adb2490c32d" category="cell">RHEL 9.4 高可用性實體伺服器（雙插槽）。*附註：*檔案節點需要有效的 Red Hat Enterprise Linux Server 訂閱和 Red Hat Enterprise Linux 高可用性附加元件。</block>
  <block id="6e2ccf2574232a4db553354b8bf2b912" category="cell">5.14.0-427.42.1.el9_4.x86_64</block>
  <block id="564eb0bfa4895a5fed3372708aea6e59" category="paragraph">* ConnectX-6 HCA 韌體 * 韌體： 20.43.2566 + PXE ： 3.7.0500 + UEFI ： 14.37.0013</block>
  <block id="7670b29ec4dc7aed23b236d72df9dc4e" category="cell">最新版本適用於使用中的磁碟機機型。請參閱<block ref="dc6c914f008159d5969a25304ddfb479" category="inline-link-macro-rx"></block>。</block>
  <block id="90a84b80b2ae4bb2a14bb18a1c790012" category="cell">7.4.6</block>
  <block id="06ee37e4e06f2a68feca0b0922e9af9e" category="cell">3.1.8-1</block>
  <block id="3bbfa6ddcf5f2fb724a35ef7dc4b370a" category="cell">2.1.7-5.2</block>
  <block id="ffa9c6553bd093c43628899a2b5008b0" category="cell">件</block>
  <block id="23df4986c6f31aaed7db4752a96b620b" category="cell">0.11.7-2</block>
  <block id="ddf60efdd8bc8468bc0a5502f1b51c47" category="cell">4.10.0-62</block>
  <block id="c83be155e8adea701991eeba59a9d048" category="cell">MLNX_OFED_LINUX-23.10-3.2.2.1-LTS</block>
  <block id="7cd5ec19f90bf866b287afecf9a8cce0" category="paragraph">*ConnectX-7 HCA 韌體* FW：28.45.1200 + PXE：3.7.0500 + UEFI：14.38.0016</block>
  <block id="f86fe0da10c1b039adc0c656c6fe10a1" category="cell">11.90R3</block>
  <block id="62c1c24659da4c1307a1aec4e9fa9dd7" category="summary">BeeGFS CSI 驅動程式的部署說明。</block>
  <block id="affb21f82a5248780841be74507689d4" category="doc">BeeGFS CSI 驅動程式的部署</block>
  <block id="bd415b54a1a35e3fb2eec195775a2f4f" category="paragraph">在 Kubernetes 環境中部署 BeeGFS CSI 驅動程式的說明。</block>
  <block id="49f6a7048ccf8bb4de69bc72a5ef7a6f" category="section-title">氣隙部署</block>
  <block id="6d01a1481ac6dd659168c4aa2803fca9" category="paragraph">若要執行離線部署，必須事先在可存取網際網路的系統上下載 Kubernetes YAML 設定檔和所需的容器映像。然後需要將這些檔案傳輸到將要安裝 CSI 驅動程式的目標節點。</block>
  <block id="409591c74705bed8cf42ce30118d7e3a" category="section-title">取得驅動程式和影像</block>
  <block id="f77b0ee0f127843f3462f044be6047b5" category="paragraph">若要在實體隔離環境中部署 BeeGFS CSI 驅動程序，請執行下列步驟。</block>
  <block id="26d13d74f86ba4f7444392151dbcc4cb" category="list-text">將 BeeGFS CSI 驅動程式 GitHub 儲存庫複製到可存取網際網路的系統：</block>
  <block id="bf1c46788436014c9796833265061b93" category="list-text">取得並記錄下列影像的最新影像版本標籤。您可以造訪每個鏡像的官方註冊表或 GitHub 發布頁面，以確定最新版本標籤：</block>
  <block id="4285de0ff00a5fc5cf4f756a444f62d7" category="cell">圖片名稱</block>
  <block id="664a83be959d109b0a249ce2163380da" category="cell">註冊中心 URL/參考</block>
  <block id="603a45c52d8386fb685a3863bbcb30c9" category="cell">beegfs-csi-driver</block>
  <block id="a686f5e30845e3f70729f33cd22bdc15" category="cell"><block ref="a686f5e30845e3f70729f33cd22bdc15" category="inline-link-rx"></block></block>
  <block id="e85c0c0696d91d903e147e3c8b19ff12" category="cell">CSI配置器</block>
  <block id="8b290a238d0233fc53f10b721a2e0133" category="cell"><block ref="8b290a238d0233fc53f10b721a2e0133" category="inline-link-rx"></block></block>
  <block id="e481146938fc2bc465c78a7361e40602" category="cell">csi-resizer</block>
  <block id="0ca797786536ce26a124f24459719a5b" category="cell"><block ref="0ca797786536ce26a124f24459719a5b" category="inline-link-rx"></block></block>
  <block id="c0316766d145aaefd85f41ca9386c477" category="cell">活體探測</block>
  <block id="fe27019dc608c0087953d639a8ad0b8a" category="cell"><block ref="fe27019dc608c0087953d639a8ad0b8a" category="inline-link-rx"></block></block>
  <block id="46b701fc0aa62f484f2e07e207594448" category="cell">csi-node-driver-registrar</block>
  <block id="415d195e38180071f74a988ffc60c45f" category="cell"><block ref="415d195e38180071f74a988ffc60c45f" category="inline-link-rx"></block></block>
  <block id="043d5e887513ab35c6e80616cc605869" category="list-text">使用 containerd 將每個鏡像拉取到您的系統中，並確保替換<block ref="22b0607250cb0c53df9a2bcc780e1cac" prefix=" " category="inline-code"></block>每張圖片都帶有最新的實際標籤：</block>
  <block id="72d8ab21c0846404c9fa1d2c0ed6de3b" category="list-text">每張擷取的影像都必須匯出為單獨的檔案。<block ref="58963a595c988dc6f693cb3238dc907a" prefix=" " category="inline-code"></block>文件。這是將鏡像傳輸到您的隔離環境並將其匯入目標系統上的 containerd 所必需的。例如：</block>
  <block id="458f7d5f35bdf0f6043130445d1cfc71" category="paragraph">對每個需要的圖像重複此導出命令，並根據需要替換圖像名稱和標籤。</block>
  <block id="2217140bc2c23612307761f7cb282334" category="list-text">複製 BeeGFS CSI 驅動程式儲存庫和所有匯出內容<block ref="58963a595c988dc6f693cb3238dc907a" prefix=" " category="inline-code"></block>使用您喜歡的方式將檔案傳輸到您的實體隔離環境。對於這種設置，請儲存<block ref="603a45c52d8386fb685a3863bbcb30c9" prefix=" " category="inline-code"></block>文件到<block ref="5fd37a234d3f6a9bc0a21cc07731ffd7" prefix=" " category="inline-code"></block>以及影像<block ref="c8227798f49cbb50b8d04754d8f45ee9" prefix=" " category="inline-code"></block>。</block>
  <block id="7f68beba0dd9ab1053879c73e95e722b" category="section-title">導入所需影像</block>
  <block id="50a0462e171c50558a3a13dae699c03e" category="list-text">導航至<block ref="c8227798f49cbb50b8d04754d8f45ee9" prefix=" " category="inline-code"></block>儲存映像的目錄，並使用 containerd 匯入每個映像。例如：</block>
  <block id="98aafa5870a2b9f5d25c1574ae58b469" category="list-text">執行以下命令以驗證鏡像是否已載入到 containerd 中：</block>
  <block id="465b5810a892336db44b0c769a0eb60b" category="section-title">配置和部署 CSI 驅動程式覆蓋層</block>
  <block id="50867adc3a7cabd5d8fe87fc742e12c0" category="list-text">導航至<block ref="5fd37a234d3f6a9bc0a21cc07731ffd7" prefix=" " category="inline-code"></block>目錄。</block>
  <block id="422df0ed85c408f270129542d56b8810" category="list-text">預設情況下，覆蓋層配置適用於線上部署。若要執行實體隔離部署，需要修改覆蓋層配置。將「default」疊加層資料夾複製到一個新的疊加層，例如：<block ref="16e4da293eeeaf27c6ba3949f0356e80" prefix=" " category="inline-code"></block> ：</block>
  <block id="49a2f8c2310ba7a1752847c399b17158" category="list-text">編輯<block ref="25b82f571149598ee47d12d5d61194aa" prefix=" " category="inline-code"></block>文件。取消註解並更新<block ref="59b514174bffe4ae402b3d63aad79fe0" prefix=" " category="inline-code"></block>包含您下載的確切標籤的部分：</block>
  <block id="91786c07b0a4a2a2c3536eed93cfaae2" category="list-text">透過變更鏡像拉取策略，將 Kubernetes 設定為使用 containerd 中本機載入的鏡像。<block ref="68eec46437c384d8dad18d5464ebc35c" prefix=" " category="inline-code"></block>到<block ref="6e7b34fa59e1bd229b207892956dc41c" prefix=" " category="inline-code"></block>。建立一個名為的文件<block ref="853fc0d13ffa93cd975ed24609b8343a" prefix=" " category="inline-code"></block>你的<block ref="a2d4bbdbe440ac49ed78fc74d6dacb1c" prefix=" " category="inline-code"></block>包含以下內容的目錄：</block>
  <block id="5eb7c9d936dbe748b520bff1630b629f" category="admonition">環境<block ref="3a228a751d4e9e04c19ca2752a11d160" prefix=" " category="inline-code"></block>確保 Kubernetes 使用載入到 containerd 中的鏡像，而不嘗試從外部鏡像倉庫拉取鏡像。</block>
  <block id="bc275aa722815ec77f72d817c7b54bd1" category="list-text">打開<block ref="25b82f571149598ee47d12d5d61194aa" prefix=" " category="inline-code"></block>並添加以下部分：</block>
  <block id="8c5d2c16e12f5275bc2fa336e913cb91" category="admonition">這<block ref="c2934aa84321b97e14787e2aec99d2f5" prefix=" " category="inline-code"></block>該部分允許您應用自訂補丁——例如更改<block ref="2b8b5018006a800ae06485c3aacfa08d" prefix=" " category="inline-code"></block>在基礎 Kubernetes 清單之上。驗證路徑<block ref="853fc0d13ffa93cd975ed24609b8343a" prefix=" " category="inline-code"></block>相對於你而言是正確的<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block>文件。</block>
  <block id="f1ef26ccc46f1f686316ca27b5857d58" category="section-title">安裝 BeeGFS CSI 驅動程式</block>
  <block id="df5c81289dd355ad8959bf8aa77b5fcf" category="list-text">使用自訂覆蓋層安裝 BeeGFS CSI 驅動程式。此步驟將套用所有設定更改，包括使用本機匯入的映像和更新的映像拉取策略。</block>
  <block id="f71f0c923d11fceafd8703af31e867d2" category="paragraph">在複製的 BeeGFS CSI 驅動程式倉庫的根目錄下，執行以下命令：</block>
  <block id="2c24299170fb70d00b03247bccfcb7a1" category="list-text">繼續前往<block ref="754835206590e06e47d1caf7bd547848" category="inline-xref-macro-rx"></block>本節用於部署和驗證您的 BeeGFS CSI 驅動程式設定。</block>
  <block id="13b2e855597fd8f22487fccbe4a80eae" category="section-title">線上部署</block>
  <block id="e4b86b9875f74bf62b17ea80083b70a4" category="paragraph">如果您的 Kubernetes 節點可以存取互聯網，您可以直接部署 BeeGFS CSI 驅動程序，而無需手動下載或傳輸容器鏡像。當 pod 部署完成後，它們會自動從鏡像中心下載鏡像並啟動所需的服務。</block>
  <block id="5f11f71bbfdebcf4ad264dc61816a734" category="section-title">取得驅動程式庫</block>
  <block id="54daa05290ed0877f9265db9ae57e3fc" category="list-text">將 BeeGFS CSI 驅動程式 GitHub 儲存庫複製到本機系統：</block>
  <block id="d21a5501cb10accfdf04229c8558fc56" category="section-title">配置驅動程式</block>
  <block id="90bc50386df0e270e499eebdee173bc8" category="list-text">導航至克隆的儲存庫目錄，如有必要，更新預設覆蓋目錄中的設定檔：</block>
  <block id="94b4fb70ee11240a3a52e7a02eabb573" category="paragraph">您應該會看到類似這樣的文件：</block>
  <block id="f25f8d8829b3707a808a58abb4de8757" category="list-text">如果您的 BeeGFS 用戶端設定檔未命名<block ref="0e2e0e04197278e759d18ad910b66065" prefix=" " category="inline-code"></block>建立一個與此名稱完全相同的符號鏈接，指向您的設定檔：</block>
  <block id="9e7874ce377884e3527280e8bb415a45" category="admonition">CSI驅動程式要求設定檔位於下列位置：<block ref="0e2e0e04197278e759d18ad910b66065" prefix=" " category="inline-code"></block>並且要用這個名字。</block>
  <block id="dbf1a5b63c74a74a2e3fb0a120101c7f" category="list-text">如果您需要自訂任何設置，例如儲存類別、金鑰或連接身份驗證，請編輯相關文件。<block ref="4e59bd10e78320bf511400f519b7f63b" prefix=" " category="inline-code"></block>部署前。</block>
  <block id="ffa68119a4261c6c6f991574f3e13cb9" category="list-text">使用以下命令安裝預設覆蓋層<block ref="0f12ee5c9f1dd90158580f1c292b0d37" prefix=" " category="inline-code"></block>。這將自動從各自的鏡像倉庫拉取所需的鏡像，並建立所有必要的 Kubernetes 資源：</block>
  <block id="12a7f9470cdc13eee1ab84d6d332d348" category="list-text">確認資源已建立且 Pod 正在運作：</block>
  <block id="8637d6c1f3e0436f7f2ec935b829bd22" category="list-text">範例輸出：</block>
  <block id="e978b168b4d9799f573a467a7e55f53f" category="admonition">使用<block ref="65a45a241a9c54cd8c4592713f1750bb" prefix=" " category="inline-code"></block>對於覆蓋層（包含目錄）<block ref="67b2cc1cd5b1570014463995fb2ada61" prefix=" " category="inline-code"></block>文件）。使用<block ref="abef5e1865ed355db68990ddefd152e3" prefix=" " category="inline-code"></block>適用於純 YAML 清單或清單目錄。</block>
  <block id="cb128f50baa7598675416d0ff2e14267" category="list-text">繼續前往<block ref="754835206590e06e47d1caf7bd547848" category="inline-xref-macro-rx"></block>用於驗證 BeeGFS CSI 驅動程式設定的部分。</block>
  <block id="40462a3d159ac4f4e4f34952d3a65463" category="section-title">部署範例應用程式</block>
  <block id="d668cf8d9ef769defd503b4241077202" category="paragraph">安裝 BeeGFS CSI 驅動程式（無論是實體隔離還是線上）後，您可以部署範例應用程式來驗證您的設定。此範例包含 StorageClass、PersistentVolumeClaim (PVC) 和使用 BeeGFS CSI 驅動程式的 pod。</block>
  <block id="72d214918d58d6a6894e25a754f675f9" category="section-title">部署前：</block>
  <block id="ac7b7057ee700cf2643e737a19884559" category="list-text">取得 BeeGFS 管理節點的 IP 位址：</block>
  <block id="c8dcea75adc3e609de5d39a447933c33" category="paragraph">BeeGFS 7.4</block>
  <block id="eb96b76c0ccb44c7de66c9e3f9c879e8" category="paragraph">**BeeGFS 8**</block>
  <block id="9d3a5f8790393047a3908cbc0ee51420" category="paragraph">**預期輸出：**</block>
  <block id="af8f06e731d7616c000ebe03fa476e5f" category="list-text">更新管理節點 IP<block ref="dc34d2dc8fcddfd1ee45eb519a8f6a9c" prefix=" " category="inline-code"></block> 。</block>
  <block id="9ccb0f3b017f98c1272fadb2d6a617e7" category="list-text">更新值<block ref="d0353404142971776db78f4531dd2920" prefix=" " category="inline-code"></block>。將其設定為唯一值（例如您的 k8s 叢集名稱），以防止多個叢集在相同 BeeGFS 路徑上動態配置磁碟區。</block>
  <block id="86bbb8f6d180e61d3ccb17135c77a505" category="listing-title">StorageClass 範例程式碼片段：</block>
  <block id="507a3a88cebc46603ce2be8eaa924eee" category="section-title">部署</block>
  <block id="b5c5d64e0816d7ee03e86e799e6c7ef6" category="list-text">部署範例應用程式檔案：</block>
  <block id="842d962ed645a298d85dca6023ab75ce" category="list-text">驗證範例 pod 和 PVC 是否正在運作並已綁定：</block>
  <block id="48f14000b6a7abc3c947c38345bda15f" category="admonition">對於實體隔離部署和線上部署，範例應用程式部署步驟完全相同。請確保您已更新管理節點 IP 位址和<block ref="d0353404142971776db78f4531dd2920" prefix=" " category="inline-code"></block>部署前，在 StorageClass 清單中。</block>
  <block id="55ec134e0d67db67c58275cc5dbab8c9" category="summary">BeeGFS CSI 驅動程式概述和配置。</block>
  <block id="88e5cc66bcc4a5e334c90758d3c0b282" category="doc">BeeGFS CSI 驅動程式的配置</block>
  <block id="2e940d7b092eed69be59f873663e4fcf" category="paragraph">BeeGFS CSI 驅動程式使 Kubernetes 叢集能夠動態地配置和管理 BeeGFS 卷，將高效能 BeeGFS 儲存與容器化工作負載整合在一起。</block>
  <block id="06c2cea18679d64399783748fa367bdd" category="inline-image-macro">一</block>
  <block id="8ad4bd3c6599e6f179dde3df62a3b1bd" category="paragraph-title"><block ref="58f667aaf05f87159670e12bd9bc076b" category="inline-image-macro-rx" type="image"></block>確保所有先決條件均已滿足</block>
  <block id="74553e70a4b772df56cfb1a597955b1c" category="paragraph">檢查先決條件，確保您擁有正在執行的 Kubernetes 叢集、與 BeeGFS 叢集的連線以及安裝叢集範圍資源所需的權限。</block>
  <block id="aada29daee1d64ed0fe907043855cb7e" category="inline-image-macro">二</block>
  <block id="952c3a2d65c211d4733271165f539995" category="paragraph-title"><block ref="54f425ce8d89f4ed6b8a546561af5d60" category="inline-image-macro-rx" type="image"></block>部署 BeeGFS CSI 驅動程式</block>
  <block id="afd9415aa01025fcc4ffd0174f760665" category="paragraph">複製 BeeGFS CSI 驅動程式儲存庫，並使用提供的 Kubernetes 清單或覆蓋層部署驅動程式。</block>
  <block id="ca8a2087e5557e317599344687a57391" category="inline-image-macro">三</block>
  <block id="4f6945dd585cd0da29fce8b6936d0f0b" category="paragraph-title"><block ref="05b2444faffd66d76e88602ea7dd353f" category="inline-image-macro-rx" type="image"></block>驗證部署</block>
  <block id="ba5bead71d6bd3866e17944925461bc6" category="paragraph">透過檢查相關的 Kubernetes pod，確認所有 BeeGFS CSI 驅動程式元件均已安裝並正常運作。排查任何問題，例如節點調度衝突或節點上啟用交換分區等。</block>
  <block id="981b8fcee42e1e726a67a2b9a98ea6e9" category="inline-image-macro">四</block>
  <block id="4a1dc59c2958190ddf06e8e83de02c70" category="paragraph-title"><block ref="beadfa85a2fdca06b91edc1131c603e6" category="inline-image-macro-rx" type="image"></block>部署和驗證範例應用程式</block>
  <block id="56992f17034a256bf311aae4a4b055a6" category="paragraph">應用範例 Kubernetes 清單並確認工作負載可以按預期存取 BeeGFS 支援的儲存。</block>
  <block id="603ef41eb6cd17d863e4f467dcd8cfb4" category="summary">部署 BeeGFS CSI 驅動程式的前提條件</block>
  <block id="f9d8a648f7c6721d3f15d8f3a7d3e7e0" category="paragraph">在部署和設定 BeeGFS CSI 驅動程式之前，請確保您有一個正在執行的 Kubernetes 叢集、可以存取您的 BeeGFS 集群，以及安裝叢集範圍資源的適當權限。</block>
  <block id="e12672f2dc5733b4e3a9787d47568750" category="section-title">驗證 Kubernetes 設定</block>
  <block id="254db9997d3d74e42d791bca5cab05ae" category="paragraph">執行以下命令檢查 Kubernetes 叢集中 Pod 的狀態：</block>
  <block id="dcfaf14ae15c960ad26b7c5926755051" category="paragraph">**預期輸出：**</block>
  <block id="e8b73f849c9424fbf30a1495f9647ddc" category="paragraph">如果沒有 pod 正在運行，則清單為空。否則，pod 應該能夠正常列出。</block>
  <block id="39af16c3663078c0d25dacf20f5c32f4" category="section-title">驗證 BeeGFS 用戶端和服務</block>
  <block id="586353ad9196702917d4dd6b15a6c079" category="paragraph">執行以下命令驗證 BeeGFS 叢集是否運作正常且所有服務均可存取：</block>
  <block id="24f31e15d816c01d4984671c5289aeb6" category="admonition">CSI驅動程式可與兩者搭配使用<block ref="0af6b87fa08012299b34064ba959cf4e" prefix=" " category="inline-code"></block>和<block ref="976bae16a27bdb18aba01a29b5cc2d4e" prefix=" " category="inline-code"></block>必須將其安裝在每個 Kubernetes 節點上。有關安裝步驟，請參閱 BeeGFS 用戶端 DKMS 文件：<block ref="4dd12024bd6894a04e0c022171f8f14e" category="inline-link-rx"></block></block>
  <block id="e25be8e7a17930576238e77bf9177506" category="paragraph">BeeGFS 7.4 預期輸出：</block>
  <block id="d7f6fe5c2d3c17bd2364508996328d89" category="paragraph">如果任何服務無法存取，請確保 BeeGFS 用戶端配置正確，並且與 BeeGFS 伺服器的網路連接正常。</block>
  <block id="75c14dd603e19d9d33db73ba234b5c7f" category="summary">BeeGFS CSI 驅動程式部署故障排除。</block>
  <block id="208322d5c9ec44ddbbd85cf49e17df6e" category="doc">BeeGFS CSI 驅動程式部署故障排除</block>
  <block id="56bad221ec5807f76a20617ae9da412b" category="paragraph">在排查 BeeGFS CSI 驅動程式部署問題時，請確保：</block>
  <block id="e976ce4f9fe3247fcf6ce92edfe04bae" category="list-text">所有先決條件均已滿足，包括 BeeGFS 用戶端的安裝和設定。</block>
  <block id="bdba2285ab9f40b4639ccafbc4797d01" category="list-text">BeeGFS CSI 驅動程式已使用正確的覆蓋層進行部署。</block>
  <block id="4745ccbc322a33be8729ec78931a3a66" category="list-text">部署已驗證，任何錯誤（例如節點污點或啟用交換分區）均已解決。</block>
  <block id="886bf328722bc8f20eb92f5fbd0a74b3" category="list-text">已部署並驗證範例應用程序，以確認其功能正常。</block>
  <block id="b3b8c965d6d37607fec4fb4867cece2e" category="inline-link-macro">BeeGFS CSI 驅動程式 GitHub</block>
  <block id="9657e0a9e6e65b93d5ae0427b27abf8f" category="paragraph">如需深入排除故障，請參閱<block ref="9d24771a1bfa218970e74f53ae447160" category="inline-link-macro-rx"></block>。</block>
  <block id="c2c6e7a3ecf8ed632c275146ba1d2a64" category="section-title">Kubernetes 設定 - 常見錯誤場景</block>
  <block id="c10f08d79df6a85e98a20bc5cb4134cb" category="paragraph">嘗試檢索節點上所有目前正在運行的 Pod 時出現的範例錯誤：</block>
  <block id="384679146a5bc15e9b5bc504a8d2c024" category="paragraph">錯誤輸出範例：</block>
  <block id="94b36e4d62375a86e2bd62bad09ad470" category="paragraph">解決這類問題時，有幾個關鍵領域需要調查。建議先檢查以下列出的各個方面。</block>
  <block id="1b8edc52f33fe39f7087c5e81309dcfb" category="section-title">containerd 出錯</block>
  <block id="3fedd102645ec75ab2434b28b2ec0693" category="paragraph">檢查 containerd 守護程式的狀態：</block>
  <block id="86defa5bf9e807700d4cccd688f99e8e" category="paragraph">如果守護程式未執行<block ref="a8404d648f2511ea5f08f9eca4839117" prefix="(" category="inline-code"></block>），重新啟動它。如果重新啟動後仍然無法執行，請檢查系統日誌是否有錯誤：</block>
  <block id="5072df87bb825b2cdfea041593dd98ac" category="section-title">kubelet 出錯</block>
  <block id="232c36a71579df7b86e347acd7ce3a60" category="paragraph">檢查 kubelet 服務的狀態：</block>
  <block id="58a21ff850536cc55e4672b372f8d7cb" category="paragraph">如果服務未運行，請重新啟動它：</block>
  <block id="38e7d36bda123c394540d5a7e42dd766" category="paragraph">如果問題仍然存在，請檢查系統日誌中的錯誤：</block>
  <block id="fed519e0ddb1a8b183c1c987b9e7d3d3" category="section-title">互換發行</block>
  <block id="f9adc615b843c7d1fc88a7133c9753c0" category="paragraph">如果遇到與「swap」相關的錯誤，請停用 swap 並重新啟動 kubelet。</block>
  <block id="c2c011c8c283a6fd50efe130a9d4e481" category="admonition">交換分區通常在作業系統安裝過程中預設啟用，並列在以下位置：<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block> Kubernetes 不支援啟用交換分割區運作。為防止重新啟動後重新啟用交換分割區，請註解掉所有交換分割區條目。<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block> 。</block>
  <block id="8504b71b5661fc7252208f63cc784f4a" category="section-title">BeeGFS客戶端和輔助組態故障排除</block>
  <block id="db9d9ed8f960a5d3a3249aba43a8c1ed" category="list-text">查看配置<block ref="0e2e0e04197278e759d18ad910b66065" prefix=" " category="inline-code"></block>。</block>
  <block id="d804d68c0e802de24545563b4f391e9f" category="paragraph">預設情況下，對於安全環境，BeeGFS 連線身份驗證應**啟用**。確保<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>標誌位已設定為<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>以及正確的路徑<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>已指定：</block>
  <block id="63635c1d07ff5dcb5b4603720dfa1169" category="admonition">如果您有意允許 BeeGFS 檔案系統在**無需身份驗證**的情況下連接，請進行以下設定<block ref="c69429e5c5c7d58d10a00d1658f74de1" prefix=" " category="inline-code"></block>並刪除或註解掉<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>範圍。</block>
  <block id="af14bbdf6eb7c92aa161d2a31f8ba4df" category="list-text">驗證管理服務的 IP 位址。<block ref="6ea5464abdaaa0243bf0db8481a9a52b" prefix=" " category="inline-code"></block>參數設定正確。</block>
  <block id="5d0683df890e48533023fab6377845ff" category="list-text">更新路徑<block ref="813dc23e54b6d145f44c2c4bc7dade8c" prefix=" " category="inline-code"></block>和<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block>。這些檔案指定用於儲存或節點間通訊的網路介面。例如：</block>
  <block id="292fc81e058013795feae73d29ff095d" category="list-text">更新路徑<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>參數（如果啟用身份驗證）。</block>
  <block id="5ef116818fffd81fdeaff10c5c809a45" category="paragraph">**設定範例：**</block>
  <block id="e7f19f57f91378c152e9da5ba65546f4" category="list-text">查看配置<block ref="debd4c97a4d385fe7993e6103307943b" prefix=" " category="inline-code"></block>。</block>
  <block id="317d34215f4ca6c1677201dca4276668" category="paragraph">與客戶端配置一樣，連接身份驗證預設情況下應該**啟用**。確保<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>標誌位已設定為<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block>以及正確的路徑<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>已指定：</block>
  <block id="6ef6bcb47a028dd3d882c38dfc320c80" category="paragraph">**輔助設定範例：**</block>
  <block id="8b3015b51b9088a08eac05bb296a4505" category="section-title">BeeGFS 控制器問題檢查</block>
  <block id="b33847b1940c739029febbf7cf1eeeae" category="paragraph">部署覆蓋層後，您可能會在 kubectl get all 的輸出中看到一些資源處於 PENDING 狀態。</block>
  <block id="140781a98dce4a770e71d321a8f8e611" category="paragraph">豆莢<block ref="2d13df6f8b5e4c5af9f87e0dc39df69d" prefix=" " category="inline-code"></block>狀態異常可能是由節點污點、資源限制、鏡像缺失或調度需求未滿足所引起的。查看 pod 事件和日誌以取得更多詳細資訊。如果狀態如上所示，請使用 describe 指令檢查已建立的 pod。</block>
  <block id="8b09a755212b5cca1f1d7d9a1e997e47" category="paragraph">如果您看到鏡像拉取錯誤或 pod 卡住，<block ref="afee797a1930cb975abc264ca69d32f3" prefix=" " category="inline-code"></block>驗證所有必需的鏡像是否都存在於 containerd 中（離線）或可從登錄機碼存取（線上）。請與以下人員聯絡：</block>
  <block id="582cbc0a0d0b768b731ad000cabe5151" category="section-title">檢查 Pod 日誌</block>
  <block id="a46f16ede9c31ebdf5ab0299691aa4f7" category="paragraph">如果一個 pod 無法啟動或處於下列狀態<block ref="9457e58b926d8b2d0da3eb31f3ad636e" prefix=" " category="inline-code"></block>狀態，請查看其日誌以了解更多詳情：</block>
  <block id="496d0c1dd803c59e593044d8c5366870" category="paragraph">如果您遇到與「無法容忍的污點」相關的錯誤（可在 kubectl describe 的輸出中看到），如下所示：</block>
  <block id="29201c8949211ed5669e84f70f66edd3" category="paragraph">使用以下命令從節點中移除污點：</block>
  <block id="9951f77a7e9a382a385903b2c91dbd5b" category="paragraph">清除污點後，重新套用疊加層。這樣應該可以解決問題：</block>
  <block id="dd812878805193824385408c5fd1225f" category="summary">BeeGFS CSI 驅動程式部署驗證。</block>
  <block id="2504618a50d6cfe174ffb859c662a397" category="doc">BeeGFS CSI 驅動程式部署驗證</block>
  <block id="fc73979248109f69ab34551b358492fc" category="paragraph">若要驗證 BeeGFS CSI 驅動程式是否已成功部署，請檢查 CSI 驅動程式 pod 的狀態，並確認它們是否如預期運作。</block>
  <block id="ac613bcb5c71c67fca0637a5e52f9444" category="paragraph">若要檢查 BeeGFS-CSI 命名空間中所有資源的狀態，請執行：</block>
  <block id="6fc82c24a6a193b67f54717ad788f4d5" category="section-title">檢查控制器艙</block>
  <block id="76eb94c4020b607bf5bb0f8ee7a6c9e6" category="paragraph">要診斷問題或收集有關 BeeGFS CSI 控制器 pod 的更多詳細信息，請使用以下命令描述該 pod 並查看其事件、狀態和最近活動：</block>
  <block id="d93bbac66e89b657b4ffd789b32672bb" category="section-title">驗證儲存類別</block>
  <block id="4388b94df80adf5a29867f1e565a04df" category="list-text">驗證 StorageClass 是否建立成功：</block>
  <block id="cbc9efaa280e1bbc441dd3fe29c2bc95" category="list-text">確認 BeeGFS 卷已按預期掛載。</block>
  <block id="d1427b4ccfc3361e3a4469e3e4b845c7" category="paragraph">驗證指定的目錄<block ref="d0353404142971776db78f4531dd2920" prefix=" " category="inline-code"></block>在<block ref="dc34d2dc8fcddfd1ee45eb519a8f6a9c" prefix=" " category="inline-code"></block>顯示在<block ref="d960002b1832abbbb111ea314b0bb6c0" prefix=" " category="inline-code"></block>。</block>
  <block id="e92bdde19fe0a0cf76c7af170c492a5f" category="paragraph">例如，如果<block ref="d0353404142971776db78f4531dd2920" prefix=" " category="inline-code"></block>設定為<block ref="8e191b49bbc9aad656bf0228dd928cc7" prefix=" " category="inline-code"></block>你應該可以看到這個目錄：</block>
  <block id="186a96557e62566dbb3a7afc406cb710" category="sidebar">部署功能和集成</block>
  <block id="bcb997ab063bc1a29baf053859f1f080" category="sidebar">BeeGFS CSI 驅動程式</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="sidebar">先決條件</block>
  <block id="ea355214fd4bc7c57f471bd92918879b" category="sidebar">部署</block>
  <block id="52b8ffce119fe77b28034f2fdd35eb5f" category="sidebar">確認</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="sidebar">故障排除</block>
</blocks>